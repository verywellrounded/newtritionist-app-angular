var y0=Object.defineProperty,v0=Object.defineProperties;var E0=Object.getOwnPropertyDescriptors;var Ha=Object.getOwnPropertySymbols;var DE=Object.prototype.hasOwnProperty,bE=Object.prototype.propertyIsEnumerable;var TE=(t,e,n)=>e in t?y0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F=(t,e)=>{for(var n in e||={})DE.call(e,n)&&TE(t,n,e[n]);if(Ha)for(var n of Ha(e))bE.call(e,n)&&TE(t,n,e[n]);return t},Ee=(t,e)=>v0(t,E0(e));var CE=(t,e)=>{var n={};for(var r in t)DE.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Ha)for(var r of Ha(t))e.indexOf(r)<0&&bE.call(t,r)&&(n[r]=t[r]);return n};var b=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{c(n.next(u))}catch(l){i(l)}},s=u=>{try{c(n.throw(u))}catch(l){i(l)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);c((n=n.apply(t,e)).next())});function SE(t,e){return Object.is(t,e)}var Oe=null,qa=!1,Kd=1,ii=Symbol("SIGNAL");function de(t){let e=Oe;return Oe=t,e}function AE(){return Oe}var za={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function RE(t){if(qa)throw new Error("");if(Oe===null)return;Oe.consumerOnSignalRead(t);let e=Oe.nextProducerIndex++;if(Wa(Oe),e<Oe.producerNode.length&&Oe.producerNode[e]!==t&&$o(Oe)){let n=Oe.producerNode[e];Ga(n,Oe.producerIndexOfThis[e])}Oe.producerNode[e]!==t&&(Oe.producerNode[e]=t,Oe.producerIndexOfThis[e]=$o(Oe)?xE(t,Oe,e):0),Oe.producerLastReadVersion[e]=t.version}function _0(){Kd++}function NE(t){if(!($o(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Kd)){if(!t.producerMustRecompute(t)&&!Yd(t)){Wd(t);return}t.producerRecomputeValue(t),Wd(t)}}function ME(t){if(t.liveConsumerNode===void 0)return;let e=qa;qa=!0;try{for(let n of t.liveConsumerNode)n.dirty||w0(n)}finally{qa=e}}function I0(){return Oe?.consumerAllowSignalWrites!==!1}function w0(t){t.dirty=!0,ME(t),t.consumerMarkedDirty?.(t)}function Wd(t){t.dirty=!1,t.lastCleanEpoch=Kd}function Qd(t){return t&&(t.nextProducerIndex=0),de(t)}function PE(t,e){if(de(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if($o(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Ga(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Yd(t){Wa(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(NE(n),r!==n.version))return!0}return!1}function Jd(t){if(Wa(t),$o(t))for(let e=0;e<t.producerNode.length;e++)Ga(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function xE(t,e,n){if(OE(t),t.liveConsumerNode.length===0&&kE(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=xE(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Ga(t,e){if(OE(t),t.liveConsumerNode.length===1&&kE(t))for(let r=0;r<t.producerNode.length;r++)Ga(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Wa(i),i.producerIndexOfThis[r]=e}}function $o(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Wa(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function OE(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function kE(t){return t.producerNode!==void 0}function T0(){throw new Error}var LE=T0;function D0(){LE()}function FE(t){LE=t}var b0=null;function VE(t,e){I0()||D0(),t.equal(t.value,e)||(t.value=e,C0(t))}var UE=Ee(F({},za),{equal:SE,value:void 0});function C0(t){t.version++,_0(),ME(t),b0?.()}function K(t){return typeof t=="function"}function oi(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ka=oi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function gr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Se=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(K(r))try{r()}catch(o){e=o instanceof Ka?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{jE(o)}catch(s){e=e??[],s instanceof Ka?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ka(e)}}add(e){var n;if(e&&e!==this)if(this.closed)jE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&gr(n,e)}remove(e){let{_finalizers:n}=this;n&&gr(n,e),e instanceof t&&e._removeParent(this)}};Se.EMPTY=(()=>{let t=new Se;return t.closed=!0,t})();var Zd=Se.EMPTY;function Qa(t){return t instanceof Se||t&&"closed"in t&&K(t.remove)&&K(t.add)&&K(t.unsubscribe)}function jE(t){K(t)?t():t.unsubscribe()}var jt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var si={setTimeout(t,e,...n){let{delegate:r}=si;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=si;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ya(t){si.setTimeout(()=>{let{onUnhandledError:e}=jt;if(e)e(t);else throw t})}function Ho(){}var BE=Xd("C",void 0,void 0);function $E(t){return Xd("E",void 0,t)}function HE(t){return Xd("N",t,void 0)}function Xd(t,e,n){return{kind:t,value:e,error:n}}var mr=null;function ai(t){if(jt.useDeprecatedSynchronousErrorHandling){let e=!mr;if(e&&(mr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=mr;if(mr=null,n)throw r}}else t()}function qE(t){jt.useDeprecatedSynchronousErrorHandling&&mr&&(mr.errorThrown=!0,mr.error=t)}var yr=class extends Se{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Qa(e)&&e.add(this)):this.destination=R0}static create(e,n,r){return new ci(e,n,r)}next(e){this.isStopped?th(HE(e),this):this._next(e)}error(e){this.isStopped?th($E(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?th(BE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},S0=Function.prototype.bind;function eh(t,e){return S0.call(t,e)}var nh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ja(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ja(r)}else Ja(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ja(n)}}},ci=class extends yr{constructor(e,n,r){super();let i;if(K(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&jt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&eh(e.next,o),error:e.error&&eh(e.error,o),complete:e.complete&&eh(e.complete,o)}):i=e}this.destination=new nh(i)}};function Ja(t){jt.useDeprecatedSynchronousErrorHandling?qE(t):Ya(t)}function A0(t){throw t}function th(t,e){let{onStoppedNotification:n}=jt;n&&si.setTimeout(()=>n(t,e))}var R0={closed:!0,next:Ho,error:A0,complete:Ho};var ui=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ft(t){return t}function Za(...t){return rh(t)}function rh(t){return t.length===0?ft:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ie=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=M0(n)?n:new ci(n,r,i);return ai(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=zE(r),new r((i,o)=>{let s=new ci({next:c=>{try{n(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ui](){return this}pipe(...n){return rh(n)(this)}toPromise(n){return n=zE(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function zE(t){var e;return(e=t??jt.Promise)!==null&&e!==void 0?e:Promise}function N0(t){return t&&K(t.next)&&K(t.error)&&K(t.complete)}function M0(t){return t&&t instanceof yr||N0(t)&&Qa(t)}function ih(t){return K(t?.lift)}function se(t){return e=>{if(ih(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ae(t,e,n,r,i){return new oh(t,e,n,r,i)}var oh=class extends yr{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function li(){return se((t,e)=>{let n=null;t._refCount++;let r=ae(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var di=class extends ie{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,ih(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Se;let n=this.getSubject();e.add(this.source.subscribe(ae(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Se.EMPTY)}return e}refCount(){return li()(this)}};var GE=oi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var et=(()=>{class t extends ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Xa(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new GE}next(n){ai(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ai(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ai(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Zd:(this.currentObservers=null,o.push(n),new Se(()=>{this.currentObservers=null,gr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ie;return n.source=this,n}}return t.create=(e,n)=>new Xa(e,n),t})(),Xa=class extends et{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Zd}};var Ge=class extends et{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var sh={now(){return(sh.delegate||Date).now()},delegate:void 0};var ec=class extends Se{constructor(e,n){super()}schedule(e,n=0){return this}};var qo={setInterval(t,e,...n){let{delegate:r}=qo;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=qo;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var hi=class extends ec{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return qo.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&qo.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,gr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var fi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};fi.now=sh.now;var pi=class extends fi{constructor(e,n=fi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var ah=new pi(hi);var tc=class extends hi{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var nc=class extends pi{};var ch=new nc(tc);var pt=new ie(t=>t.complete());function WE(t){return t&&K(t.schedule)}function KE(t){return t[t.length-1]}function QE(t){return K(KE(t))?t.pop():void 0}function Un(t){return WE(KE(t))?t.pop():void 0}function uh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function JE(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(f){try{l(r.next(f))}catch(p){s(p)}}function u(f){try{l(r.throw(f))}catch(p){s(p)}}function l(f){f.done?o(f.value):i(f.value).then(c,u)}l((r=r.apply(t,e||[])).next())})}function YE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function vr(t){return this instanceof vr?(this.v=t,this):new vr(t)}function ZE(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(v){return function(S){return Promise.resolve(S).then(v,p)}}function c(v,S){r[v]&&(i[v]=function(N){return new Promise(function(M,L){o.push([v,N,M,L])>1||u(v,N)})},S&&(i[v]=S(i[v])))}function u(v,S){try{l(r[v](S))}catch(N){y(o[0][3],N)}}function l(v){v.value instanceof vr?Promise.resolve(v.value.v).then(f,p):y(o[0][2],v)}function f(v){u("next",v)}function p(v){u("throw",v)}function y(v,S){v(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function XE(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof YE=="function"?YE(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(c,u){s=t[o](s),i(c,u,s.done,s.value)})}}function i(o,s,c,u){Promise.resolve(u).then(function(l){o({value:l,done:c})},s)}}var rc=t=>t&&typeof t.length=="number"&&typeof t!="function";function ic(t){return K(t?.then)}function oc(t){return K(t[ui])}function sc(t){return Symbol.asyncIterator&&K(t?.[Symbol.asyncIterator])}function ac(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function P0(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var cc=P0();function uc(t){return K(t?.[cc])}function lc(t){return ZE(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield vr(n.read());if(i)return yield vr(void 0);yield yield vr(r)}}finally{n.releaseLock()}})}function dc(t){return K(t?.getReader)}function Ve(t){if(t instanceof ie)return t;if(t!=null){if(oc(t))return x0(t);if(rc(t))return O0(t);if(ic(t))return k0(t);if(sc(t))return e_(t);if(uc(t))return L0(t);if(dc(t))return F0(t)}throw ac(t)}function x0(t){return new ie(e=>{let n=t[ui]();if(K(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function O0(t){return new ie(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function k0(t){return new ie(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ya)})}function L0(t){return new ie(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function e_(t){return new ie(e=>{V0(t,e).catch(n=>e.error(n))})}function F0(t){return e_(lc(t))}function V0(t,e){var n,r,i,o;return JE(this,void 0,void 0,function*(){try{for(n=XE(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function at(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function jn(t,e=0){return se((n,r)=>{n.subscribe(ae(r,i=>at(r,t,()=>r.next(i),e),()=>at(r,t,()=>r.complete(),e),i=>at(r,t,()=>r.error(i),e)))})}function Bn(t,e=0){return se((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function t_(t,e){return Ve(t).pipe(Bn(e),jn(e))}function n_(t,e){return Ve(t).pipe(Bn(e),jn(e))}function r_(t,e){return new ie(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function i_(t,e){return new ie(n=>{let r;return at(n,e,()=>{r=t[cc](),at(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>K(r?.return)&&r.return()})}function hc(t,e){if(!t)throw new Error("Iterable cannot be null");return new ie(n=>{at(n,e,()=>{let r=t[Symbol.asyncIterator]();at(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function o_(t,e){return hc(lc(t),e)}function s_(t,e){if(t!=null){if(oc(t))return t_(t,e);if(rc(t))return r_(t,e);if(ic(t))return n_(t,e);if(sc(t))return hc(t,e);if(uc(t))return i_(t,e);if(dc(t))return o_(t,e)}throw ac(t)}function Ae(t,e){return e?s_(t,e):Ve(t)}function W(...t){let e=Un(t);return Ae(t,e)}function gi(t,e){let n=K(t)?t:()=>t,r=i=>i.error(n());return new ie(e?i=>e.schedule(r,0,i):r)}function lh(t){return!!t&&(t instanceof ie||K(t.lift)&&K(t.subscribe))}var gn=oi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ee(t,e){return se((n,r)=>{let i=0;n.subscribe(ae(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:U0}=Array;function j0(t,e){return U0(e)?t(...e):t(e)}function a_(t){return ee(e=>j0(t,e))}var{isArray:B0}=Array,{getPrototypeOf:$0,prototype:H0,keys:q0}=Object;function c_(t){if(t.length===1){let e=t[0];if(B0(e))return{args:e,keys:null};if(z0(e)){let n=q0(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function z0(t){return t&&typeof t=="object"&&$0(t)===H0}function u_(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function fc(...t){let e=Un(t),n=QE(t),{args:r,keys:i}=c_(t);if(r.length===0)return Ae([],e);let o=new ie(G0(r,e,i?s=>u_(i,s):ft));return n?o.pipe(a_(n)):o}function G0(t,e,n=ft){return r=>{l_(e,()=>{let{length:i}=t,o=new Array(i),s=i,c=i;for(let u=0;u<i;u++)l_(e,()=>{let l=Ae(t[u],e),f=!1;l.subscribe(ae(r,p=>{o[u]=p,f||(f=!0,c--),c||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function l_(t,e,n){t?at(n,t,e):e()}function d_(t,e,n,r,i,o,s,c){let u=[],l=0,f=0,p=!1,y=()=>{p&&!u.length&&!l&&e.complete()},v=N=>l<r?S(N):u.push(N),S=N=>{o&&e.next(N),l++;let M=!1;Ve(n(N,f++)).subscribe(ae(e,L=>{i?.(L),o?v(L):e.next(L)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){let L=u.shift();s?at(e,s,()=>S(L)):S(L)}y()}catch(L){e.error(L)}}))};return t.subscribe(ae(e,v,()=>{p=!0,y()})),()=>{c?.()}}function ke(t,e,n=1/0){return K(e)?ke((r,i)=>ee((o,s)=>e(r,o,i,s))(Ve(t(r,i))),n):(typeof e=="number"&&(n=e),se((r,i)=>d_(r,i,t,n)))}function dh(t=1/0){return ke(ft,t)}function h_(){return dh(1)}function mi(...t){return h_()(Ae(t,Un(t)))}function pc(t){return new ie(e=>{Ve(t()).subscribe(e)})}function gt(t,e){return se((n,r)=>{let i=0;n.subscribe(ae(r,o=>t.call(e,o,i++)&&r.next(o)))})}function $n(t){return se((e,n)=>{let r=null,i=!1,o;r=e.subscribe(ae(n,void 0,void 0,s=>{o=Ve(t(s,$n(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function f_(t,e,n,r,i){return(o,s)=>{let c=n,u=e,l=0;o.subscribe(ae(s,f=>{let p=l++;u=c?t(u,f,p):(c=!0,f),r&&s.next(u)},i&&(()=>{c&&s.next(u),s.complete()})))}}function Er(t,e){return K(e)?ke(t,e,1):ke(t,1)}function Hn(t){return se((e,n)=>{let r=!1;e.subscribe(ae(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function mn(t){return t<=0?()=>pt:se((e,n)=>{let r=0;e.subscribe(ae(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function hh(t){return ee(()=>t)}function gc(t=W0){return se((e,n)=>{let r=!1;e.subscribe(ae(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function W0(){return new gn}function yi(t){return se((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function yn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?gt((i,o)=>t(i,o,r)):ft,mn(1),n?Hn(e):gc(()=>new gn))}function vi(t){return t<=0?()=>pt:se((e,n)=>{let r=[];e.subscribe(ae(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function fh(t,e){let n=arguments.length>=2;return r=>r.pipe(t?gt((i,o)=>t(i,o,r)):ft,vi(1),n?Hn(e):gc(()=>new gn))}function mc(t,e){return se(f_(t,e,arguments.length>=2,!0))}function yc(...t){let e=Un(t);return se((n,r)=>{(e?mi(t,n,e):mi(t,n)).subscribe(r)})}function Pt(t,e){return se((n,r)=>{let i=null,o=0,s=!1,c=()=>s&&!i&&r.complete();n.subscribe(ae(r,u=>{i?.unsubscribe();let l=0,f=o++;Ve(t(u,f)).subscribe(i=ae(r,p=>r.next(e?e(u,p,f,l++):p),()=>{i=null,c()}))},()=>{s=!0,c()}))})}function ph(t){return se((e,n)=>{Ve(t).subscribe(ae(n,()=>n.complete(),Ho)),!n.closed&&e.subscribe(n)})}function Re(t,e,n){let r=K(t)||e||n?{next:t,error:e,complete:n}:t;return r?se((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let c=!0;i.subscribe(ae(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;c=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):ft}var Eh={JSACTION:"jsaction"},_h={JSACTION:"__jsaction",OWNER:"__owner"},y_={};function K0(t){return t[_h.JSACTION]}function p_(t,e){t[_h.JSACTION]=e}function Q0(t){return y_[t]}function Y0(t,e){y_[t]=e}var j={AUXCLICK:"auxclick",CHANGE:"change",CLICK:"click",CLICKMOD:"clickmod",CLICKONLY:"clickonly",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEUP:"mouseup",MOUSEDOWN:"mousedown",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSEMOVE:"mousemove",POINTERUP:"pointerup",POINTERDOWN:"pointerdown",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERMOVE:"pointermove",POINTERCANCEL:"pointercancel",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",ERROR:"error",LOAD:"load",UNLOAD:"unload",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",INPUT:"input",SCROLL:"scroll",TOGGLE:"toggle",CUSTOM:"_custom"},J0=[j.MOUSEENTER,j.MOUSELEAVE,"pointerenter","pointerleave"],WG=[j.CLICK,j.DBLCLICK,j.FOCUSIN,j.FOCUSOUT,j.KEYDOWN,j.KEYUP,j.KEYPRESS,j.MOUSEOVER,j.MOUSEOUT,j.SUBMIT,j.TOUCHSTART,j.TOUCHEND,j.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],Z0=[j.FOCUS,j.BLUR,j.ERROR,j.LOAD,j.TOGGLE],Ih=t=>Z0.indexOf(t)>=0;var X0=3,eR=13,tR=32,mt={MAC_ENTER:X0,ENTER:eR,SPACE:tR};function nR(t){return t===j.MOUSEENTER?j.MOUSEOVER:t===j.MOUSELEAVE?j.MOUSEOUT:t===j.POINTERENTER?j.POINTEROVER:t===j.POINTERLEAVE?j.POINTEROUT:t}function rR(t,e,n,r){let i=!1;Ih(e)&&(i=!0);let o=typeof r=="boolean"?{capture:i,passive:r}:i;return t.addEventListener(e,n,o),{eventType:e,handler:n,capture:i,passive:r}}function iR(t,e){if(t.removeEventListener){let n=typeof e.passive=="boolean"?{capture:e.capture}:e.capture;t.removeEventListener(e.eventType,e.handler,n)}else t.detachEvent&&t.detachEvent(`on${e.eventType}`,e.handler)}function oR(t){t.preventDefault?t.preventDefault():t.returnValue=!1}var g_=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function sR(t){return t.which===2||t.which==null&&t.button===4}function aR(t){return g_&&t.metaKey||!g_&&t.ctrlKey||sR(t)||t.shiftKey}var KG=typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&/WebKit/.test(navigator.userAgent),QG=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident/.test(navigator.userAgent)),YG=typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&/Gecko/.test(navigator.product);function cR(t,e,n){let r=t.relatedTarget;return(t.type===j.MOUSEOVER&&e===j.MOUSEENTER||t.type===j.MOUSEOUT&&e===j.MOUSELEAVE||t.type===j.POINTEROVER&&e===j.POINTERENTER||t.type===j.POINTEROUT&&e===j.POINTERLEAVE)&&(!r||r!==n&&!n.contains(r))}function uR(t,e){let n={};for(let r in t){if(r==="srcElement"||r==="target")continue;let i=r,o=t[i];typeof o!="function"&&(n[i]=o)}return t.type===j.MOUSEOVER?n.type=j.MOUSEENTER:t.type===j.MOUSEOUT?n.type=j.MOUSELEAVE:t.type===j.POINTEROVER?n.type=j.POINTERENTER:n.type=j.POINTERLEAVE,n.target=n.srcElement=e,n.bubbles=!1,n}var JG={Enter:mt.ENTER," ":mt.SPACE},ZG={A:mt.ENTER,BUTTON:0,CHECKBOX:mt.SPACE,COMBOBOX:mt.ENTER,FILE:0,GRIDCELL:mt.ENTER,LINK:mt.ENTER,LISTBOX:mt.ENTER,MENU:0,MENUBAR:0,MENUITEM:0,MENUITEMCHECKBOX:0,MENUITEMRADIO:0,OPTION:0,RADIO:mt.SPACE,RADIOGROUP:mt.SPACE,RESET:0,SUBMIT:0,SWITCH:mt.SPACE,TAB:0,TREE:mt.ENTER,TREEITEM:mt.ENTER};var lR=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),Ic=class{element;handlerInfos=[];constructor(e){this.element=e}addEventListener(e,n,r){lR&&(this.element.style.cursor="pointer"),this.handlerInfos.push(rR(this.element,e,n(this.element),r))}cleanUp(){for(let e=0;e<this.handlerInfos.length;e++)iR(this.element,this.handlerInfos[e]);this.handlerInfos=[]}},dR={NAMESPACE_ACTION_SEPARATOR:".",EVENT_ACTION_SEPARATOR:":"};function qn(t){return t.eventType}function wh(t,e){t.eventType=e}function Ec(t){return t.event}function v_(t,e){t.event=e}function E_(t){return t.targetElement}function __(t,e){t.targetElement=e}function I_(t){return t.eic}function hR(t,e){t.eic=e}function fR(t){return t.timeStamp}function pR(t,e){t.timeStamp=e}function _c(t){return t.eia}function w_(t,e,n){t.eia=[e,n]}function gh(t){t.eia=void 0}function vc(t){return t[1]}function gR(t){return t.eirp}function T_(t,e){t.eirp=e}function D_(t){return t.eir}function b_(t,e){t.eir=e}function C_(t){return{eventType:t.eventType,event:t.event,targetElement:t.targetElement,eic:t.eic,eia:t.eia,timeStamp:t.timeStamp,eirp:t.eirp,eiack:t.eiack,eir:t.eir}}function mR(t,e,n,r,i,o,s,c){return{eventType:t,event:e,targetElement:n,eic:r,timeStamp:i,eia:o,eirp:s,eiack:c}}var mh=class t{eventInfo;constructor(e){this.eventInfo=e}getEventType(){return qn(this.eventInfo)}setEventType(e){wh(this.eventInfo,e)}getEvent(){return Ec(this.eventInfo)}setEvent(e){v_(this.eventInfo,e)}getTargetElement(){return E_(this.eventInfo)}setTargetElement(e){__(this.eventInfo,e)}getContainer(){return I_(this.eventInfo)}setContainer(e){hR(this.eventInfo,e)}getTimestamp(){return fR(this.eventInfo)}setTimestamp(e){pR(this.eventInfo,e)}getAction(){let e=_c(this.eventInfo);if(e)return{name:e[0],element:e[1]}}setAction(e){if(!e){gh(this.eventInfo);return}w_(this.eventInfo,e.name,e.element)}getIsReplay(){return gR(this.eventInfo)}setIsReplay(e){T_(this.eventInfo,e)}getResolved(){return D_(this.eventInfo)}setResolved(e){b_(this.eventInfo,e)}clone(){return new t(C_(this.eventInfo))}},yR={},vR=/\s*;\s*/,ER=j.CLICK,yh=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:e=!1,clickModSupport:n=!0}={}){this.syntheticMouseEventSupport=e,this.clickModSupport=n}resolveEventType(e){this.clickModSupport&&qn(e)===j.CLICK&&aR(Ec(e))?wh(e,j.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(e)}resolveAction(e){D_(e)||(this.populateAction(e,E_(e)),b_(e,!0))}resolveParentAction(e){let n=_c(e),r=n&&vc(n);gh(e);let i=r&&this.getParentNode(r);i&&this.populateAction(e,i)}populateAction(e,n){let r=n;for(;r&&r!==I_(e)&&(r.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(r,e),!_c(e));)r=this.getParentNode(r);let i=_c(e);if(i&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(e),this.syntheticMouseEventSupport&&(qn(e)===j.MOUSEENTER||qn(e)===j.MOUSELEAVE||qn(e)===j.POINTERENTER||qn(e)===j.POINTERLEAVE)))if(cR(Ec(e),qn(e),vc(i))){let o=uR(Ec(e),vc(i));v_(e,o),__(e,vc(i))}else gh(e)}getParentNode(e){let n=e[_h.OWNER];if(n)return n;let r=e.parentNode;return r?.nodeName==="#document-fragment"?r?.host??null:r}populateActionOnElement(e,n){let r=this.parseActions(e),i=r[qn(n)];i!==void 0&&w_(n,i,e),this.a11yClickSupport&&this.populateClickOnlyAction(e,n,r)}parseActions(e){let n=K0(e);if(!n){let r=e.getAttribute(Eh.JSACTION);if(!r)n=yR,p_(e,n);else{if(n=Q0(r),!n){n={};let i=r.split(vR);for(let o=0;o<i.length;o++){let s=i[o];if(!s)continue;let c=s.indexOf(dR.EVENT_ACTION_SEPARATOR),u=c!==-1,l=u?s.substr(0,c).trim():ER,f=u?s.substr(c+1).trim():s;n[l]=f}Y0(r,n)}p_(e,n)}}return n}addA11yClickSupport(e,n,r){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=e,this.preventDefaultForA11yClick=n,this.populateClickOnlyAction=r}},S_=function(t){return t[t.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",t}(S_||{}),vh=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(e,{actionResolver:n,eventReplayer:r}={}){this.dispatchDelegate=e,this.actionResolver=n,this.eventReplayer=r}dispatch(e){let n=new mh(e);this.actionResolver?.resolveEventType(e),this.actionResolver?.resolveAction(e);let r=n.getAction();if(r&&_R(r.element,n)&&oR(n.getEvent()),this.eventReplayer&&n.getIsReplay()){this.scheduleEventInfoWrapperReplay(n);return}this.dispatchDelegate(n)}scheduleEventInfoWrapperReplay(e){this.replayEventInfoWrappers.push(e),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function _R(t,e){return t.tagName==="A"&&(e.getEventType()===j.CLICK||e.getEventType()===j.CLICKMOD)}var A_=Symbol.for("propagationStopped"),Th={REPLAY:101};var IR="`preventDefault` called during event replay.";var wR="`composedPath` called during event replay.",wc=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(e,n=!0){this.dispatchDelegate=e,this.clickModSupport=n,this.actionResolver=new yh({clickModSupport:n}),this.dispatcher=new vh(r=>{this.dispatchToDelegate(r)},{actionResolver:this.actionResolver})}dispatch(e){this.dispatcher.dispatch(e)}dispatchToDelegate(e){for(e.getIsReplay()&&bR(e),TR(e);e.getAction();){if(CR(e),Ih(e.getEventType())&&e.getAction().element!==e.getTargetElement()||(this.dispatchDelegate(e.getEvent(),e.getAction().name),DR(e)))return;this.actionResolver.resolveParentAction(e.eventInfo)}}};function TR(t){let e=t.getEvent(),n=t.getEvent().stopPropagation.bind(e),r=()=>{e[A_]=!0,n()};_r(e,"stopPropagation",r),_r(e,"stopImmediatePropagation",r)}function DR(t){return!!t.getEvent()[A_]}function bR(t){let e=t.getEvent(),n=t.getTargetElement(),r=e.preventDefault.bind(e);_r(e,"target",n),_r(e,"eventPhase",Th.REPLAY),_r(e,"preventDefault",()=>{throw r(),new Error(IR+"")}),_r(e,"composedPath",()=>{throw new Error(wR+"")})}function CR(t){let e=t.getEvent(),n=t.getAction()?.element;n&&_r(e,"currentTarget",n,{configurable:!0})}function _r(t,e,n,{configurable:r=!1}={}){Object.defineProperty(t,e,{value:n,configurable:r})}function R_(t,e){t.ecrd(n=>{e.dispatch(n)},S_.I_AM_THE_JSACTION_FRAMEWORK)}function SR(t){return t?.q??[]}function AR(t){t&&(m_(t.c,t.et,t.h),m_(t.c,t.etc,t.h,!0))}function m_(t,e,n,r){for(let i=0;i<e.length;i++)t.removeEventListener(e[i],n,r)}var RR=!1,N_=(()=>{class t{static MOUSE_SPECIAL_SUPPORT=RR;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(n){this.containerManager=n}handleEvent(n,r,i){let o=mR(n,r,r.target,i,Date.now());this.handleEventInfo(o)}handleEventInfo(n){if(!this.dispatcher){T_(n,!0),this.queuedEventInfos?.push(n);return}this.dispatcher(n)}addEvent(n,r,i){if(n in this.eventHandlers||!this.containerManager||!t.MOUSE_SPECIAL_SUPPORT&&J0.indexOf(n)>=0)return;let o=(c,u,l)=>{this.handleEvent(c,u,l)};this.eventHandlers[n]=o;let s=nR(r||n);if(s!==n){let c=this.browserEventTypeToExtraEventTypes[s]||[];c.push(n),this.browserEventTypeToExtraEventTypes[s]=c}this.containerManager.addEventListener(s,c=>u=>{o(n,u,c)},i)}replayEarlyEvents(n=window._ejsa){n&&(this.replayEarlyEventInfos(n.q),AR(n),delete window._ejsa)}replayEarlyEventInfos(n){for(let r=0;r<n.length;r++){let i=n[r],o=this.getEventTypesForBrowserEventType(i.eventType);for(let s=0;s<o.length;s++){let c=C_(i);wh(c,o[s]),this.handleEventInfo(c)}}}getEventTypesForBrowserEventType(n){let r=[];return this.eventHandlers[n]&&r.push(n),this.browserEventTypeToExtraEventTypes[n]&&r.push(...this.browserEventTypeToExtraEventTypes[n]),r}handler(n){return this.eventHandlers[n]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(n,r){this.ecrd(n,r)}ecrd(n,r){if(this.dispatcher=n,this.queuedEventInfos?.length){for(let i=0;i<this.queuedEventInfos.length;i++)this.handleEventInfo(this.queuedEventInfos[i]);this.queuedEventInfos=null}}}return t})();function M_(t,e=window){return SR(e._ejsas?.[t])}function P_(t,e=window){e._ejsas&&(e._ejsas[t]=void 0)}var U=class extends Error{code;constructor(e,n){super(iu(e,n)),this.code=e}};function iu(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var bI=Symbol("InputSignalNode#UNSET"),NR=Ee(F({},UE),{transformFn:void 0,applyValueToInputSignal(t,e){VE(t,e)}});function CI(t,e){let n=Object.create(NR);n.value=t,n.transformFn=e?.transform;function r(){if(RE(n),n.value===bI)throw new U(-950,!1);return n.value}return r[ii]=n,r}function ss(t){return{toString:t}.toString()}var Tc="__parameters__";function MR(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function PR(t,e,n){return ss(()=>{let r=MR(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return c.annotation=s,c;function c(u,l,f){let p=u.hasOwnProperty(Tc)?u[Tc]:Object.defineProperty(u,Tc,{value:[]})[Tc];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function _e(t){for(let e in t)if(t[e]===_e)return e;throw Error("Could not find renamed property on target object.")}function Et(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Et).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function x_(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var xR=_e({__forward_ref__:_e});function SI(t){return t.__forward_ref__=SI,t.toString=function(){return Et(this())},t}function xt(t){return AI(t)?t():t}function AI(t){return typeof t=="function"&&t.hasOwnProperty(xR)&&t.__forward_ref__===SI}function $(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ou(t){return{providers:t.providers||[],imports:t.imports||[]}}function su(t){return O_(t,NI)||O_(t,MI)}function RI(t){return su(t)!==null}function O_(t,e){return t.hasOwnProperty(e)?t[e]:null}function OR(t){let e=t&&(t[NI]||t[MI]);return e||null}function k_(t){return t&&(t.hasOwnProperty(L_)||t.hasOwnProperty(kR))?t[L_]:null}var NI=_e({\u0275prov:_e}),L_=_e({\u0275inj:_e}),MI=_e({ngInjectableDef:_e}),kR=_e({ngInjectorDef:_e}),V=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=$({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function PI(t){return t&&!!t.\u0275providers}var LR=_e({\u0275cmp:_e}),FR=_e({\u0275dir:_e}),VR=_e({\u0275pipe:_e}),UR=_e({\u0275mod:_e}),xc=_e({\u0275fac:_e}),Ko=_e({__NG_ELEMENT_ID__:_e}),F_=_e({__NG_ENV_ID__:_e});function xI(t){return typeof t=="string"?t:t==null?"":String(t)}function jR(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():xI(t)}function BR(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new U(-200,t)}function Tf(t,e){throw new U(-201,!1)}var te=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(te||{}),kh;function OI(){return kh}function ct(t){let e=kh;return kh=t,e}function kI(t,e,n){let r=su(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&te.Optional)return null;if(e!==void 0)return e;Tf(t,"Injector")}var $R={},Qo=$R,Lh="__NG_DI_FLAG__",Oc="ngTempTokenPath",HR="ngTokenPath",qR=/\n/gm,zR="\u0275",V_="__source",Di;function GR(){return Di}function zn(t){let e=Di;return Di=t,e}function WR(t,e=te.Default){if(Di===void 0)throw new U(-203,!1);return Di===null?kI(t,void 0,e):Di.get(t,e&te.Optional?null:void 0,e)}function ne(t,e=te.Default){return(OI()||WR)(xt(t),e)}function R(t,e=te.Default){return ne(t,au(e))}function au(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Fh(t){let e=[];for(let n=0;n<t.length;n++){let r=xt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new U(900,!1);let i,o=te.Default;for(let s=0;s<r.length;s++){let c=r[s],u=QR(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(ne(i,o))}else e.push(ne(r))}return e}function KR(t,e){return t[Lh]=e,t.prototype[Lh]=e,t}function QR(t){return t[Lh]}function YR(t,e,n,r){let i=t[Oc];throw e[V_]&&i.unshift(e[V_]),t.message=JR(`
`+t.message,i,n,r),t[HR]=i,t[Oc]=null,t}function JR(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==zR?t.slice(2):t;let i=Et(e);if(Array.isArray(e))i=e.map(Et).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let c=e[s];o.push(s+":"+(typeof c=="string"?JSON.stringify(c):Et(c)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(qR,`
  `)}`}var Dt=KR(PR("Optional"),8);function wr(t,e){let n=t.hasOwnProperty(xc);return n?t[xc]:null}function Df(t,e){t.forEach(n=>Array.isArray(n)?Df(n,e):e(n))}function LI(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function kc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var Yo={},Yt=[],Kn=new V(""),FI=new V("",-1),VI=new V(""),Lc=class{get(e,n=Qo){if(n===Qo){let r=new Error(`NullInjectorError: No provider for ${Et(e)}!`);throw r.name="NullInjectorError",r}return n}};function UI(t,e){let n=t[UR]||null;if(!n&&e===!0)throw new Error(`Type ${Et(t)} does not have '\u0275mod' property.`);return n}function Qn(t){return t[LR]||null}function bf(t){return t[FR]||null}function Cf(t){return t[VR]||null}function jI(t){let e=Qn(t)||bf(t)||Cf(t);return e!==null?e.standalone:!1}function bt(t){return{\u0275providers:t}}function ZR(...t){return{\u0275providers:Sf(!0,t),\u0275fromNgModule:!0}}function Sf(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Df(e,s=>{let c=s;Vh(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&BI(i,o),n}function BI(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Af(i,o=>{e(o,r)})}}function Vh(t,e,n,r){if(t=xt(t),!t)return!1;let i=null,o=k_(t),s=!o&&Qn(t);if(!o&&!s){let u=t.ngModule;if(o=k_(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Vh(l,e,n,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let l;try{Df(o.imports,f=>{Vh(f,e,n,r)&&(l||=[],l.push(f))})}finally{}l!==void 0&&BI(l,e)}if(!c){let l=wr(i)||(()=>new i);e({provide:i,useFactory:l,deps:Yt},i),e({provide:VI,useValue:i,multi:!0},i),e({provide:Kn,useValue:()=>ne(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let l=t;Af(u,f=>{e(f,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Af(t,e){for(let n of t)PI(n)&&(n=n.\u0275providers),Array.isArray(n)?Af(n,e):e(n)}var XR=_e({provide:String,useValue:_e});function $I(t){return t!==null&&typeof t=="object"&&XR in t}function eN(t){return!!(t&&t.useExisting)}function tN(t){return!!(t&&t.useFactory)}function Uh(t){return typeof t=="function"}var cu=new V(""),Cc={},nN={},Dh;function Rf(){return Dh===void 0&&(Dh=new Lc),Dh}var It=class{},Jo=class extends It{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Bh(e,s=>this.processProvider(s)),this.records.set(FI,Ei(void 0,this)),i.has("environment")&&this.records.set(It,Ei(void 0,this));let o=this.records.get(cu);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(VI,Yt,te.Self))}destroy(){Go(this),this._destroyed=!0;let e=de(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),de(e)}}onDestroy(e){return Go(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Go(this);let n=zn(this),r=ct(void 0),i;try{return e()}finally{zn(n),ct(r)}}get(e,n=Qo,r=te.Default){if(Go(this),e.hasOwnProperty(F_))return e[F_](this);r=au(r);let i,o=zn(this),s=ct(void 0);try{if(!(r&te.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=cN(e)&&su(e);l&&this.injectableDefInScope(l)?u=Ei(jh(e),Cc):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let c=r&te.Self?Rf():this.parent;return n=r&te.Optional&&n===Qo?null:n,c.get(e,n)}catch(c){if(c.name==="NullInjectorError"){if((c[Oc]=c[Oc]||[]).unshift(Et(e)),o)throw c;return YR(c,e,"R3InjectorError",this.source)}else throw c}finally{ct(s),zn(o)}}resolveInjectorInitializers(){let e=de(null),n=zn(this),r=ct(void 0),i;try{let o=this.get(Kn,Yt,te.Self);for(let s of o)s()}finally{zn(n),ct(r),de(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Et(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=xt(e);let n=Uh(e)?e:xt(e&&e.provide),r=iN(e);if(!Uh(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Ei(void 0,Cc,!0),i.factory=()=>Fh(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=de(null);try{return n.value===Cc&&(n.value=nN,n.value=n.factory()),typeof n.value=="object"&&n.value&&aN(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{de(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=xt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function jh(t){let e=su(t),n=e!==null?e.factory:wr(t);if(n!==null)return n;if(t instanceof V)throw new U(204,!1);if(t instanceof Function)return rN(t);throw new U(204,!1)}function rN(t){if(t.length>0)throw new U(204,!1);let n=OR(t);return n!==null?()=>n.factory(t):()=>new t}function iN(t){if($I(t))return Ei(void 0,t.useValue);{let e=oN(t);return Ei(e,Cc)}}function oN(t,e,n){let r;if(Uh(t)){let i=xt(t);return wr(i)||jh(i)}else if($I(t))r=()=>xt(t.useValue);else if(tN(t))r=()=>t.useFactory(...Fh(t.deps||[]));else if(eN(t))r=()=>ne(xt(t.useExisting));else{let i=xt(t&&(t.useClass||t.provide));if(sN(t))r=()=>new i(...Fh(t.deps));else return wr(i)||jh(i)}return r}function Go(t){if(t.destroyed)throw new U(205,!1)}function Ei(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function sN(t){return!!t.deps}function aN(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function cN(t){return typeof t=="function"||typeof t=="object"&&t instanceof V}function Bh(t,e){for(let n of t)Array.isArray(n)?Bh(n,e):n&&PI(n)?Bh(n.\u0275providers,e):e(n)}function kt(t,e){t instanceof Jo&&Go(t);let n,r=zn(t),i=ct(void 0);try{return e()}finally{zn(r),ct(i)}}function HI(){return OI()!==void 0||GR()!=null}function uN(t){if(!HI())throw new U(-203,!1)}function lN(t){return typeof t=="function"}var wt=0,q=1,G=2,We=3,$t=4,qt=5,Ht=6,U_=7,Ot=8,vn=9,Yn=10,Ke=11,Zo=12,j_=13,as=14,Tt=15,Ai=16,_i=17,Ri=18,uu=19,qI=20,Wn=21,bh=22,Fc=23,_t=24,Le=25,zI=1,Tr=6,En=7,Vc=8,Uc=9,tt=10,jc=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(jc||{});function Zt(t){return Array.isArray(t)&&typeof t[zI]=="object"}function tn(t){return Array.isArray(t)&&t[zI]===!0}function GI(t){return(t.flags&4)!==0}function lu(t){return t.componentOffset>-1}function WI(t){return(t.flags&1)===1}function cs(t){return!!t.template}function Bc(t){return(t[G]&512)!==0}function dN(t){return(t[G]&256)===256}var $h=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function KI(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Nf=(()=>{let t=()=>QI;return t.ngInherit=!0,t})();function QI(t){return t.type.prototype.ngOnChanges&&(t.setInput=fN),hN}function hN(){let t=JI(this),e=t?.current;if(e){let n=t.previous;if(n===Yo)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function fN(t,e,n,r,i){let o=this.declaredInputs[r],s=JI(t)||pN(t,{previous:Yo,current:null}),c=s.current||(s.current={}),u=s.previous,l=u[o];c[o]=new $h(l&&l.currentValue,n,u===Yo),KI(t,e,i,n)}var YI="__ngSimpleChanges__";function JI(t){return t[YI]||null}function pN(t,e){return t[YI]=e}var B_=null;var Gn=function(t,e,n){B_?.(t,e,n)},gN="svg",mN="math";function Xt(t){for(;Array.isArray(t);)t=t[wt];return t}function yN(t,e){return Xt(e[t])}function nn(t,e){return Xt(e[t.index])}function du(t,e){return t.data[e]}function vN(t,e){return t[e]}function us(t,e){let n=e[t];return Zt(n)?n:n[wt]}function Mf(t){return(t[G]&128)===128}function EN(t){return tn(t[We])}function Xo(t,e){return e==null?null:t[e]}function ZI(t){t[_i]=0}function Pf(t){t[G]&1024||(t[G]|=1024,Mf(t)&&fu(t))}function hu(t){return!!(t[G]&9216||t[_t]?.dirty)}function Hh(t){t[Yn].changeDetectionScheduler?.notify(9),t[G]&64&&(t[G]|=1024),hu(t)&&fu(t)}function fu(t){t[Yn].changeDetectionScheduler?.notify(0);let e=Dr(t);for(;e!==null&&!(e[G]&8192||(e[G]|=8192,!Mf(e)));)e=Dr(e)}function XI(t,e){if((t[G]&256)===256)throw new U(911,!1);t[Wn]===null&&(t[Wn]=[]),t[Wn].push(e)}function _N(t,e){if(t[Wn]===null)return;let n=t[Wn].indexOf(e);n!==-1&&t[Wn].splice(n,1)}function Dr(t){let e=t[We];return tn(e)?e[We]:e}var pe={lFrame:cw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var qh=!1;function IN(){return pe.lFrame.elementDepthCount}function wN(){pe.lFrame.elementDepthCount++}function TN(){pe.lFrame.elementDepthCount--}function ew(){return pe.bindingsEnabled}function ls(){return pe.skipHydrationRootTNode!==null}function DN(t){return pe.skipHydrationRootTNode===t}function bN(t){pe.skipHydrationRootTNode=t}function CN(){pe.skipHydrationRootTNode=null}function je(){return pe.lFrame.lView}function xi(){return pe.lFrame.tView}function In(){let t=tw();for(;t!==null&&t.type===64;)t=t.parent;return t}function tw(){return pe.lFrame.currentTNode}function SN(){let t=pe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ds(t,e){let n=pe.lFrame;n.currentTNode=t,n.isParent=e}function nw(){return pe.lFrame.isParent}function AN(){pe.lFrame.isParent=!1}function rw(){return qh}function $_(t){let e=qh;return qh=t,e}function RN(){let t=pe.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function NN(t){return pe.lFrame.bindingIndex=t}function iw(){return pe.lFrame.bindingIndex++}function MN(){return pe.lFrame.inI18n}function PN(t,e){let n=pe.lFrame;n.bindingIndex=n.bindingRootIndex=t,zh(e)}function xN(){return pe.lFrame.currentDirectiveIndex}function zh(t){pe.lFrame.currentDirectiveIndex=t}function ow(t){pe.lFrame.currentQueryIndex=t}function ON(t){let e=t[q];return e.type===2?e.declTNode:e.type===1?t[qt]:null}function sw(t,e,n){if(n&te.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&te.Host);)if(i=ON(o),i===null||(o=o[as],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=pe.lFrame=aw();return r.currentTNode=e,r.lView=t,!0}function xf(t){let e=aw(),n=t[q];pe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function aw(){let t=pe.lFrame,e=t===null?null:t.child;return e===null?cw(t):e}function cw(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function uw(){let t=pe.lFrame;return pe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var lw=uw;function Of(){let t=uw();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function pu(){return pe.lFrame.selectedIndex}function br(t){pe.lFrame.selectedIndex=t}function dw(){return pe.lFrame.currentNamespace}var hw=!0;function kf(){return hw}function er(t){hw=t}function kN(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=QI(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Lf(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=o;s&&(t.contentHooks??=[]).push(-n,s),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function Sc(t,e,n){fw(t,e,3,n)}function Ac(t,e,n,r){(t[G]&3)===n&&fw(t,e,n,r)}function Ch(t,e){let n=t[G];(n&3)===e&&(n&=16383,n+=1,t[G]=n)}function fw(t,e,n,r){let i=r!==void 0?t[_i]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[_i]+=65536),(c<o||o==-1)&&(LN(t,n,e,u),t[_i]=(t[_i]&4294901760)+u+2),u++}function H_(t,e){Gn(4,t,e);let n=de(null);try{e.call(t)}finally{de(n),Gn(5,t,e)}}function LN(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],c=t[s];i?t[G]>>14<t[_i]>>16&&(t[G]&3)===e&&(t[G]+=16384,H_(c,o)):H_(c,o)}var bi=-1,es=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r){this.factory=e,this.canSeeViewProviders=n,this.injectImpl=r}};function FN(t){return t instanceof es}function VN(t){return(t.flags&8)!==0}function UN(t){return(t.flags&16)!==0}function Gh(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],c=n[r++];t.setAttribute(e,s,c,o)}else{let o=i,s=n[++r];BN(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function jN(t){return t===3||t===4||t===6}function BN(t){return t.charCodeAt(0)===64}function Ff(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?q_(t,n,i,null,e[++r]):q_(t,n,i,null,null))}}return t}function q_(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let c=t[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<t.length;){let c=t[o];if(typeof c=="number")break;if(c===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var Sh={},Ci=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=au(r);let i=this.injector.get(e,Sh,r);return i!==Sh||n===Sh?i:this.parentInjector.get(e,n,r)}};function pw(t){return t!==bi}function $c(t){return t&32767}function $N(t){return t>>16}function Hc(t,e){let n=$N(t),r=e;for(;n>0;)r=r[as],n--;return r}var Wh=!0;function qc(t){let e=Wh;return Wh=t,e}var HN=256,gw=HN-1,mw=5,qN=0,Jt={};function zN(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ko)&&(r=n[Ko]),r==null&&(r=n[Ko]=qN++);let i=r&gw,o=1<<i;e.data[t+(i>>mw)]|=o}function yw(t,e){let n=vw(t,e);if(n!==-1)return n;let r=e[q];r.firstCreatePass&&(t.injectorIndex=e.length,Ah(r.data,t),Ah(e,null),Ah(r.blueprint,null));let i=Vf(t,e),o=t.injectorIndex;if(pw(i)){let s=$c(i),c=Hc(i,e),u=c[q].data;for(let l=0;l<8;l++)e[o+l]=c[s+l]|u[s+l]}return e[o+8]=i,o}function Ah(t,e){t.push(0,0,0,0,0,0,0,0,e)}function vw(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Vf(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Tw(i),r===null)return bi;if(n++,i=i[as],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return bi}function GN(t,e,n){zN(t,e,n)}function Ew(t,e,n){if(n&te.Optional||t!==void 0)return t;Tf(e,"NodeInjector")}function _w(t,e,n,r){if(n&te.Optional&&r===void 0&&(r=null),!(n&(te.Self|te.Host))){let i=t[vn],o=ct(void 0);try{return i?i.get(e,r,n&te.Optional):kI(e,r,n&te.Optional)}finally{ct(o)}}return Ew(r,e,n)}function Iw(t,e,n,r=te.Default,i){if(t!==null){if(e[G]&2048&&!(r&te.Self)){let s=JN(t,e,n,r,Jt);if(s!==Jt)return s}let o=ww(t,e,n,r,Jt);if(o!==Jt)return o}return _w(e,n,r,i)}function ww(t,e,n,r,i){let o=QN(n);if(typeof o=="function"){if(!sw(e,t,r))return r&te.Host?Ew(i,n,r):_w(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&te.Optional))Tf(n);else return s}finally{lw()}}else if(typeof o=="number"){let s=null,c=vw(t,e),u=bi,l=r&te.Host?e[Tt][qt]:null;for((c===-1||r&te.SkipSelf)&&(u=c===-1?Vf(t,e):e[c+8],u===bi||!G_(r,!1)?c=-1:(s=e[q],c=$c(u),e=Hc(u,e)));c!==-1;){let f=e[q];if(z_(o,c,f.data)){let p=WN(c,e,n,s,r,l);if(p!==Jt)return p}u=e[c+8],u!==bi&&G_(r,e[q].data[c+8]===l)&&z_(o,c,e)?(s=f,c=$c(u),e=Hc(u,e)):c=-1}}return i}function WN(t,e,n,r,i,o){let s=e[q],c=s.data[t+8],u=r==null?lu(c)&&Wh:r!=s&&(c.type&3)!==0,l=i&te.Host&&o===c,f=KN(c,s,n,u,l);return f!==null?ts(e,s,f,c):Jt}function KN(t,e,n,r,i){let o=t.providerIndexes,s=e.data,c=o&1048575,u=t.directiveStart,l=t.directiveEnd,f=o>>20,p=r?c:c+f,y=i?c+f:l;for(let v=p;v<y;v++){let S=s[v];if(v<u&&n===S||v>=u&&S.type===n)return v}if(i){let v=s[u];if(v&&cs(v)&&v.type===n)return u}return null}function ts(t,e,n,r){let i=t[n],o=e.data;if(FN(i)){let s=i;s.resolving&&BR(jR(o[n]));let c=qc(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?ct(s.injectImpl):null,f=sw(t,r,te.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&kN(n,o[n],e)}finally{l!==null&&ct(l),qc(c),s.resolving=!1,lw()}}return i}function QN(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ko)?t[Ko]:void 0;return typeof e=="number"?e>=0?e&gw:YN:e}function z_(t,e,n){let r=1<<t;return!!(n[e+(t>>mw)]&r)}function G_(t,e){return!(t&te.Self)&&!(t&te.Host&&e)}var Ir=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Iw(this._tNode,this._lView,e,au(r),n)}};function YN(){return new Ir(In(),je())}function Uf(t){return ss(()=>{let e=t.prototype.constructor,n=e[xc]||Kh(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[xc]||Kh(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Kh(t){return AI(t)?()=>{let e=Kh(xt(t));return e&&e()}:wr(t)}function JN(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[G]&2048&&!(s[G]&512);){let c=ww(o,s,n,r|te.Self,Jt);if(c!==Jt)return c;let u=o.parent;if(!u){let l=s[qI];if(l){let f=l.get(n,Jt,r);if(f!==Jt)return f}u=Tw(s),s=s[as]}o=u}return i}function Tw(t){let e=t[q],n=e.type;return n===2?e.declTNode:n===1?t[qt]:null}function W_(t,e=null,n=null,r){let i=Dw(t,e,n,r);return i.resolveInjectorInitializers(),i}function Dw(t,e=null,n=null,r,i=new Set){let o=[n||Yt,ZR(t)];return r=r||(typeof t=="object"?void 0:Et(t)),new Jo(o,e||Rf(),r||null,i)}var Be=class t{static THROW_IF_NOT_FOUND=Qo;static NULL=new Lc;static create(e,n){if(Array.isArray(e))return W_({name:""},n,e,"");{let r=e.name??"";return W_({name:r},e.parent,e.providers,r)}}static \u0275prov=$({token:t,providedIn:"any",factory:()=>ne(FI)});static __NG_ELEMENT_ID__=-1};var ZN=new V("");ZN.__NG_ELEMENT_ID__=t=>{let e=In();if(e===null)throw new U(204,!1);if(e.type&2)return e.value;if(t&te.Optional)return null;throw new U(204,!1)};var bw=!1,jf=(()=>{class t{static __NG_ELEMENT_ID__=XN;static __NG_ENV_ID__=n=>n}return t})(),Qh=class extends jf{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return XI(this._lView,e),()=>_N(this._lView,e)}};function XN(){return new Qh(je())}var Cr=class{},gu=new V("",{providedIn:"root",factory:()=>!1});var Cw=new V(""),Sw=new V(""),rn=(()=>{class t{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Ge(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}return t})(),Aw=(()=>{class t{internalPendingTasks=R(rn);scheduler=R(Cr);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(12),this.internalPendingTasks.remove(n))}}run(n){return b(this,null,function*(){let r=this.add();try{return yield n()}finally{r()}})}static \u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}return t})(),Yh=class extends et{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,HI()&&(this.destroyRef=R(jf,{optional:!0})??void 0,this.pendingTasks=R(rn,{optional:!0})??void 0)}emit(e){let n=de(null);try{super.next(e)}finally{de(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof Se&&e.add(c),c}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},vt=Yh;function zc(...t){}function Rw(t){let e,n;function r(){t=zc;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function K_(t){return queueMicrotask(()=>t()),()=>{t=zc}}var Bf="isAngularZone",Gc=Bf+"_ID",eM=0,ye=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new vt(!1);onMicrotaskEmpty=new vt(!1);onStable=new vt(!1);onError=new vt(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=bw}=e;if(typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,rM(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Bf)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new U(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,tM,zc,zc);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},tM={};function $f(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function nM(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Rw(()=>{t.callbackScheduled=!1,Jh(t),t.isCheckStableRunning=!0,$f(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Jh(t)}function rM(t){let e=()=>{nM(t)},n=eM++;t._inner=t._inner.fork({name:"angular",properties:{[Bf]:!0,[Gc]:n,[Gc+n]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(iM(u))return r.invokeTask(o,s,c,u);try{return Q_(t),r.invokeTask(o,s,c,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Y_(t)}},onInvoke:(r,i,o,s,c,u,l)=>{try{return Q_(t),r.invoke(o,s,c,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!oM(u)&&e(),Y_(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Jh(t),$f(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Jh(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Q_(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Y_(t){t._nesting--,$f(t)}var Zh=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new vt;onMicrotaskEmpty=new vt;onStable=new vt;onError=new vt;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function iM(t){return Nw(t,"__ignore_ng_zone__")}function oM(t){return Nw(t,"__scheduler_tick__")}function Nw(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var _n=class{_console=console;handleError(e){this._console.error("ERROR",e)}},sM=new V("",{providedIn:"root",factory:()=>{let t=R(ye),e=R(_n);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function J_(t,e){return CI(t,e)}function aM(t){return CI(bI,t)}var Mw=(J_.required=aM,J_);function cM(){return Hf(In(),je())}function Hf(t,e){return new mu(nn(t,e))}var mu=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=cM}return t})();var uM="ngSkipHydration",lM="ngskiphydration";function Pw(t){let e=t.mergedAttrs;if(e===null)return!1;for(let n=0;n<e.length;n+=2){let r=e[n];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===lM)return!0}return!1}function xw(t){return t.hasAttribute(uM)}function Wc(t){return(t.flags&128)===128}function dM(t){if(Wc(t))return!0;let e=t.parent;for(;e;){if(Wc(t)||Pw(e))return!0;e=e.parent}return!1}var Ow=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Ow||{}),kw=new Map,hM=0;function fM(){return hM++}function pM(t){kw.set(t[uu],t)}function Xh(t){kw.delete(t[uu])}var Z_="__ngContext__";function Sr(t,e){Zt(e)?(t[Z_]=e[uu],pM(e)):t[Z_]=e}function Lw(t){return Vw(t[Zo])}function Fw(t){return Vw(t[$t])}function Vw(t){for(;t!==null&&!tn(t);)t=t[$t];return t}var ef;function Uw(t){ef=t}function yu(){if(ef!==void 0)return ef;if(typeof document<"u")return document;throw new U(210,!1)}var Oi=new V("",{providedIn:"root",factory:()=>gM}),gM="ng",qf=new V(""),zt=new V("",{providedIn:"platform",factory:()=>"unknown"});var zf=new V("",{providedIn:"root",factory:()=>yu().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function mM(){let t=new Ar;return R(zt)==="browser"&&(t.store=yM(yu(),R(Oi))),t}var Ar=(()=>{class t{static \u0275prov=$({token:t,providedIn:"root",factory:mM});store={};onSerializeCallbacks={};get(n,r){return this.store[n]!==void 0?this.store[n]:r}set(n,r){this.store[n]=r}remove(n){delete this.store[n]}hasKey(n){return this.store.hasOwnProperty(n)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(n,r){this.onSerializeCallbacks[n]=r}toJson(){for(let n in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(n))try{this.store[n]=this.onSerializeCallbacks[n]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return t})();function yM(t,e){let n=t.getElementById(e+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var jw="h",Bw="b",tf=function(t){return t.FirstChild="f",t.NextSibling="n",t}(tf||{}),vM="e",EM="t",Gf="c",$w="x",Kc="r",_M="i",IM="n",Hw="d";var wM="di",TM="s",DM="p";var Dc=new V(""),qw=!1,zw=new V("",{providedIn:"root",factory:()=>qw});var Gw=new V(""),bM=!1,CM=new V(""),X_=new V("",{providedIn:"root",factory:()=>new Map}),Wf=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(Wf||{}),vu=new V(""),eI=new Set;function wn(t){eI.has(t)||(eI.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Ii=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Ii||{}),Ww=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}return t})(),SM=[Ii.EarlyRead,Ii.Write,Ii.MixedReadWrite,Ii.Read],AM=(()=>{class t{ngZone=R(ye);scheduler=R(Cr);errorHandler=R(_n,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){R(vu,{optional:!0})}execute(){this.executing=!0;for(let n of SM)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[n]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>r.hooks[n](r.pipelinedValue),r.snapshot))}catch(i){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let n of this.sequences)n.afterRun(),n.once&&(this.sequences.delete(n),n.destroy());for(let n of this.deferredRegistrations)this.sequences.add(n);this.deferredRegistrations.size>0&&this.scheduler.notify(8),this.deferredRegistrations.clear()}register(n){this.executing?this.deferredRegistrations.add(n):(this.sequences.add(n),this.scheduler.notify(7))}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Wf.AFTER_NEXT_RENDER,n):n()}static \u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}return t})(),nf=class{impl;hooks;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o=null){this.impl=e,this.hooks=n,this.once=r,this.snapshot=o,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function Kf(t,e){!e?.injector&&uN(Kf);let n=e?.injector??R(Be);return wn("NgAfterNextRender"),NM(t,n,e,!0)}function RM(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function NM(t,e,n,r){let i=e.get(Ww);i.impl??=e.get(AM);let o=e.get(vu,null,{optional:!0}),s=n?.phase??Ii.MixedReadWrite,c=n?.manualCleanup!==!0?e.get(jf):null,u=new nf(i.impl,RM(t,s),r,c,o?.snapshot(null));return i.impl.register(u),u}var yt=function(t){return t[t.NOT_STARTED=0]="NOT_STARTED",t[t.IN_PROGRESS=1]="IN_PROGRESS",t[t.COMPLETE=2]="COMPLETE",t[t.FAILED=3]="FAILED",t}(yt||{}),tI=0,MM=1,Ue=function(t){return t[t.Placeholder=0]="Placeholder",t[t.Loading=1]="Loading",t[t.Complete=2]="Complete",t[t.Error=3]="Error",t}(Ue||{});var PM=0,Qf=1;var xM=4,OM=5;var kM=7,Si=8,LM=9,Kw=function(t){return t[t.Manual=0]="Manual",t[t.Playthrough=1]="Playthrough",t}(Kw||{});function Rc(t,e){let n=VM(t),r=e[n];if(r!==null){for(let i of r)i();e[n]=null}}function FM(t){Rc(1,t),Rc(0,t),Rc(2,t)}function VM(t){let e=xM;return t===1?e=OM:t===2&&(e=LM),e}function Qw(t){return t+1}function Eu(t,e){let n=t[q],r=Qw(e.index);return t[r]}function _u(t,e){let n=Qw(e.index);return t.data[n]}function UM(t,e,n){let r=e[q],i=_u(r,n);switch(t){case Ue.Complete:return i.primaryTmplIndex;case Ue.Loading:return i.loadingTmplIndex;case Ue.Error:return i.errorTmplIndex;case Ue.Placeholder:return i.placeholderTmplIndex;default:return null}}function nI(t,e){return e===Ue.Placeholder?t.placeholderBlockConfig?.[tI]??null:e===Ue.Loading?t.loadingBlockConfig?.[tI]??null:null}function jM(t){return t.loadingBlockConfig?.[MM]??null}function rI(t,e){if(!t||t.length===0)return e;let n=new Set(t);for(let r of e)n.add(r);return t.length===n.size?t:Array.from(n)}function BM(t,e){let n=e.primaryTmplIndex+Le;return du(t,n)}var Iu="ngb";var $M=(t,e,n)=>{let r=t,i=r.__jsaction_fns??new Map,o=i.get(e)??[];o.push(n),i.set(e,o),r.__jsaction_fns=i},HM=(t,e)=>{let n=t.getAttribute(Iu)??"",r=t,i=e.get(n)??new Set;i.has(r)||i.add(r),e.set(n,i)};var qM=t=>{t.removeAttribute(Eh.JSACTION),t.removeAttribute(Iu),t.__jsaction_fns=void 0},zM=new V("",{providedIn:"root",factory:()=>({})});function Yw(t,e){let n=e?.__jsaction_fns?.get(t.type);if(n)for(let r of n)r(t)}var Jw=new V("");var GM="__nghData__",Zw=GM,WM="__nghDeferData__",KM=WM,Rh="ngh",QM="nghm",Xw=()=>null;function YM(t,e,n=!1){let r=t.getAttribute(Rh);if(r==null)return null;let[i,o]=r.split("|");if(r=n?o:i,!r)return null;let s=o?`|${o}`:"",c=n?i:s,u={};if(r!==""){let f=e.get(Ar,null,{optional:!0});f!==null&&(u=f.get(Zw,[])[Number(r)])}let l={data:u,firstChild:t.firstChild??null};return n&&(l.firstChild=t,wu(l,0,t.nextSibling)),c?t.setAttribute(Rh,c):t.removeAttribute(Rh),l}function JM(){Xw=YM}function Yf(t,e,n=!1){return Xw(t,e,n)}function ZM(t){let e=t._lView;return e[q].type===2?null:(Bc(e)&&(e=e[Le]),e)}function XM(t){return t.textContent?.replace(/\s/gm,"")}function eP(t){let e=yu(),n=e.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=XM(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=n.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function wu(t,e,n){t.segmentHeads??={},t.segmentHeads[e]=n}function rf(t,e){return t.segmentHeads?.[e]??null}function tP(t){return t.get(CM,!1,{optional:!0})}function nP(t,e){let n=t.data,r=n[vM]?.[e]??null;return r===null&&n[Gf]?.[e]&&(r=Jf(t,e)),r}function eT(t,e){return t.data[Gf]?.[e]??null}function Jf(t,e){let n=eT(t,e)??[],r=0;for(let i of n)r+=i[Kc]*(i[$w]??1);return r}function rP(t){if(typeof t.disconnectedNodes>"u"){let e=t.data[Hw];t.disconnectedNodes=e?new Set(e):null}return t.disconnectedNodes}function hs(t,e){if(typeof t.disconnectedNodes>"u"){let n=t.data[Hw];t.disconnectedNodes=n?new Set(n):null}return!!rP(t)?.has(e)}function iP(t,e){let n=e.get(Jw),i=e.get(Ar).get(KM,{}),o=!1,s=t,c=null,u=[];for(;!o&&s;){o=n.has(s);let l=n.hydrating.get(s);if(c===null&&l!=null){c=l.promise;break}u.unshift(s),s=i[s][DM]}return{parentBlockPromise:c,hydrationQueue:u}}var en=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(en||{});var oP=/^>|^->|<!--|-->|--!>|<!-$/g,sP=/(<|>)/g,aP="\u200B$1\u200B";function cP(t){return t.replace(oP,e=>e.replace(sP,aP))}function uP(t){return t.ownerDocument.body}function tT(t){return t instanceof Function?t():t}var Jn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Jn||{}),Rr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Rr||{}),lP;function Zf(t,e){return lP(t,e)}function wi(t,e,n,r,i){if(r!=null){let o,s=!1;tn(r)?o=r:Zt(r)&&(s=!0,r=r[wt]);let c=Xt(r);t===0&&n!==null?i==null?sT(e,n,c):Qc(e,n,c,i||null,!0):t===1&&n!==null?Qc(e,n,c,i||null,!0):t===2?np(e,c,s):t===3&&e.destroyNode(c),o!=null&&bP(e,t,o,n,i)}}function nT(t,e){return t.createText(e)}function dP(t,e,n){t.setValue(e,n)}function rT(t,e){return t.createComment(cP(e))}function Xf(t,e,n){return t.createElement(e,n)}function hP(t,e){iT(t,e),e[wt]=null,e[qt]=null}function fP(t,e,n,r,i,o){r[wt]=i,r[qt]=e,Du(t,r,n,1,i,o)}function iT(t,e){e[Yn].changeDetectionScheduler?.notify(10),Du(t,e,e[Ke],2,null,null)}function pP(t){let e=t[Zo];if(!e)return Nh(t[q],t);for(;e;){let n=null;if(Zt(e))n=e[Zo];else{let r=e[tt];r&&(n=r)}if(!n){for(;e&&!e[$t]&&e!==t;)Zt(e)&&Nh(e[q],e),e=e[We];e===null&&(e=t),Zt(e)&&Nh(e[q],e),n=e&&e[$t]}e=n}}function gP(t,e,n,r){let i=tt+r,o=n.length;r>0&&(n[i-1][$t]=e),r<o-tt?(e[$t]=n[i],LI(n,tt+r,e)):(n.push(e),e[$t]=null),e[We]=n;let s=e[Ai];s!==null&&n!==s&&oT(s,e);let c=e[Ri];c!==null&&c.insertView(t),Hh(e),e[G]|=128}function oT(t,e){let n=t[Uc],r=e[We];if(Zt(r))t[G]|=jc.HasTransplantedViews;else{let i=r[We][Tt];e[Tt]!==i&&(t[G]|=jc.HasTransplantedViews)}n===null?t[Uc]=[e]:n.push(e)}function ep(t,e){let n=t[Uc],r=n.indexOf(e);n.splice(r,1)}function ns(t,e){if(t.length<=tt)return;let n=tt+e,r=t[n];if(r){let i=r[Ai];i!==null&&i!==t&&ep(i,r),e>0&&(t[n-1][$t]=r[$t]);let o=kc(t,tt+e);hP(r[q],r);let s=o[Ri];s!==null&&s.detachView(o[q]),r[We]=null,r[$t]=null,r[G]&=-129}return r}function Tu(t,e){if(!(e[G]&256)){let n=e[Ke];n.destroyNode&&Du(t,e,n,3,null,null),pP(e)}}function Nh(t,e){if(e[G]&256)return;let n=de(null);try{e[G]&=-129,e[G]|=256,e[_t]&&Jd(e[_t]),yP(t,e),mP(t,e),e[q].type===1&&e[Ke].destroy();let r=e[Ai];if(r!==null&&tn(e[We])){r!==e[We]&&ep(r,e);let i=e[Ri];i!==null&&i.detachView(t)}Xh(e)}finally{de(n)}}function mP(t,e){let n=t.cleanup,r=e[U_];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let c=n[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[n[s+1]];n[s].call(c)}r!==null&&(e[U_]=null);let i=e[Wn];if(i!==null){e[Wn]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[Fc];if(o!==null){e[Fc]=null;for(let s of o)s.destroy()}}function yP(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof es)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];Gn(4,c,u);try{u.call(c)}finally{Gn(5,c,u)}}else{Gn(4,i,o);try{o.call(i)}finally{Gn(5,i,o)}}}}}function vP(t,e,n){return EP(t,e.parent,n)}function EP(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[wt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===en.None||o===en.Emulated)return null}return nn(r,n)}}function Qc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function sT(t,e,n){t.appendChild(e,n)}function iI(t,e,n,r,i){r!==null?Qc(t,e,n,r,i):sT(t,e,n)}function aT(t,e){return t.parentNode(e)}function _P(t,e){return t.nextSibling(e)}function IP(t,e,n){return TP(t,e,n)}function wP(t,e,n){return t.type&40?nn(t,n):null}var TP=wP,oI;function tp(t,e,n,r){let i=vP(t,r,e),o=e[Ke],s=r.parent||e[qt],c=IP(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)iI(o,i,n[u],c,!1);else iI(o,i,n,c,!1);oI!==void 0&&oI(o,r,e,n,i)}function Wo(t,e){if(e!==null){let n=e.type;if(n&3)return nn(e,t);if(n&4)return of(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Wo(t,r);{let i=t[e.index];return tn(i)?of(-1,i):Xt(i)}}else{if(n&128)return Wo(t,e.next);if(n&32)return Zf(e,t)()||Xt(t[e.index]);{let r=cT(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Dr(t[Tt]);return Wo(i,r)}else return Wo(t,e.next)}}}return null}function cT(t,e){if(e!==null){let r=t[Tt][qt],i=e.projection;return r.projection[i]}return null}function of(t,e){let n=tt+t+1;if(n<e.length){let r=e[n],i=r[q].firstChild;if(i!==null)return Wo(r,i)}return e[En]}function np(t,e,n){t.removeChild(null,e,n)}function uT(t){t.textContent=""}function rp(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let c=r[n.index],u=n.type;if(s&&e===0&&(c&&Sr(Xt(c),r),n.flags|=2),(n.flags&32)!==32)if(u&8)rp(t,e,n.child,r,i,o,!1),wi(e,t,i,c,o);else if(u&32){let l=Zf(n,r),f;for(;f=l();)wi(e,t,i,f,o);wi(e,t,i,c,o)}else u&16?DP(t,e,r,n,i,o):wi(e,t,i,c,o);n=s?n.projectionNext:n.next}}function Du(t,e,n,r,i,o){rp(n,r,t.firstChild,e,i,o,!1)}function DP(t,e,n,r,i,o){let s=n[Tt],u=s[qt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let f=u[l];wi(e,t,i,f,o)}else{let l=u,f=s[We];Wc(r)&&(l.flags|=128),rp(t,e,l,f,i,o,!0)}}function bP(t,e,n,r,i){let o=n[En],s=Xt(n);o!==s&&wi(e,t,r,o,i);for(let c=tt;c<n.length;c++){let u=n[c];Du(u[q],u,t,e,r,o)}}function CP(t,e,n){t.setAttribute(e,"style",n)}function lT(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function dT(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Gh(t,e,r),i!==null&&lT(t,e,i),o!==null&&CP(t,e,o)}function SP(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var hT="ng-template";function AP(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&SP(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(ip(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function ip(t){return t.type===4&&t.value!==hT}function RP(t,e,n){let r=t.type===4&&!n?hT:t.value;return e===r}function NP(t,e,n){let r=4,i=t.attrs,o=i!==null?xP(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!Bt(r)&&!Bt(u))return!1;if(s&&Bt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!RP(t,u,n)||u===""&&e.length===1){if(Bt(r))return!1;s=!0}}else if(r&8){if(i===null||!AP(t,i,u,n)){if(Bt(r))return!1;s=!0}}else{let l=e[++c],f=MP(u,i,ip(t),n);if(f===-1){if(Bt(r))return!1;s=!0;continue}if(l!==""){let p;if(f>o?p="":p=i[f+1].toLowerCase(),r&2&&l!==p){if(Bt(r))return!1;s=!0}}}}return Bt(r)||s}function Bt(t){return(t&1)===0}function MP(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return OP(e,t)}function PP(t,e,n=!1){for(let r=0;r<e.length;r++)if(NP(t,e[r],n))return!0;return!1}function xP(t){for(let e=0;e<t.length;e++){let n=t[e];if(jN(n))return e}return t.length}function OP(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function sI(t,e){return t?":not("+e.trim()+")":e}function kP(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let c=t[++n];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Bt(s)&&(e+=sI(o,i),i=""),r=s,o=o||!Bt(r);n++}return i!==""&&(e+=sI(o,i)),e}function LP(t){return t.map(kP).join(",")}function FP(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Bt(i))break;i=o}r++}return{attrs:e,classes:n}}var fs={};function op(t=1){fT(xi(),je(),pu()+t,!1)}function fT(t,e,n,r){if(!r)if((e[G]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Sc(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Ac(e,o,0,n)}br(n)}function ps(t,e=te.Default){let n=je();if(n===null)return ne(t,e);let r=In();return Iw(r,n,xt(t),e)}function pT(t,e,n,r,i,o){let s=de(null);try{let c=null;i&Jn.SignalBased&&(c=e[r][ii]),c!==null&&c.transformFn!==void 0&&(o=c.transformFn(o)),i&Jn.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,c,o,n,r):KI(e,c,r,o)}finally{de(s)}}function VP(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)br(~i);else{let o=i,s=n[++r],c=n[++r];PN(s,o);let u=e[o];c(2,u)}}}finally{br(-1)}}function bu(t,e,n,r,i,o,s,c,u,l,f){let p=e.blueprint.slice();return p[wt]=i,p[G]=r|4|128|8|64|1024,(l!==null||t&&t[G]&2048)&&(p[G]|=2048),ZI(p),p[We]=p[as]=t,p[Ot]=n,p[Yn]=s||t&&t[Yn],p[Ke]=c||t&&t[Ke],p[vn]=u||t&&t[vn]||null,p[qt]=o,p[uu]=fM(),p[Ht]=f,p[qI]=l,p[Tt]=e.type==2?t[Tt]:p,p}function Cu(t,e,n,r,i){let o=t.data[e];if(o===null)o=UP(t,e,n,r,i),MN()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=SN();o.injectorIndex=s===null?-1:s.injectorIndex}return ds(o,!0),o}function UP(t,e,n,r,i){let o=tw(),s=nw(),c=s?o:o&&o.parent,u=t.data[e]=zP(t,c,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function gT(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function mT(t,e,n,r,i){let o=pu(),s=r&2;try{br(-1),s&&e.length>Le&&fT(t,e,Le,!1),Gn(s?2:0,i),n(r,i)}finally{br(o),Gn(s?3:1,i)}}function yT(t,e,n){if(GI(e)){let r=de(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=t.data[s];if(c.contentQueries){let u=n[s];c.contentQueries(1,u,s)}}}finally{de(r)}}}function vT(t,e,n){ew()&&(QP(t,e,n,nn(n,e)),(n.flags&64)===64&&DT(t,e,n))}function ET(t,e,n=nn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?n(e,t):t[s];t[i++]=c}}}function _T(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=sp(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function sp(t,e,n,r,i,o,s,c,u,l,f){let p=Le+r,y=p+i,v=jP(p,y),S=typeof l=="function"?l():l;return v[q]={type:t,blueprint:v,template:n,queries:null,viewQuery:c,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:f}}function jP(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:fs);return n}function BP(t,e,n,r){let o=r.get(zw,qw)||n===en.ShadowDom,s=t.selectRootElement(e,o);return $P(s),s}function $P(t){IT(t)}var IT=()=>null;function HP(t){xw(t)?uT(t):eP(t)}function qP(){IT=HP}function zP(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,c=0;return ls()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function aI(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let c,u=Jn.None;Array.isArray(s)?(c=s[0],u=s[1]):c=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?cI(r,n,l,c,u):cI(r,n,l,c)}return r}function cI(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function GP(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,c=[],u=null,l=null;for(let f=r;f<i;f++){let p=o[f],y=n?n.get(p):null,v=y?y.inputs:null,S=y?y.outputs:null;u=aI(0,p.inputs,f,u,v),l=aI(1,p.outputs,f,l,S);let N=u!==null&&s!==null&&!ip(e)?ix(u,f,s):null;c.push(N)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=c,e.inputs=u,e.outputs=l}function wT(t,e,n,r){if(ew()){let i=r===null?null:{"":-1},o=JP(t,n),s,c;o===null?s=c=null:[s,c]=o,s!==null&&TT(t,e,n,s,i,c),i&&ZP(n,r,i)}n.mergedAttrs=Ff(n.mergedAttrs,n.attrs)}function TT(t,e,n,r,i,o){for(let l=0;l<r.length;l++)GN(yw(n,e),t,r[l].type);ex(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let f=r[l];f.providersResolver&&f.providersResolver(f)}let s=!1,c=!1,u=gT(t,e,r.length,null);for(let l=0;l<r.length;l++){let f=r[l];n.mergedAttrs=Ff(n.mergedAttrs,f.hostAttrs),tx(t,n,e,u,f),XP(u,f,i),f.contentQueries!==null&&(n.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(n.flags|=64);let p=f.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!c&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),c=!0),u++}GP(t,n,o)}function WP(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let c=~e.index;KP(s)!=c&&s.push(c),s.push(n,r,o)}}function KP(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function QP(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;lu(n)&&nx(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||yw(n,e),Sr(r,e);let s=n.initialInputs;for(let c=i;c<o;c++){let u=t.data[c],l=ts(e,t,c,n);if(Sr(l,e),s!==null&&rx(e,c-i,l,u,n,s),cs(u)){let f=us(n.index,e);f[Ot]=ts(e,t,c,n)}}}function DT(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=xN();try{br(o);for(let c=r;c<i;c++){let u=t.data[c],l=e[c];zh(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&YP(u,l)}}finally{br(-1),zh(s)}}function YP(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function JP(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(PP(e,s.selectors,!1))if(r||(r=[]),cs(s))if(s.findHostDirectiveDefs!==null){let c=[];i=i||new Map,s.findHostDirectiveDefs(s,c,i),r.unshift(...c,s);let u=c.length;sf(t,e,u)}else r.unshift(s),sf(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function sf(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function ZP(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new U(-301,!1);r.push(e[i],o)}}}function XP(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;cs(e)&&(n[""]=t)}}function ex(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function tx(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=wr(i.type,!0)),s=new es(o,cs(i),ps);t.blueprint[r]=s,n[r]=s,WP(t,e,r,gT(t,n,i.hostVars,fs),i)}function bT(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function nx(t,e,n){let r=nn(e,t),i=_T(n),o=t[Yn].rendererFactory,s=Su(t,bu(t,i,null,bT(n),r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=s}function rx(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;){let u=s[c++],l=s[c++],f=s[c++],p=s[c++];pT(r,n,u,l,f,p)}}function ix(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let c=0;c<s.length;c+=3)if(s[c]===e){r.push(o,s[c+1],s[c+2],n[i+1]);break}}i+=2}return r}function CT(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function ST(t,e){let n=t.contentQueries;if(n!==null){let r=de(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let c=t.data[s];ow(o),c.contentQueries(2,e[s],s)}}}finally{de(r)}}}function Su(t,e){return t[Zo]?t[j_][$t]=e:t[Zo]=e,t[j_]=e,e}function af(t,e,n){ow(0);let r=de(null);try{e(t,n)}finally{de(r)}}function ap(t,e){let n=t[vn],r=n?n.get(_n,null):null;r&&r.handleError(e)}function AT(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],c=n[o++],u=n[o++],l=e[s],f=t.data[s];pT(f,l,r,c,u,i)}}function ox(t,e,n){let r=yN(e,t);dP(t[Ke],r,n)}function sx(t,e){let n=us(e,t),r=n[q];ax(r,n);let i=n[wt];i!==null&&n[Ht]===null&&(n[Ht]=Yf(i,n[vn])),cp(r,n,n[Ot])}function ax(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function cp(t,e,n){xf(e);try{let r=t.viewQuery;r!==null&&af(1,r,n);let i=t.template;i!==null&&mT(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ri]?.finishViewCreation(t),t.staticContentQueries&&ST(t,e),t.staticViewQueries&&af(2,t.viewQuery,n);let o=t.components;o!==null&&cx(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[G]&=-5,Of()}}function cx(t,e){for(let n=0;n<e.length;n++)sx(t,e[n])}function up(t,e,n,r){let i=de(null);try{let o=e.tView,c=t[G]&4096?4096:16,u=bu(t,o,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Ai]=l;let f=t[Ri];return f!==null&&(u[Ri]=f.createEmbeddedView(o)),cp(o,u,n),u}finally{de(i)}}function ux(t,e){let n=tt+e;if(n<t.length)return t[n]}function rs(t,e){return!e||e.firstChild===null||Wc(t)}function Au(t,e,n,r=!0){let i=e[q];if(gP(i,e,t,n),r){let s=of(n,t),c=e[Ke],u=aT(c,t[En]);u!==null&&fP(i,t[qt],c,e,u,s)}let o=e[Ht];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function RT(t,e){let n=ns(t,e);return n!==void 0&&Tu(n[q],n),n}function Yc(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Xt(o)),tn(o)&&lx(o,r);let s=n.type;if(s&8)Yc(t,e,n.child,r);else if(s&32){let c=Zf(n,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=cT(e,n);if(Array.isArray(c))r.push(...c);else{let u=Dr(e[Tt]);Yc(u[q],u,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function lx(t,e){for(let n=tt;n<t.length;n++){let r=t[n],i=r[q].firstChild;i!==null&&Yc(r[q],r,i,e)}t[En]!==t[wt]&&e.push(t[En])}var NT=[];function dx(t){return t[_t]??hx(t)}function hx(t){let e=NT.pop()??Object.create(px);return e.lView=t,e}function fx(t){t.lView[_t]!==t&&(t.lView=null,NT.push(t))}var px=Ee(F({},za),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{fu(t.lView)},consumerOnSignalRead(){this.lView[_t]=this}});function gx(t){let e=t[_t]??Object.create(mx);return e.lView=t,e}var mx=Ee(F({},za),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Dr(t.lView);for(;e&&!MT(e[q]);)e=Dr(e);e&&Pf(e)},consumerOnSignalRead(){this.lView[_t]=this}});function MT(t){return t.type!==2}function PT(t){if(t[Fc]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Fc])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[G]&8192)}}var yx=100;function xT(t,e=!0,n=0){let i=t[Yn].rendererFactory,o=!1;o||i.begin?.();try{vx(t,n)}catch(s){throw e&&ap(t,s),s}finally{o||i.end?.()}}function vx(t,e){let n=rw();try{$_(!0),cf(t,e);let r=0;for(;hu(t);){if(r===yx)throw new U(103,!1);r++,cf(t,1)}}finally{$_(n)}}function Ex(t,e,n,r){let i=e[G];if((i&256)===256)return;let o=!1,s=!1;xf(e);let c=!0,u=null,l=null;o||(MT(t)?(l=dx(e),u=Qd(l)):AE()===null?(c=!1,l=gx(e),u=Qd(l)):e[_t]&&(Jd(e[_t]),e[_t]=null));try{ZI(e),NN(t.bindingStartIndex),n!==null&&mT(t,e,n,2,r);let f=(i&3)===3;if(!o)if(f){let v=t.preOrderCheckHooks;v!==null&&Sc(e,v,null)}else{let v=t.preOrderHooks;v!==null&&Ac(e,v,0,null),Ch(e,0)}if(s||_x(e),PT(e),OT(e,0),t.contentQueries!==null&&ST(t,e),!o)if(f){let v=t.contentCheckHooks;v!==null&&Sc(e,v)}else{let v=t.contentHooks;v!==null&&Ac(e,v,1),Ch(e,1)}VP(t,e);let p=t.components;p!==null&&LT(e,p,0);let y=t.viewQuery;if(y!==null&&af(2,y,r),!o)if(f){let v=t.viewCheckHooks;v!==null&&Sc(e,v)}else{let v=t.viewHooks;v!==null&&Ac(e,v,2),Ch(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[bh]){for(let v of e[bh])v();e[bh]=null}o||(e[G]&=-73)}catch(f){throw o||fu(e),f}finally{l!==null&&(PE(l,u),c&&fx(l)),Of()}}function OT(t,e){for(let n=Lw(t);n!==null;n=Fw(n))for(let r=tt;r<n.length;r++){let i=n[r];kT(i,e)}}function _x(t){for(let e=Lw(t);e!==null;e=Fw(e)){if(!(e[G]&jc.HasTransplantedViews))continue;let n=e[Uc];for(let r=0;r<n.length;r++){let i=n[r];Pf(i)}}}function Ix(t,e,n){let r=us(e,t);kT(r,n)}function kT(t,e){Mf(t)&&cf(t,e)}function cf(t,e){let r=t[q],i=t[G],o=t[_t],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Yd(o)),s||=!1,o&&(o.dirty=!1),t[G]&=-9217,s)Ex(r,t,r.template,t[Ot]);else if(i&8192){PT(t),OT(t,1);let c=r.components;c!==null&&LT(t,c,1)}}function LT(t,e,n){for(let r=0;r<e.length;r++)Ix(t,e[r],n)}function lp(t,e){let n=rw()?64:1088;for(t[Yn].changeDetectionScheduler?.notify(e);t;){t[G]|=n;let r=Dr(t);if(Bc(t)&&!r)return t;t=r}return null}var Ni=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,n=e[q];return Yc(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r}get context(){return this._lView[Ot]}get dirty(){return!!(this._lView[G]&9280)||!!this._lView[_t]?.dirty}set context(e){this._lView[Ot]=e}get destroyed(){return(this._lView[G]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[We];if(tn(e)){let n=e[Vc],r=n?n.indexOf(this):-1;r>-1&&(ns(e,r),kc(n,r))}this._attachedToViewContainer=!1}Tu(this._lView[q],this._lView)}onDestroy(e){XI(this._lView,e)}markForCheck(){lp(this._cdRefInjectingView||this._lView,4)}markForRefresh(){Pf(this._cdRefInjectingView||this._lView)}detach(){this._lView[G]&=-129}reattach(){Hh(this._lView),this._lView[G]|=128}detectChanges(){this._lView[G]|=1024,xT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Bc(this._lView),n=this._lView[Ai];n!==null&&!e&&ep(n,this._lView),iT(this._lView[q],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=e;let n=Bc(this._lView),r=this._lView[Ai];r!==null&&!n&&oT(r,this._lView),Hh(this._lView)}};var wx=new RegExp(`^(\\d+)*(${Bw}|${jw})*(.*)`);function Tx(t){let e=t.match(wx),[n,r,i,o]=e,s=r?parseInt(r,10):i,c=[];for(let[u,l,f]of o.matchAll(/(f|n)(\d*)/g)){let p=parseInt(f,10)||1;c.push(l,p)}return[s,...c]}function Dx(t){return!t.prev&&t.parent?.type===8}function Mh(t){return t.index-Le}function bx(t,e){let n=t.i18nNodes;if(n)return n.get(e)}function Ru(t,e,n,r){let i=Mh(r),o=bx(t,i);if(o===void 0){let s=t.data[IM];if(s?.[i])o=Sx(s[i],n);else if(e.firstChild===r)o=t.firstChild;else{let c=r.prev===null,u=r.prev??r.parent;if(Dx(r)){let l=Mh(r.parent);o=rf(t,l)}else{let l=nn(u,n);if(c)o=l.firstChild;else{let f=Mh(u),p=rf(t,f);if(u.type===2&&p){let v=Jf(t,f)+1;o=Nu(v,p)}else o=l.nextSibling}}}}return o}function Nu(t,e){let n=e;for(let r=0;r<t;r++)n=n.nextSibling;return n}function Cx(t,e){let n=t;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case tf.FirstChild:n=n.firstChild;break;case tf.NextSibling:n=n.nextSibling;break}}return n}function Sx(t,e){let[n,...r]=Tx(t),i;if(n===jw)i=e[Tt][wt];else if(n===Bw)i=uP(e[Tt][wt]);else{let o=Number(n);i=Xt(e[o+Le])}return Cx(i,r)}var Ax=!1;function Rx(t){Ax=t}function Nx(t){let e=t[Ht];if(e){let{i18nNodes:n,dehydratedIcuData:r}=e;if(n&&r){let i=t[Ke];for(let o of r.values())Mx(i,n,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function Mx(t,e,n){for(let r of n.node.cases[n.case]){let i=e.get(r.index-Le);i&&np(t,i,!1)}}function FT(t){let e=t[Tr]??[],r=t[We][Ke],i=[];for(let o of e)o.data[wM]!==void 0?i.push(o):Px(o,r);t[Tr]=i}function Px(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[Kc];for(;n<i;){let o=r.nextSibling;np(e,r,!1),r=o,n++}}}function dp(t){FT(t);let e=t[wt];Zt(e)&&Jc(e);for(let n=tt;n<t.length;n++)Jc(t[n])}function Jc(t){Nx(t);let e=t[q];for(let n=Le;n<e.bindingStartIndex;n++)if(tn(t[n])){let r=t[n];dp(r)}else Zt(t[n])&&Jc(t[n])}function VT(t){let e=t._views;for(let n of e){let r=ZM(n);r!==null&&r[wt]!==null&&(Zt(r)?Jc(r):dp(r))}}function xx(t,e,n,r){t!==null&&(n.cleanup(e),dp(t.lContainer),VT(r))}function Ox(t,e){let n=[];for(let r of e)for(let i=0;i<(r[$w]??1);i++){let o={data:r,firstChild:null};r[Kc]>0&&(o.firstChild=t,t=Nu(r[Kc],t)),n.push(o)}return[t,n]}var UT=()=>null;function kx(t,e){let n=t[Tr];return!e||n===null||n.length===0?null:n[0].data[_M]===e?n.shift():(FT(t),null)}function Lx(){UT=kx}function Zc(t,e){return UT(t,e)}var uf=class{},Xc=class{},lf=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Et(e)}.`)}},Mi=class{static NULL=new lf},Pi=class{};var Fx=(()=>{class t{static \u0275prov=$({token:t,providedIn:"root",factory:()=>null})}return t})();function df(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=x_(i,c);else if(o==2){let u=c,l=e[++s];r=x_(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var eu=class extends Mi{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Qn(e);return new is(n,this.ngModule)}};function uI(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,c=o?i[1]:Jn.None;e?n.push({propName:s,templateName:r,isSignal:(c&Jn.SignalBased)!==0}):n.push({propName:s,templateName:r})}return n}function Vx(t){let e=t.toLowerCase();return e==="svg"?gN:e==="math"?mN:null}var is=class extends Xc{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;get inputs(){let e=this.componentDef,n=e.inputTransforms,r=uI(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return uI(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=LP(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=de(null);try{i=i||this.ngModule;let s=i instanceof It?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let c=s?new Ci(e,s):e,u=c.get(Pi,null);if(u===null)throw new U(407,!1);let l=c.get(Fx,null),f=c.get(Cr,null),p={rendererFactory:u,sanitizer:l,changeDetectionScheduler:f},y=u.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",S=r?BP(y,r,this.componentDef.encapsulation,c):Xf(y,v,Vx(v)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let M=null;S!==null&&(M=Yf(S,c,!0));let L=sp(0,null,null,1,0,null,null,null,null,null,null),H=bu(null,L,null,N,null,null,p,y,c,null,M);xf(H);let J,oe,be=null;try{let X=this.componentDef,w,m=null;X.findHostDirectiveDefs?(w=[],m=new Map,X.findHostDirectiveDefs(X,w,m),w.push(X)):w=[X];let E=Ux(H,S);be=jx(E,S,X,w,H,p,y),oe=du(L,Le),S&&Hx(y,X,S,r),n!==void 0&&qx(oe,this.ngContentSelectors,n),J=$x(be,X,w,m,H,[zx]),cp(L,H,null)}catch(X){throw be!==null&&Xh(be),Xh(H),X}finally{Of()}return new hf(this.componentType,J,Hf(oe,H),H,oe)}finally{de(o)}}},hf=class extends uf{location;_rootLView;_tNode;instance;hostView;changeDetectorRef;componentType;previousInputValues=null;constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=n,this.hostView=this.changeDetectorRef=new Ni(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;AT(o[q],o,i,e,n),this.previousInputValues.set(e,n);let s=us(this._tNode.index,o);lp(s,1)}}get injector(){return new Ir(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Ux(t,e){let n=t[q],r=Le;return t[r]=e,Cu(n,r,2,"#host",null)}function jx(t,e,n,r,i,o,s){let c=i[q];Bx(r,t,e,s);let u=null;e!==null&&(u=Yf(e,i[vn]));let l=o.rendererFactory.createRenderer(e,n),f=bu(i,_T(n),null,bT(n),i[t.index],t,o,l,null,null,u);return c.firstCreatePass&&sf(c,t,r.length-1),Su(i,f),i[t.index]=f}function Bx(t,e,n,r){for(let i of t)e.mergedAttrs=Ff(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(df(e,e.mergedAttrs,!0),n!==null&&dT(r,n,e))}function $x(t,e,n,r,i,o){let s=In(),c=i[q],u=nn(s,i);TT(c,i,s,n,null,r);for(let f=0;f<n.length;f++){let p=s.directiveStart+f,y=ts(i,c,p,s);Sr(y,i)}DT(c,i,s),u&&Sr(u,i);let l=ts(i,c,s.directiveStart+s.componentOffset,s);if(t[Ot]=i[Ot]=l,o!==null)for(let f of o)f(l,e);return yT(c,s,i),l}function Hx(t,e,n,r){if(r)Gh(t,n,["ng-version","19.0.5"]);else{let{attrs:i,classes:o}=FP(e.selectors[0]);i&&Gh(t,n,i),o&&o.length>0&&lT(t,n,o.join(" "))}}function qx(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}function zx(){let t=In();Lf(je()[q],t)}var Mu=(()=>{class t{static __NG_ELEMENT_ID__=Gx}return t})();function Gx(){let t=In();return Kx(t,je())}var Wx=Mu,jT=class extends Wx{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Hf(this._hostTNode,this._hostLView)}get injector(){return new Ir(this._hostTNode,this._hostLView)}get parentInjector(){let e=Vf(this._hostTNode,this._hostLView);if(pw(e)){let n=Hc(e,this._hostLView),r=$c(e),i=n[q].data[r+8];return new Ir(i,n)}else return new Ir(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=lI(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-tt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Zc(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(c,i,rs(this._hostTNode,s)),c}createComponent(e,n,r,i,o){let s=e&&!lN(e),c;if(s)c=n;else{let S=n||{};c=S.index,r=S.injector,i=S.projectableNodes,o=S.environmentInjector||S.ngModuleRef}let u=s?e:new is(Qn(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let N=(s?l:this.parentInjector).get(It,null);N&&(o=N)}let f=Qn(u.componentType??{}),p=Zc(this._lContainer,f?.id??null),y=p?.firstChild??null,v=u.create(l,i,y,o);return this.insertImpl(v.hostView,c,rs(this._hostTNode,p)),v}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(EN(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[We],l=new jT(u,u[qt],u[We]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Au(s,i,o,r),e.attachToViewContainerRef(),LI(Ph(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=lI(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=ns(this._lContainer,n);r&&(kc(Ph(this._lContainer),n),Tu(r[q],r))}detach(e){let n=this._adjustIndex(e,-1),r=ns(this._lContainer,n);return r&&kc(Ph(this._lContainer),n)!=null?new Ni(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function lI(t){return t[Vc]}function Ph(t){return t[Vc]||(t[Vc]=[])}function Kx(t,e){let n,r=e[t.index];return tn(r)?n=r:(n=CT(r,e,null,t),e[t.index]=n,Su(e,n)),BT(n,e,t,r),new jT(n,t,e)}function Qx(t,e){let n=t[Ke],r=n.createComment(""),i=nn(e,t),o=aT(n,i);return Qc(n,o,r,_P(n,i),!1),r}var BT=$T,hp=()=>!1;function Yx(t,e,n){return hp(t,e,n)}function $T(t,e,n,r){if(t[En])return;let i;n.type&8?i=Xt(r):i=Qx(e,n),t[En]=i}function Jx(t,e,n){if(t[En]&&t[Tr])return!0;let r=n[Ht],i=e.index-Le;if(!r||dM(e)||hs(r,i))return!1;let s=rf(r,i),c=r.data[Gf]?.[i],[u,l]=Ox(s,c);return t[En]=u,t[Tr]=l,!0}function Zx(t,e,n,r){hp(t,n,e)||$T(t,e,n,r)}function Xx(){BT=Zx,hp=Jx}var Zn=class{},os=class{};var ff=class extends Zn{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new eu(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=UI(e);this._bootstrapComponents=tT(o.bootstrap),this._r3Injector=Dw(e,n,[{provide:Zn,useValue:this},{provide:Mi,useValue:this.componentFactoryResolver},...r],Et(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},pf=class extends os{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new ff(this.moduleType,e,[])}};var tu=class extends Zn{injector;componentFactoryResolver=new eu(this);instance=null;constructor(e){super();let n=new Jo([...e.providers,{provide:Zn,useValue:this},{provide:Mi,useValue:this.componentFactoryResolver}],e.parent||Rf(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Pu(t,e,n=null){return new tu({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var eO=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Sf(!1,n.type),i=r.length>0?Pu([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=$({token:t,providedIn:"environment",factory:()=>new t(ne(It))})}return t})();function xu(t){return ss(()=>{let e=qT(t),n=Ee(F({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Ow.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(eO).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||en.Emulated,styles:t.styles||Yt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&wn("NgStandalone"),zT(n);let r=t.dependencies;return n.directiveDefs=hI(r,!1),n.pipeDefs=hI(r,!0),n.id=rO(n),n})}function tO(t){return Qn(t)||bf(t)}function nO(t){return t!==null}function Ou(t){return ss(()=>({type:t.type,bootstrap:t.bootstrap||Yt,declarations:t.declarations||Yt,imports:t.imports||Yt,exports:t.exports||Yt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function dI(t,e){if(t==null)return Yo;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,c=Jn.None;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=c!==Jn.None?[r,c]:r,e[o]=s):n[o]=r}return n}function fp(t){return ss(()=>{let e=qT(t);return zT(e),e})}function HT(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function qT(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Yo,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Yt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:dI(t.inputs,e),outputs:dI(t.outputs),debugInfo:null}}function zT(t){t.features?.forEach(e=>e(t))}function hI(t,e){if(!t)return null;let n=e?Cf:tO;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(nO)}function rO(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function iO(t,e,n){return t[e]=n}function pp(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function gs(t){return(t.flags&32)===32}function oO(t,e,n,r,i,o,s,c,u){let l=e.consts,f=Cu(e,t,4,s||null,c||null);wT(e,n,f,Xo(l,u)),Lf(e,f);let p=f.tView=sp(2,f,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,f),p.queries=e.queries.embeddedTView(f)),f}function fI(t,e,n,r,i,o,s,c,u,l){let f=n+Le,p=e.firstCreatePass?oO(f,e,t,r,i,o,s,c,u):e.data[f];ds(p,!1);let y=GT(e,t,p,n);kf()&&tp(e,t,y,p),Sr(y,t);let v=CT(y,t,y,p);return t[f]=v,Su(t,v),Yx(v,p,t),WI(p)&&vT(e,t,p),u!=null&&ET(t,p,l),p}var GT=WT;function WT(t,e,n,r){return er(!0),e[Ke].createComment("")}function sO(t,e,n,r){let i=e[Ht],o=!i||ls()||gs(n)||hs(i,r);if(er(o),o)return WT(t,e,n,r);let s=i.data[EM]?.[r]??null;s!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=s);let c=Ru(i,t,e,n);wu(i,r,c);let u=Jf(i,r);return Nu(u,c)}function aO(){GT=sO}var cO=(()=>{class t{cachedInjectors=new Map;getOrCreateInjector(n,r,i,o){if(!this.cachedInjectors.has(n)){let s=i.length>0?Pu(i,r,o):null;this.cachedInjectors.set(n,s)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=$({token:t,providedIn:"environment",factory:()=>new t})}return t})();var uO=new V("");function xh(t,e,n){return t.get(cO).getOrCreateInjector(e,t,n,"")}function lO(t,e,n){if(t instanceof Ci){let i=t.injector,o=t.parentInjector,s=xh(o,e,n);return new Ci(i,s)}let r=t.get(It);if(r!==t){let i=xh(r,e,n);return new Ci(t,i)}return xh(t,e,n)}function Ti(t,e,n,r=!1){let i=n[We],o=i[q];if(dN(i))return;let s=Eu(i,e),c=s[Qf],u=s[kM];if(!(u!==null&&t<u)&&pI(c,t)&&pI(s[PM]??-1,t)){let l=_u(o,e),p=!r&&!0&&(jM(l)!==null||nI(l,Ue.Loading)!==null||nI(l,Ue.Placeholder))?fO:hO;try{p(t,s,n,e,i)}catch(y){ap(i,y)}}}function dO(t,e){return t[Tr]?.find(n=>n.data[TM]===e[Qf])??null}function hO(t,e,n,r,i){let o=UM(t,i,r);if(o!==null){e[Qf]=t;let s=i[q],c=o+Le,u=du(s,c),l=0;RT(n,l);let f;if(t===Ue.Complete){let v=_u(s,r),S=v.providers;S&&S.length>0&&(f=lO(i[vn],v,S))}let p=dO(n,e);n[Tr]=null;let y=up(i,u,null,{injector:f,dehydratedView:p});if(Au(n,y,l,rs(u,p)),lp(y,2),(t===Ue.Complete||t===Ue.Error)&&Array.isArray(e[Si])){for(let v of e[Si])v();e[Si]=null}}}function pI(t,e){return t<e}function gI(t,e,n){t.loadingPromise.then(()=>{t.loadingState===yt.COMPLETE?Ti(Ue.Complete,e,n):t.loadingState===yt.FAILED&&Ti(Ue.Error,e,n)})}var fO=null;var ku=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var KT=new V("");function ki(t){return!!t&&typeof t.then=="function"}function gp(t){return!!t&&typeof t.subscribe=="function"}var Lu=new V("");var QT=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=R(Lu,{optional:!0})??[];injector=R(Be);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=kt(this.injector,i);if(ki(o))n.push(o);else if(gp(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),pO=(()=>{class t{static \u0275prov=$({token:t,providedIn:"root",factory:()=>new gf})}return t})(),gf=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}},Nr=new V("");function gO(){FE(()=>{throw new U(600,!1)})}function mO(t){return t.isBoundToModule}var yO=10;function vO(t,e,n){try{let r=n();return ki(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var ut=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=R(sM);afterRenderManager=R(Ww);zonelessEnabled=R(gu);rootEffectScheduler=R(pO);dirtyFlags=0;deferredDirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new et;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=R(rn).hasPendingTasks.pipe(ee(n=>!n));constructor(){R(vu,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=R(It);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){let i=n instanceof Xc;if(!this._injector.get(QT).done){let y=!i&&jI(n),v=!1;throw new U(405,v)}let s;i?s=n:s=this._injector.get(Mi).resolveComponentFactory(n),this.componentTypes.push(s.componentType);let c=mO(s)?void 0:this._injector.get(Zn),u=r||s.selector,l=s.create(Be.NULL,[],u,c),f=l.location.nativeElement,p=l.injector.get(KT,null);return p?.registerApplication(f),l.onDestroy(()=>{this.detachView(l.hostView),Nc(this.components,l),p?.unregisterApplication(f)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick=()=>{if(this.tracingSnapshot!==null){let r=this.tracingSnapshot;this.tracingSnapshot=null,r.run(Wf.CHANGE_DETECTION,this._tick),r.dispose();return}if(this._runningTick)throw new U(101,!1);let n=de(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,de(n),this.afterTick.next()}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Pi,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let n=0;for(;this.dirtyFlags!==0&&n++<yO;)this.synchronizeOnce()}synchronizeOnce(){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let n=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)EO(r,i,n,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>hu(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Nc(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(Nr,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Nc(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new U(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Nc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function EO(t,e,n,r){if(!n&&!hu(t))return;xT(t,e,n&&!r?0:1)}function _O(t,e,n){let r=e[vn],i=e[q];if(t.loadingState!==yt.NOT_STARTED)return t.loadingPromise??Promise.resolve();let o=Eu(e,n),s=BM(i,t);t.loadingState=yt.IN_PROGRESS,Rc(1,o);let c=t.dependencyResolverFn,u=r.get(rn),l=u.add();return c?(t.loadingPromise=Promise.allSettled(c()).then(f=>{let p=!1,y=[],v=[];for(let S of f)if(S.status==="fulfilled"){let N=S.value,M=Qn(N)||bf(N);if(M)y.push(M);else{let L=Cf(N);L&&v.push(L)}}else{p=!0;break}if(t.loadingPromise=null,u.remove(l),p){if(t.loadingState=yt.FAILED,t.errorTmplIndex===null){let S="",N=new U(750,!1);ap(e,N)}}else{t.loadingState=yt.COMPLETE;let S=s.tView;if(y.length>0){S.directiveRegistry=rI(S.directiveRegistry,y);let N=y.map(L=>L.type),M=Sf(!1,...N);t.providers=M}v.length>0&&(S.pipeRegistry=rI(S.pipeRegistry,v))}}),t.loadingPromise):(t.loadingPromise=Promise.resolve().then(()=>{t.loadingPromise=null,t.loadingState=yt.COMPLETE,u.remove(l)}),t.loadingPromise)}function IO(t,e){return e[vn].get(uO,null,{optional:!0})?.behavior!==Kw.Manual}function wO(t,e,n){let r=e[q],i=e[n.index];if(!IO(t,e))return;let o=Eu(e,n),s=_u(r,n);switch(FM(o),s.loadingState){case yt.NOT_STARTED:Ti(Ue.Loading,n,i),_O(s,e,n),s.loadingState===yt.IN_PROGRESS&&gI(s,n,i);break;case yt.IN_PROGRESS:Ti(Ue.Loading,n,i),gI(s,n,i);break;case yt.COMPLETE:Ti(Ue.Complete,n,i);break;case yt.FAILED:Ti(Ue.Error,n,i);break;default:}}function TO(t,e,n){return b(this,null,function*(){let r=t.get(Jw),i=r.hydrating;if(i.has(e))return;let{parentBlockPromise:o,hydrationQueue:s}=iP(e,t);DO(r,s);let c=t.get(rn),u=c.add();o!==null&&(yield o);for(let l of s)yield CO(l,r),yield bO(t),i.get(l).resolve();yield i.get(e)?.promise,c.remove(u),n&&n(s),xx(r.get(e),s,r,t.get(ut))})}function DO(t,e){for(let n of e)t.hydrating.set(n,Promise.withResolvers())}function bO(t){return new Promise(e=>Kf(e,{injector:t}))}function CO(t,e){return b(this,null,function*(){let n=e.get(t);if(n===null)return;let{tNode:r,lView:i}=n,o=Eu(i,r);return new Promise(s=>{SO(o,s),wO(2,i,r)})})}function SO(t,e){Array.isArray(t[Si])||(t[Si]=[]),t[Si].push(e)}function AO(t,e,n,r){return pp(t,iw(),n)?e+xI(n)+r:fs}function mI(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";AT(t,n,o[s],s,r)}var mf=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Oh(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function RO(t,e,n){let r,i,o=0,s=t.length-1,c=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=t.at(o),f=e[o],p=Oh(o,l,o,f,n);if(p!==0){p<0&&t.updateValue(o,f),o++;continue}let y=t.at(s),v=e[u],S=Oh(s,y,u,v,n);if(S!==0){S<0&&t.updateValue(s,v),s--,u--;continue}let N=n(o,l),M=n(s,y),L=n(o,f);if(Object.is(L,M)){let H=n(u,v);Object.is(H,N)?(t.swap(o,s),t.updateValue(s,v),u--,s--):t.move(s,o),t.updateValue(o,f),o++;continue}if(r??=new nu,i??=vI(t,o,s,n),yf(t,r,o,L))t.updateValue(o,f),o++,s++;else if(i.has(L))r.set(N,t.detach(o)),s--;else{let H=t.create(o,e[o]);t.attach(o,H),o++,s++}}for(;o<=u;)yI(t,r,n,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let f=t.at(o),p=l.value,y=Oh(o,f,o,p,n);if(y!==0)y<0&&t.updateValue(o,p),o++,l=u.next();else{r??=new nu,i??=vI(t,o,s,n);let v=n(o,p);if(yf(t,r,o,v))t.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(v))t.attach(o,t.create(o,p)),o++,s++,l=u.next();else{let S=n(o,f);r.set(S,t.detach(o)),s--}}}for(;!l.done;)yI(t,r,n,t.length,l.value),l=u.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(u=>{t.destroy(u)})}function yf(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function yI(t,e,n,r,i){if(yf(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function vI(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var nu=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};var vf=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-tt}};function YT(t,e){return e}var Ef=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function JT(t,e,n,r,i,o,s,c,u,l,f,p,y){wn("NgControlFlow");let v=je(),S=xi(),N=u!==void 0,M=je(),L=c?s.bind(M[Tt][Ot]):s,H=new Ef(N,L);M[Le+t]=H,fI(v,S,t+1,e,n,r,i,Xo(S.consts,o)),N&&fI(v,S,t+2,u,l,f,p,Xo(S.consts,y))}var _f=class extends mf{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-tt}at(e){return this.getLView(e)[Ot].$implicit}attach(e,n){let r=n[Ht];this.needsIndexUpdate||=e!==this.length,Au(this.lContainer,n,e,rs(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,NO(this.lContainer,e)}create(e,n){let r=Zc(this.lContainer,this.templateTNode.tView.ssrId),i=up(this.hostLView,this.templateTNode,new vf(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Tu(e[q],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[Ot].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Ot].$index=e}getLView(e){return MO(this.lContainer,e)}};function ZT(t){let e=de(null),n=pu();try{let r=je(),i=r[q],o=r[n],s=n+1,c=EI(r,s);if(o.liveCollection===void 0){let l=_I(i,s);o.liveCollection=new _f(c,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(RO(u,t,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=iw(),f=u.length===0;if(pp(r,l,f)){let p=n+2,y=EI(r,p);if(f){let v=_I(i,p),S=Zc(y,v.tView.ssrId),N=up(r,v,void 0,{dehydratedView:S});Au(y,N,0,rs(v,S))}else RT(y,0)}}}finally{de(e)}}function EI(t,e){return t[e]}function NO(t,e){return ns(t,e)}function MO(t,e){return ux(t,e)}function _I(t,e){return du(t,e)}function PO(t,e,n,r,i,o){let s=e.consts,c=Xo(s,i),u=Cu(e,t,2,r,c);return wT(e,n,u,Xo(s,o)),u.attrs!==null&&df(u,u.attrs,!1),u.mergedAttrs!==null&&df(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function ms(t,e,n,r){let i=je(),o=xi(),s=Le+t,c=i[Ke],u=o.firstCreatePass?PO(s,o,i,e,n,r):o.data[s],l=XT(o,i,u,c,e,t);i[s]=l;let f=WI(u);return ds(u,!0),dT(c,l,u),!gs(u)&&kf()&&tp(o,i,l,u),IN()===0&&Sr(l,i),wN(),f&&(vT(o,i,u),yT(o,u,i)),r!==null&&ET(i,u),ms}function ys(){let t=In();nw()?AN():(t=t.parent,ds(t,!1));let e=t;DN(e)&&CN(),TN();let n=xi();return n.firstCreatePass&&(Lf(n,t),GI(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&VN(e)&&mI(n,e,je(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&UN(e)&&mI(n,e,je(),e.stylesWithoutHost,!1),ys}function mp(t,e,n,r){return ms(t,e,n,r),ys(),mp}var XT=(t,e,n,r,i,o)=>(er(!0),Xf(r,i,dw()));function xO(t,e,n,r,i,o){let s=e[Ht],c=!s||ls()||gs(n)||hs(s,o);if(er(c),c)return Xf(r,i,dw());let u=Ru(s,t,e,n);return eT(s,o)&&wu(s,o,u.nextSibling),s&&(Pw(n)||xw(u))&&lu(n)&&(bN(n),uT(u)),u}function OO(){XT=xO}var kO=(t,e,n,r)=>(er(!0),rT(e[Ke],""));function LO(t,e,n,r){let i,o=e[Ht],s=!o||ls()||hs(o,r)||gs(n);if(er(s),s)return rT(e[Ke],"");let c=Ru(o,t,e,n),u=nP(o,r);return wu(o,r,c),i=Nu(u,c),i}function FO(){kO=LO}var ru="en-US";var VO=ru;function UO(t){typeof t=="string"&&(VO=t.toLowerCase().replace(/_/g,"-"))}var jO=(t,e,n)=>{};function BO(t){jO=t}function $O(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function eD(t,e=""){let n=je(),r=xi(),i=t+Le,o=r.firstCreatePass?Cu(r,i,1,e,null):r.data[i],s=tD(r,n,o,e,t);n[i]=s,kf()&&tp(r,n,s,o),ds(o,!1)}var tD=(t,e,n,r,i)=>(er(!0),nT(e[Ke],r));function HO(t,e,n,r,i){let o=e[Ht],s=!o||ls()||gs(n)||hs(o,i);return er(s),s?nT(e[Ke],r):Ru(o,t,e,n)}function qO(){tD=HO}function yp(t,e,n){let r=je(),i=AO(r,t,e,n);return i!==fs&&ox(r,pu(),i),yp}function zO(t,e){let n=t[e];return n===fs?void 0:n}function GO(t,e,n,r,i,o){let s=e+n;return pp(t,s,i)?iO(t,s+1,o?r.call(o,i):r(i)):zO(t,s+1)}function nD(t,e){let n=xi(),r,i=t+Le;n.firstCreatePass?(r=WO(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=wr(r.type,!0)),s,c=ct(ps);try{let u=qc(!1),l=o();return qc(u),$O(n,je(),i,l),l}finally{ct(c)}}function WO(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function rD(t,e,n){let r=t+Le,i=je(),o=vN(i,r);return KO(i,r)?GO(i,RN(),e,o.transform,n,o):o.transform(n)}function KO(t,e){return t[q].data[e].pure}var Xn=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},iD=new Xn("19.0.5"),If=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},vp=(()=>{class t{compileModuleSync(n){return new pf(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=UI(n),o=tT(i.declarations).reduce((s,c)=>{let u=Qn(c);return u&&s.push(new is(u)),s},[]);return new If(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var QO=(()=>{class t{zone=R(ye);changeDetectionScheduler=R(Cr);applicationRef=R(ut);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),YO=new V("",{factory:()=>!1});function oD({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new ye(Ee(F({},aD()),{scheduleInRootZone:n})),[{provide:ye,useFactory:t},{provide:Kn,multi:!0,useFactory:()=>{let r=R(QO,{optional:!0});return()=>r.initialize()}},{provide:Kn,multi:!0,useFactory:()=>{let r=R(JO);return()=>{r.initialize()}}},e===!0?{provide:Cw,useValue:!0}:[],{provide:Sw,useValue:n??bw}]}function sD(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=oD({ngZoneFactory:()=>{let i=aD(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&wn("NgZone_CoalesceEvent"),new ye(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return bt([{provide:YO,useValue:!0},{provide:gu,useValue:!1},r])}function aD(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var JO=(()=>{class t{subscription=new Se;initialized=!1;zone=R(ye);pendingTasks=R(rn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ye.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ye.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ZO=(()=>{class t{appRef=R(ut);taskService=R(rn);ngZone=R(ye);zonelessEnabled=R(gu);tracing=R(vu,{optional:!0});disableScheduling=R(Cw,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Se;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Gc):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(R(Sw,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Zh||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 8:{this.appRef.deferredDirtyFlags|=8;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 13:{this.appRef.dirtyFlags|=16,r=!0;break}case 14:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{r=!0;break}case 10:case 9:case 7:case 11:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?K_:Rw;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Gc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,K_(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function XO(){return typeof $localize<"u"&&$localize.locale||ru}var Ep=new V("",{providedIn:"root",factory:()=>R(Ep,te.Optional|te.SkipSelf)||XO()});var wf=new V(""),ek=new V("");function zo(t){return!t.moduleRef}function tk(t){let e=zo(t)?t.r3Injector:t.moduleRef.injector,n=e.get(ye);return n.run(()=>{zo(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(_n,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),zo(t)){let o=()=>e.destroy(),s=t.platformInjector.get(wf);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(wf);s.add(o),t.moduleRef.onDestroy(()=>{Nc(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return vO(r,n,()=>{let o=e.get(QT);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Ep,ru);if(UO(s||ru),!e.get(ek,!0))return zo(t)?e.get(ut):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(zo(t)){let u=e.get(ut);return t.rootComponent!==void 0&&u.bootstrap(t.rootComponent),u}else return nk(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function nk(t,e){let n=t.injector.get(ut);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new U(-403,!1);e.push(t)}var Mc=null;function rk(t=[],e){return Be.create({name:e,providers:[{provide:cu,useValue:"platform"},{provide:wf,useValue:new Set([()=>Mc=null])},...t]})}function ik(t=[]){if(Mc)return Mc;let e=rk(t);return Mc=e,gO(),ok(e),e}function ok(t){let e=t.get(qf,null);kt(t,()=>{e?.forEach(n=>n())})}var Li=(()=>{class t{static __NG_ELEMENT_ID__=sk}return t})();function sk(t){return ak(In(),je(),(t&16)===16)}function ak(t,e,n){if(lu(t)&&!n){let r=us(t.index,e);return new Ni(r,r)}else if(t.type&175){let r=e[Tt];return new Ni(r,e)}return null}function cD(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=ik(r),o=[oD({}),{provide:Cr,useExisting:ZO},...n||[]],s=new tu({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return tk({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var bc=new WeakSet,II="",Pc=[];function wI(t){return t.get(Gw,bM)}function uD(){let t=[{provide:Gw,useFactory:()=>{let e=!0;{let n=R(Oi);e=!!window._ejsas?.[n]}return e&&wn("NgEventReplay"),e}}];return t.push({provide:Kn,useValue:()=>{let e=R(Be),n=e.get(ut);if(!bc.has(n)){let r=R(X_);wI(e)&&BO((i,o,s)=>{$M(i,o,s),HM(i,r)})}},multi:!0},{provide:Nr,useFactory:()=>{let e=R(Be),n=R(ut);return()=>{!wI(e)||bc.has(n)||(bc.add(n),n.onDestroy(()=>bc.delete(n)),n.whenStable().then(()=>{let r=e.get(zM);ck(r,e);let i=e.get(X_);i.get(II)?.forEach(qM),i.delete(II);let o=r.instance;tP(e)?n.onDestroy(()=>o.cleanUp()):o.cleanUp()}))}},multi:!0}),t}var ck=(t,e)=>{let n=e.get(Oi),r=window._ejsas[n],i=t.instance=new N_(new Ic(r.c));for(let c of r.et)i.addEvent(c);for(let c of r.etc)i.addEvent(c);let o=M_(n);i.replayEarlyEventInfos(o),P_(n);let s=new wc(c=>{uk(e,c,c.currentTarget)});R_(i,s)};function uk(t,e,n){let r=(n&&n.getAttribute(Iu))??"";/d\d+/.test(r)?lk(r,t,e,n):e.eventPhase===Th.REPLAY&&Yw(e,n)}function lk(t,e,n,r){Pc.push({event:n,currentTarget:r}),TO(e,t,dk)}function dk(t){let e=[...Pc],n=new Set(t);Pc=[];for(let{event:r,currentTarget:i}of e){let o=i.getAttribute(Iu);n.has(o)?Yw(r,i):Pc.push({event:r,currentTarget:i})}}var TI=!1;function hk(){TI||(TI=!0,JM(),OO(),qO(),FO(),aO(),Xx(),Lx(),qP())}function fk(t,e){return t.whenStable()}function lD(){let t=[{provide:Dc,useFactory:()=>{let e=!0;return e=!!R(Ar,{optional:!0})?.get(Zw,null),e&&wn("NgHydration"),e}},{provide:Kn,useValue:()=>{Rx(!1),R(Dc)&&(pk(),hk())},multi:!0}];return t.push({provide:zw,useFactory:()=>R(Dc)},{provide:Nr,useFactory:()=>{if(R(Dc)){let e=R(ut),n=R(Be);return()=>{fk(e,n).then(()=>{VT(e)})}}return()=>{}},multi:!0}),bt(t)}function pk(){let t=yu(),e;for(let n of t.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===QM){e=n;break}if(!e)throw new U(-507,!1)}function _p(t){let e=de(null);try{return t()}finally{de(e)}}var DI=class{[ii];constructor(e){this[ii]=e}destroy(){this[ii].destroy()}};var pD=null;function Fi(){return pD}function gD(t){pD??=t}var Fu=class{};var Ct=new V(""),mD=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>R(Ek),providedIn:"platform"})}return t})();var Ek=(()=>{class t extends mD{_location;_history;_doc=R(Ct);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Fi().getBaseHref(this._doc)}onPopState(n){let r=Fi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Fi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function yD(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function dD(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Mr(t){return t&&t[0]!=="?"?"?"+t:t}var Uu=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>R(vD),providedIn:"root"})}return t})(),_k=new V(""),vD=(()=>{class t extends Uu{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??R(Ct).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return yD(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Mr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Mr(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Mr(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(ne(mD),ne(_k,8))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Es=(()=>{class t{_subject=new et;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=Tk(dD(hD(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Mr(r))}normalize(n){return t.stripTrailingSlash(wk(this._basePath,hD(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Mr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Mr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Mr;static joinWithSlash=yD;static stripTrailingSlash=dD;static \u0275fac=function(r){return new(r||t)(ne(Uu))};static \u0275prov=$({token:t,factory:()=>Ik(),providedIn:"root"})}return t})();function Ik(){return new Es(ne(Uu))}function wk(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function hD(t){return t.replace(/\/index.html$/,"")}function Tk(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Tp(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}function Dk(t,e){return new U(2100,!1)}var Ip=class{createSubscription(e,n){return _p(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){_p(()=>e.unsubscribe())}},wp=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},bk=new wp,Ck=new Ip,ED=(()=>{class t{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(n){this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(ki(n))return bk;if(gp(n))return Ck;throw Dk(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||t)(ps(Li,16))};static \u0275pipe=HT({name:"async",type:t,pure:!1})}return t})();var Dp=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ou({type:t});static \u0275inj=ou({})}return t})(),_D="browser",Sk="server";function _s(t){return t===Sk}var Vu=class{};var Bu=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(c=>o.indexOf(c)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(e,n){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var AD=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(AD||{}),bp=class{headers;status;statusText;url;ok;type;constructor(e,n=200,r="OK"){this.headers=e.headers||new Bu,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var $u=class t extends bp{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=AD.Response;clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var Rk=new V("");var Nk=new V(""),ID="b",wD="h",TD="s",DD="st",bD="u",CD="rt",ju=new V(""),Mk=["GET","HEAD"];function Pk(t,e){let v=R(ju),{isCacheActive:n}=v,r=CE(v,["isCacheActive"]),{transferCache:i,method:o}=t;if(!n||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!Mk.includes(o)||!r.includeRequestsWithAuthHeaders&&xk(t)||r.filter?.(t)===!1)return e(t);let s=R(Ar),c=R(Nk,{optional:!0}),u=_s(R(zt));if(c&&!u)throw new U(2803,!1);let l=u&&c?Fk(t.url,c):t.url,f=kk(t,l),p=s.get(f,null),y=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(y=i.includeHeaders),p){let{[ID]:S,[CD]:N,[wD]:M,[TD]:L,[DD]:H,[bD]:J}=p,oe=S;switch(N){case"arraybuffer":oe=new TextEncoder().encode(S).buffer;break;case"blob":oe=new Blob([S]);break}let be=new Bu(M);return W(new $u({body:oe,headers:be,status:L,statusText:H,url:J}))}return e(t).pipe(Re(S=>{S instanceof $u&&u&&s.set(f,{[ID]:S.body,[wD]:Ok(S.headers,y),[TD]:S.status,[DD]:S.statusText,[bD]:l,[CD]:t.responseType})}))}function xk(t){return t.headers.has("authorization")||t.headers.has("proxy-authorization")}function Ok(t,e){if(!e)return{};let n={};for(let r of e){let i=t.getAll(r);i!==null&&(n[r]=i)}return n}function SD(t){return[...t.keys()].sort().map(e=>`${e}=${t.getAll(e)}`).join("&")}function kk(t,e){let{params:n,method:r,responseType:i}=t,o=SD(n),s=t.serializeBody();s instanceof URLSearchParams?s=SD(s):typeof s!="string"&&(s="");let c=[r,i,e,s,o].join("|"),u=Lk(c);return u}function Lk(t){let e=0;for(let n of t)e=Math.imul(31,e)+n.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function RD(t){return[{provide:ju,useFactory:()=>(wn("NgHttpTransferCache"),F({isCacheActive:!0},t))},{provide:Rk,useValue:Pk,multi:!0,deps:[Ar,ju]},{provide:Nr,multi:!0,useFactory:()=>{let e=R(ut),n=R(ju);return()=>{e.whenStable().then(()=>{n.isCacheActive=!1})}}}]}function Fk(t,e){let n=new URL(t,"resolve://").origin,r=e[n];return r?t.replace(n,r):t}var Sp=class extends Fu{supportsDOMEvents=!0},Ap=class t extends Sp{static makeCurrent(){gD(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Vk();return n==null?null:Uk(n)}resetBaseElement(){Is=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Tp(document.cookie,e)}},Is=null;function Vk(){return Is=Is||document.querySelector("base"),Is?Is.getAttribute("href"):null}function Uk(t){return new URL(t,document.baseURI).pathname}var jk=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),Rp=new V(""),kD=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new U(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(ne(Rp),ne(ye))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),qu=class{_doc;constructor(e){this._doc=e}manager},Hu="ng-app-id";function ND(t){for(let e of t)e.remove()}function MD(t,e){let n=e.createElement("style");return n.textContent=t,n}function Bk(t,e,n,r){let i=t.head?.querySelectorAll(`style[${Hu}="${e}"],link[${Hu}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Hu),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function Np(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var LD=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.isServer=_s(o),Bk(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,MD);r?.forEach(i=>this.addUsage(i,this.external,Np))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(ND(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])ND(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,MD(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,Np(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Hu,this.appId),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(ne(Ct),ne(Oi),ne(zf,8),ne(zt))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),Cp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Pp=/%COMP%/g,FD="%COMP%",$k=`_nghost-${FD}`,Hk=`_ngcontent-${FD}`,qk=!0,zk=new V("",{providedIn:"root",factory:()=>qk});function Gk(t){return Hk.replace(Pp,t)}function Wk(t){return $k.replace(Pp,t)}function VD(t,e){return e.map(n=>n.replace(Pp,t))}var PD=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,c,u,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=c,this.ngZone=u,this.nonce=l,this.platformIsServer=_s(c),this.defaultRenderer=new ws(n,s,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===en.ShadowDom&&(r=Ee(F({},r),{encapsulation:en.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof zu?i.applyToHost(n):i instanceof Ts&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case en.Emulated:o=new zu(u,l,r,this.appId,f,s,c,p);break;case en.ShadowDom:return new Mp(u,l,n,r,s,c,this.nonce,p);default:o=new Ts(u,l,r,f,s,c,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static \u0275fac=function(r){return new(r||t)(ne(kD),ne(LD),ne(Oi),ne(zk),ne(Ct),ne(zt),ne(ye),ne(zf))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),ws=class{eventManager;doc;ngZone;platformIsServer;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(Cp[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(xD(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(xD(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new U(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Cp[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Cp[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Rr.DashCase|Rr.Important)?e.style.setProperty(n,r,i&Rr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Rr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Fi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function xD(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Mp=class extends ws{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,c,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=VD(i.id,i.styles);for(let p of l){let y=document.createElement("style");c&&y.setAttribute("nonce",c),y.textContent=p,this.shadowRoot.appendChild(y)}let f=i.getExternalStyles?.();if(f)for(let p of f){let y=Np(p,o);c&&y.setAttribute("nonce",c),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ts=class extends ws{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,c,u){super(e,o,s,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?VD(u,r.styles):r.styles,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},zu=class extends Ts{contentAttr;hostAttr;constructor(e,n,r,i,o,s,c,u){let l=i+"-"+r.id;super(e,n,r,o,s,c,u,l),this.contentAttr=Gk(l),this.hostAttr=Wk(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},Kk=(()=>{class t extends qu{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static \u0275fac=function(r){return new(r||t)(ne(Ct))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),OD=["alt","control","meta","shift"],Qk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Yk={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Jk=(()=>{class t extends qu{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let o=t.parseEventName(r),s=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Fi().onAndCancel(n,o.domEventName,s))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),OD.forEach(l=>{let f=r.indexOf(l);f>-1&&(r.splice(f,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=Qk[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),OD.forEach(s=>{if(s!==i){let c=Yk[s];c(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(ne(Ct))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})();function UD(t,e){return cD(F({rootComponent:t},Zk(e)))}function Zk(t){return{appProviders:[...r1,...t?.providers??[]],platformProviders:n1}}function Xk(){Ap.makeCurrent()}function e1(){return new _n}function t1(){return Uw(document),document}var n1=[{provide:zt,useValue:_D},{provide:qf,useValue:Xk,multi:!0},{provide:Ct,useFactory:t1,deps:[]}];var r1=[{provide:cu,useValue:"root"},{provide:_n,useFactory:e1,deps:[]},{provide:Rp,useClass:Kk,multi:!0,deps:[Ct,ye,zt]},{provide:Rp,useClass:Jk,multi:!0,deps:[Ct]},PD,LD,kD,{provide:Pi,useExisting:PD},{provide:Vu,useClass:jk,deps:[]},[]];var jD=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(ne(Ct))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Gu=function(t){return t[t.NoHttpTransferCache=0]="NoHttpTransferCache",t[t.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",t[t.I18nSupport=2]="I18nSupport",t[t.EventReplay=3]="EventReplay",t[t.IncrementalHydration=4]="IncrementalHydration",t}(Gu||{});function i1(t,e=[],n={}){return{\u0275kind:t,\u0275providers:e}}function BD(){return i1(Gu.EventReplay,uD())}function $D(...t){let e=[],n=new Set,r=n.has(Gu.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:o}of t)n.add(o),i.length&&e.push(i);return bt([[],lD(),n.has(Gu.NoHttpTransferCache)||r?[]:RD({}),e])}var Z="primary",js=Symbol("RouteTitle"),Fp=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Hi(t){return new Fp(t)}function s1(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],c=t[o];if(s[0]===":")i[s.substring(1)]=c;else if(s!==c.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function a1(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!on(t[n],e[n]))return!1;return!0}function on(t,e){let n=t?Vp(t):void 0,r=e?Vp(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!YD(t[i],e[i]))return!1;return!0}function Vp(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function YD(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function JD(t){return t.length>0?t[t.length-1]:null}function tr(t){return lh(t)?t:ki(t)?Ae(Promise.resolve(t)):W(t)}var c1={exact:XD,subset:eb},ZD={exact:u1,subset:l1,ignored:()=>!0};function HD(t,e,n){return c1[n.paths](t.root,e.root,n.matrixParams)&&ZD[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function u1(t,e){return on(t,e)}function XD(t,e,n){if(!xr(t.segments,e.segments)||!Qu(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!XD(t.children[r],e.children[r],n))return!1;return!0}function l1(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>YD(t[n],e[n]))}function eb(t,e,n){return tb(t,e,e.segments,n)}function tb(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!xr(i,n)||e.hasChildren()||!Qu(i,n,r))}else if(t.segments.length===n.length){if(!xr(t.segments,n)||!Qu(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!eb(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!xr(t.segments,i)||!Qu(t.segments,i,r)||!t.children[Z]?!1:tb(t.children[Z],e,o,r)}}function Qu(t,e,n){return e.every((r,i)=>ZD[n](t[i].parameters,r.parameters))}var Dn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new me([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Hi(this.queryParams),this._queryParamMap}toString(){return f1.serialize(this)}},me=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yu(this)}},Pr=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Hi(this.parameters),this._parameterMap}toString(){return rb(this)}};function d1(t,e){return xr(t,e)&&t.every((n,r)=>on(n.parameters,e[r].parameters))}function xr(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function h1(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Z&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Z&&(n=n.concat(e(i,r)))}),n}var lg=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>new Ns,providedIn:"root"})}return t})(),Ns=class{parse(e){let n=new jp(e);return new Dn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Ds(e.root,!0)}`,r=m1(e.queryParams),i=typeof e.fragment=="string"?`#${p1(e.fragment)}`:"";return`${n}${r}${i}`}},f1=new Ns;function Yu(t){return t.segments.map(e=>rb(e)).join("/")}function Ds(t,e){if(!t.hasChildren())return Yu(t);if(e){let n=t.children[Z]?Ds(t.children[Z],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Z&&r.push(`${i}:${Ds(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=h1(t,(r,i)=>i===Z?[Ds(t.children[Z],!1)]:[`${i}:${Ds(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Z]!=null?`${Yu(t)}/${n[0]}`:`${Yu(t)}/(${n.join("//")})`}}function nb(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wu(t){return nb(t).replace(/%3B/gi,";")}function p1(t){return encodeURI(t)}function Up(t){return nb(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ju(t){return decodeURIComponent(t)}function qD(t){return Ju(t.replace(/\+/g,"%20"))}function rb(t){return`${Up(t.path)}${g1(t.parameters)}`}function g1(t){return Object.entries(t).map(([e,n])=>`;${Up(e)}=${Up(n)}`).join("")}function m1(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Wu(n)}=${Wu(i)}`).join("&"):`${Wu(n)}=${Wu(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var y1=/^[^\/()?;#]+/;function xp(t){let e=t.match(y1);return e?e[0]:""}var v1=/^[^\/()?;=#]+/;function E1(t){let e=t.match(v1);return e?e[0]:""}var _1=/^[^=?&#]+/;function I1(t){let e=t.match(_1);return e?e[0]:""}var w1=/^[^&#]+/;function T1(t){let e=t.match(w1);return e?e[0]:""}var jp=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new me([],{}):new me([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Z]=new me(e,n)),r}parseSegment(){let e=xp(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new U(4009,!1);return this.capture(e),new Pr(Ju(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=E1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=xp(this.remaining);i&&(r=i,this.capture(r))}e[Ju(n)]=Ju(r)}parseQueryParam(e){let n=I1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=T1(this.remaining);s&&(r=s,this.capture(r))}let i=qD(n),o=qD(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=xp(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new U(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Z);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[Z]:new me([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new U(4011,!1)}};function ib(t){return t.segments.length>0?new me([],{[Z]:t}):t}function ob(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=ob(i);if(r===Z&&o.segments.length===0&&o.hasChildren())for(let[s,c]of Object.entries(o.children))e[s]=c;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new me(t.segments,e);return D1(n)}function D1(t){if(t.numberOfChildren===1&&t.children[Z]){let e=t.children[Z];return new me(t.segments.concat(e.segments),e.children)}return t}function Ms(t){return t instanceof Dn}function b1(t,e,n=null,r=null){let i=sb(t);return ab(i,e,n,r)}function sb(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let c=new me(o.url,s);return o===t&&(e=c),c}let r=n(t.root),i=ib(r);return e??i}function ab(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Op(i,i,i,n,r);let o=C1(e);if(o.toRoot())return Op(i,i,new me([],{}),n,r);let s=S1(o,i,t),c=s.processChildren?Ss(s.segmentGroup,s.index,o.commands):ub(s.segmentGroup,s.index,o.commands);return Op(i,s.segmentGroup,c,n,r)}function Zu(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ps(t){return typeof t=="object"&&t!=null&&t.outlets}function Op(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(f=>`${f}`):`${l}`});let s;t===e?s=n:s=cb(t,e,n);let c=ib(ob(s));return new Dn(c,o,i)}function cb(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=cb(o,e,n)}),new me(t.segments,r)}var Xu=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Zu(r[0]))throw new U(4003,!1);let i=r.find(Ps);if(i&&i!==JD(r))throw new U(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function C1(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Xu(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([u,l])=>{c[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?n=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,o]},[]);return new Xu(n,e,r)}var ji=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function S1(t,e,n){if(t.isAbsolute)return new ji(e,!0,0);if(!n)return new ji(e,!1,NaN);if(n.parent===null)return new ji(n,!0,0);let r=Zu(t.commands[0])?0:1,i=n.segments.length-1+r;return A1(n,i,t.numberOfDoubleDots)}function A1(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new U(4005,!1);i=r.segments.length}return new ji(r,!1,i-o)}function R1(t){return Ps(t[0])?t[0].outlets:{[Z]:t}}function ub(t,e,n){if(t??=new me([],{}),t.segments.length===0&&t.hasChildren())return Ss(t,e,n);let r=N1(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new me(t.segments.slice(0,r.pathIndex),{});return o.children[Z]=new me(t.segments.slice(r.pathIndex),t.children),Ss(o,0,i)}else return r.match&&i.length===0?new me(t.segments,{}):r.match&&!t.hasChildren()?Bp(t,e,n):r.match?Ss(t,0,i):Bp(t,e,n)}function Ss(t,e,n){if(n.length===0)return new me(t.segments,{});{let r=R1(n),i={};if(Object.keys(r).some(o=>o!==Z)&&t.children[Z]&&t.numberOfChildren===1&&t.children[Z].segments.length===0){let o=Ss(t.children[Z],e,n);return new me(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=ub(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new me(t.segments,i)}}function N1(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],c=n[r];if(Ps(c))break;let u=`${c}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!GD(u,l,s))return o;r+=2}else{if(!GD(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Bp(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Ps(o)){let u=M1(o.outlets);return new me(r,u)}if(i===0&&Zu(n[0])){let u=t.segments[e];r.push(new Pr(u.path,zD(n[0]))),i++;continue}let s=Ps(o)?o.outlets[Z]:`${o}`,c=i<n.length-1?n[i+1]:null;s&&c&&Zu(c)?(r.push(new Pr(s,zD(c))),i+=2):(r.push(new Pr(s,{})),i++)}return new me(r,{})}function M1(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Bp(new me([],{}),0,r))}),e}function zD(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function GD(t,e,n){return t==n.path&&on(e,n.parameters)}var As="imperative",Qe=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Qe||{}),Lt=class{id;url;constructor(e,n){this.id=e,this.url=n}},xs=class extends Lt{type=Qe.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Or=class extends Lt{urlAfterRedirects;type=Qe.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},At=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(At||{}),$p=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}($p||{}),Tn=class extends Lt{reason;code;type=Qe.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},kr=class extends Lt{reason;code;type=Qe.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},Os=class extends Lt{error;target;type=Qe.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},el=class extends Lt{urlAfterRedirects;state;type=Qe.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hp=class extends Lt{urlAfterRedirects;state;type=Qe.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qp=class extends Lt{urlAfterRedirects;state;shouldActivate;type=Qe.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},zp=class extends Lt{urlAfterRedirects;state;type=Qe.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gp=class extends Lt{urlAfterRedirects;state;type=Qe.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wp=class{route;type=Qe.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Kp=class{route;type=Qe.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Qp=class{snapshot;type=Qe.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yp=class{snapshot;type=Qe.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jp=class{snapshot;type=Qe.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zp=class{snapshot;type=Qe.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ks=class{},qi=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function P1(t,e){return t.providers&&!t._injector&&(t._injector=Pu(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Gt(t){return t.outlet||Z}function x1(t,e){let n=t.filter(r=>Gt(r)===e);return n.push(...t.filter(r=>Gt(r)!==e)),n}function Bs(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Xp=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Bs(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new al(this.rootInjector)}},al=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Xp(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(ne(It))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),tl=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=eg(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=eg(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=tg(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return tg(e,this._root).map(n=>n.value)}};function eg(t,e){if(t===e.value)return e;for(let n of e.children){let r=eg(t,n);if(r)return r}return null}function tg(t,e){if(t===e.value)return[e];for(let n of e.children){let r=tg(t,n);if(r.length)return r.unshift(e),r}return[]}var St=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ui(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var nl=class extends tl{snapshot;constructor(e,n){super(e),this.snapshot=n,dg(this,e)}toString(){return this.snapshot.toString()}};function lb(t){let e=O1(t),n=new Ge([new Pr("",{})]),r=new Ge({}),i=new Ge({}),o=new Ge({}),s=new Ge(""),c=new zi(n,r,o,s,i,Z,t,e.root);return c.snapshot=e.root,new nl(new St(c,[]),e)}function O1(t){let e={},n={},r={},i="",o=new Bi([],e,r,i,n,Z,t,null,{});return new il("",new St(o,[]))}var zi=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,c,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ee(l=>l[js]))??W(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ee(e=>Hi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ee(e=>Hi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function rl(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),t.params),data:F(F({},e.data),t.data),resolve:F(F(F(F({},t.data),e.data),i?.data),t._resolvedData)}:r={params:F({},t.params),data:F({},t.data),resolve:F(F({},t.data),t._resolvedData??{})},i&&hb(i)&&(r.resolve[js]=i.title),r}var Bi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[js]}constructor(e,n,r,i,o,s,c,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=c,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Hi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Hi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},il=class extends tl{url;constructor(e,n){super(n),this.url=e,dg(this,n)}toString(){return db(this._root)}};function dg(t,e){e.value._routerState=t,e.children.forEach(n=>dg(t,n))}function db(t){let e=t.children.length>0?` { ${t.children.map(db).join(", ")} } `:"";return`${t.value}${e}`}function kp(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,on(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),on(e.params,n.params)||t.paramsSubject.next(n.params),a1(e.url,n.url)||t.urlSubject.next(n.url),on(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function ng(t,e){let n=on(t.params,e.params)&&d1(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||ng(t.parent,e.parent))}function hb(t){return typeof t.title=="string"||t.title===null}var k1=new V(""),L1=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Z;activateEvents=new vt;deactivateEvents=new vt;attachEvents=new vt;detachEvents=new vt;routerOutletData=Mw(void 0);parentContexts=R(al);location=R(Mu);changeDetector=R(Li);inputBinder=R(hg,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new U(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new U(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new U(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new U(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new rg(n,c,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=fp({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Nf]})}return t})(),rg=class t{route;childContexts;parent;outletData;__ngOutletInjector(e){return new t(this.route,this.childContexts,e,this.outletData)}constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===zi?this.route:e===al?this.childContexts:e===k1?this.outletData:this.parent.get(e,n)}},hg=new V("");function F1(t,e,n){let r=Ls(t,e._root,n?n._root:void 0);return new nl(r,e)}function Ls(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=V1(t,e,n);return new St(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(c=>Ls(t,c)),s}}let r=U1(e.value),i=e.children.map(o=>Ls(t,o));return new St(r,i)}}function V1(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ls(t,r,i);return Ls(t,r)})}function U1(t){return new zi(new Ge(t.url),new Ge(t.params),new Ge(t.queryParams),new Ge(t.fragment),new Ge(t.data),t.outlet,t.component,t)}var Fs=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},fb="ngNavigationCancelingError";function ol(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Ms(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=pb(!1,At.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function pb(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[fb]=!0,n.cancellationCode=e,n}function j1(t){return gb(t)&&Ms(t.url)}function gb(t){return!!t&&t[fb]}var B1=(t,e,n,r)=>ee(i=>(new ig(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),ig=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),kp(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Ui(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ui(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:c})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ui(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Ui(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Zp(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Yp(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(kp(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(c.contexts),s.attachRef=c.componentRef,s.route=c.route.value,s.outlet&&s.outlet.attach(c.componentRef,c.route.value),kp(c.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},sl=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},$i=class{component;route;constructor(e,n){this.component=e,this.route=n}};function $1(t,e,n){let r=t._root,i=e?e._root:null;return bs(r,i,n,[r.value])}function H1(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Wi(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!RI(t)?t:e.get(t):r}function bs(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ui(e);return t.children.forEach(s=>{q1(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,c])=>Rs(c,n.getContext(s),i)),i}function q1(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,c=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=z1(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new sl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?bs(t,e,c?c.children:null,r,i):bs(t,e,n,r,i),u&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new $i(c.outlet.component,s))}else s&&Rs(e,c,i),i.canActivateChecks.push(new sl(r)),o.component?bs(t,null,c?c.children:null,r,i):bs(t,null,n,r,i);return i}function z1(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!xr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!xr(t.url,e.url)||!on(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ng(t,e)||!on(t.queryParams,e.queryParams);case"paramsChange":default:return!ng(t,e)}}function Rs(t,e,n){let r=Ui(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Rs(s,e.children.getContext(o),n):Rs(s,null,n):Rs(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new $i(e.outlet.component,i)):n.canDeactivateChecks.push(new $i(null,i)):n.canDeactivateChecks.push(new $i(null,i))}function $s(t){return typeof t=="function"}function G1(t){return typeof t=="boolean"}function W1(t){return t&&$s(t.canLoad)}function K1(t){return t&&$s(t.canActivate)}function Q1(t){return t&&$s(t.canActivateChild)}function Y1(t){return t&&$s(t.canDeactivate)}function J1(t){return t&&$s(t.canMatch)}function mb(t){return t instanceof gn||t?.name==="EmptyError"}var Ku=Symbol("INITIAL_VALUE");function Gi(){return Pt(t=>fc(t.map(e=>e.pipe(mn(1),yc(Ku)))).pipe(ee(e=>{for(let n of e)if(n!==!0){if(n===Ku)return Ku;if(n===!1||Z1(n))return n}return!0}),gt(e=>e!==Ku),mn(1)))}function Z1(t){return Ms(t)||t instanceof Fs}function X1(t,e){return ke(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?W(Ee(F({},n),{guardsResult:!0})):eL(s,r,i,t).pipe(ke(c=>c&&G1(c)?tL(r,o,t,e):W(c)),ee(c=>Ee(F({},n),{guardsResult:c})))})}function eL(t,e,n,r){return Ae(t).pipe(ke(i=>sL(i.component,i.route,n,e,r)),yn(i=>i!==!0,!0))}function tL(t,e,n,r){return Ae(e).pipe(Er(i=>mi(rL(i.route.parent,r),nL(i.route,r),oL(t,i.path,n),iL(t,i.route,n))),yn(i=>i!==!0,!0))}function nL(t,e){return t!==null&&e&&e(new Jp(t)),W(!0)}function rL(t,e){return t!==null&&e&&e(new Qp(t)),W(!0)}function iL(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return W(!0);let i=r.map(o=>pc(()=>{let s=Bs(e)??n,c=Wi(o,s),u=K1(c)?c.canActivate(e,t):kt(s,()=>c(e,t));return tr(u).pipe(yn())}));return W(i).pipe(Gi())}function oL(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>H1(s)).filter(s=>s!==null).map(s=>pc(()=>{let c=s.guards.map(u=>{let l=Bs(s.node)??n,f=Wi(u,l),p=Q1(f)?f.canActivateChild(r,t):kt(l,()=>f(r,t));return tr(p).pipe(yn())});return W(c).pipe(Gi())}));return W(o).pipe(Gi())}function sL(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return W(!0);let s=o.map(c=>{let u=Bs(e)??i,l=Wi(c,u),f=Y1(l)?l.canDeactivate(t,e,n,r):kt(u,()=>l(t,e,n,r));return tr(f).pipe(yn())});return W(s).pipe(Gi())}function aL(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return W(!0);let o=i.map(s=>{let c=Wi(s,t),u=W1(c)?c.canLoad(e,n):kt(t,()=>c(e,n));return tr(u)});return W(o).pipe(Gi(),yb(r))}function yb(t){return Za(Re(e=>{if(typeof e!="boolean")throw ol(t,e)}),ee(e=>e===!0))}function cL(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return W(!0);let o=i.map(s=>{let c=Wi(s,t),u=J1(c)?c.canMatch(e,n):kt(t,()=>c(e,n));return tr(u)});return W(o).pipe(Gi(),yb(r))}var Vs=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Us=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Vi(t){return gi(new Vs(t))}function uL(t){return gi(new U(4e3,!1))}function lL(t){return gi(pb(!1,At.GuardRejected))}var og=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return W(r);if(i.numberOfChildren>1||!i.children[Z])return uL(`${e.redirectTo}`);i=i.children[Z]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let c=n,{queryParams:u,fragment:l,routeConfig:f,url:p,outlet:y,params:v,data:S,title:N}=i,M=kt(o,()=>c({params:v,data:S,queryParams:u,fragment:l,routeConfig:f,url:p,outlet:y,title:N}));if(M instanceof Dn)throw new Us(M);n=M}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Us(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Dn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let c=o.substring(1);r[i]=n[c]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([c,u])=>{s[c]=this.createSegmentGroup(e,u,r,i)}),new me(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new U(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},sg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function dL(t,e,n,r,i){let o=vb(t,e,n);return o.matched?(r=P1(e,r),cL(r,e,n,i).pipe(ee(s=>s===!0?o:F({},sg)))):W(o)}function vb(t,e,n){if(e.path==="**")return hL(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?F({},sg):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||s1)(n,t,e);if(!i)return F({},sg);let o={};Object.entries(i.posParams??{}).forEach(([c,u])=>{o[c]=u.path});let s=i.consumed.length>0?F(F({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function hL(t){return{matched:!0,parameters:t.length>0?JD(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function WD(t,e,n,r){return n.length>0&&gL(t,n,r)?{segmentGroup:new me(e,pL(r,new me(n,t.children))),slicedSegments:[]}:n.length===0&&mL(t,n,r)?{segmentGroup:new me(t.segments,fL(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new me(t.segments,t.children),slicedSegments:n}}function fL(t,e,n,r){let i={};for(let o of n)if(cl(t,e,o)&&!r[Gt(o)]){let s=new me([],{});i[Gt(o)]=s}return F(F({},r),i)}function pL(t,e){let n={};n[Z]=e;for(let r of t)if(r.path===""&&Gt(r)!==Z){let i=new me([],{});n[Gt(r)]=i}return n}function gL(t,e,n){return n.some(r=>cl(t,e,r)&&Gt(r)!==Z)}function mL(t,e,n){return n.some(r=>cl(t,e,r))}function cl(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function yL(t,e,n){return e.length===0&&!t.children[n]}var ag=class{};function vL(t,e,n,r,i,o,s="emptyOnly"){return new cg(t,e,n,r,i,s,o).recognize()}var EL=31,cg=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,c){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=c,this.applyRedirects=new og(this.urlSerializer,this.urlTree)}noMatchError(e){return new U(4002,`'${e.segmentGroup}'`)}recognize(){let e=WD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ee(({children:n,rootSnapshot:r})=>{let i=new St(r,n),o=new il("",i),s=b1(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Bi([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Z,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Z,n).pipe(ee(r=>({children:r,rootSnapshot:n})),$n(r=>{if(r instanceof Us)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Vs?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(ee(s=>s instanceof St?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ae(o).pipe(Er(s=>{let c=r.children[s],u=x1(n,s);return this.processSegmentGroup(e,u,c,s,i)}),mc((s,c)=>(s.push(...c),s)),Hn(null),fh(),ke(s=>{if(s===null)return Vi(r);let c=Eb(s);return _L(c),W(c)}))}processSegment(e,n,r,i,o,s,c){return Ae(n).pipe(Er(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,c).pipe($n(l=>{if(l instanceof Vs)return W(null);throw l}))),yn(u=>!!u),$n(u=>{if(mb(u))return yL(r,i,o)?W(new ag):Vi(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,c,u){return Gt(r)!==s&&(s===Z||!cl(i,o,r))?Vi(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):Vi(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,c){let{matched:u,parameters:l,consumedSegments:f,positionalParamSegments:p,remainingSegments:y}=vb(n,i,o);if(!u)return Vi(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>EL&&(this.allowRedirects=!1));let v=new Bi(o,l,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,KD(i),Gt(i),i.component??i._loadedComponent??null,i,QD(i)),S=rl(v,c,this.paramsInheritanceStrategy);v.params=Object.freeze(S.params),v.data=Object.freeze(S.data);let N=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(ke(M=>this.processSegment(e,r,n,M.concat(y),s,!1,c)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let c=dL(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),c.pipe(Pt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Pt(({routes:l})=>{let f=r._loadedInjector??e,{parameters:p,consumedSegments:y,remainingSegments:v}=u,S=new Bi(y,p,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,KD(r),Gt(r),r.component??r._loadedComponent??null,r,QD(r)),N=rl(S,s,this.paramsInheritanceStrategy);S.params=Object.freeze(N.params),S.data=Object.freeze(N.data);let{segmentGroup:M,slicedSegments:L}=WD(n,y,v,l);if(L.length===0&&M.hasChildren())return this.processChildren(f,l,M,S).pipe(ee(J=>new St(S,J)));if(l.length===0&&L.length===0)return W(new St(S,[]));let H=Gt(r)===o;return this.processSegment(f,l,M,L,H?Z:o,!0,S).pipe(ee(J=>new St(S,J instanceof St?[J]:[])))}))):Vi(n)))}getChildConfig(e,n,r){return n.children?W({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?W({routes:n._loadedRoutes,injector:n._loadedInjector}):aL(e,n,r,this.urlSerializer).pipe(ke(i=>i?this.configLoader.loadChildren(e,n).pipe(Re(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):lL(n))):W({routes:[],injector:e})}};function _L(t){t.sort((e,n)=>e.value.outlet===Z?-1:n.value.outlet===Z?1:e.value.outlet.localeCompare(n.value.outlet))}function IL(t){let e=t.value.routeConfig;return e&&e.path===""}function Eb(t){let e=[],n=new Set;for(let r of t){if(!IL(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=Eb(r.children);e.push(new St(r.value,i))}return e.filter(r=>!n.has(r))}function KD(t){return t.data||{}}function QD(t){return t.resolve||{}}function wL(t,e,n,r,i,o){return ke(s=>vL(t,e,n,r,s.extractedUrl,i,o).pipe(ee(({state:c,tree:u})=>Ee(F({},s),{targetSnapshot:c,urlAfterRedirects:u}))))}function TL(t,e){return ke(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return W(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of _b(u))s.add(l);let c=0;return Ae(s).pipe(Er(u=>o.has(u)?DL(u,r,t,e):(u.data=rl(u,u.parent,t).resolve,W(void 0))),Re(()=>c++),vi(1),ke(u=>c===s.size?W(n):pt))})}function _b(t){let e=t.children.map(n=>_b(n)).flat();return[t,...e]}function DL(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!hb(i)&&(o[js]=i.title),bL(o,t,e,r).pipe(ee(s=>(t._resolvedData=s,t.data=rl(t,t.parent,n).resolve,null)))}function bL(t,e,n,r){let i=Vp(t);if(i.length===0)return W({});let o={};return Ae(i).pipe(ke(s=>CL(t[s],e,n,r).pipe(yn(),Re(c=>{if(c instanceof Fs)throw ol(new Ns,c);o[s]=c}))),vi(1),hh(o),$n(s=>mb(s)?pt:gi(s)))}function CL(t,e,n,r){let i=Bs(e)??r,o=Wi(t,i),s=o.resolve?o.resolve(e,n):kt(i,()=>o(e,n));return tr(s)}function Lp(t){return Pt(e=>{let n=t(e);return n?Ae(n).pipe(ee(()=>e)):W(e)})}var Ib=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Z);return r}getResolvedTitleForRoute(n){return n.data[js]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>R(SL),providedIn:"root"})}return t})(),SL=(()=>{class t extends Ib{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(ne(jD))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),fg=new V("",{providedIn:"root",factory:()=>({})}),AL=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=xu({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(r,i){r&1&&mp(0,"router-outlet")},dependencies:[L1],encapsulation:2})}return t})();function pg(t){let e=t.children&&t.children.map(pg),n=e?Ee(F({},t),{children:e}):F({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Z&&(n.component=AL),n}var gg=new V(""),RL=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=R(vp);loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return W(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=tr(n.loadComponent()).pipe(ee(wb),Re(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),yi(()=>{this.componentLoaders.delete(n)})),i=new di(r,()=>new et).pipe(li());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return W({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=NL(r,this.compiler,n,this.onLoadEndListener).pipe(yi(()=>{this.childrenLoaders.delete(r)})),s=new di(o,()=>new et).pipe(li());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function NL(t,e,n,r){return tr(t.loadChildren()).pipe(ee(wb),ke(i=>i instanceof os||Array.isArray(i)?W(i):Ae(e.compileModuleAsync(i))),ee(i=>{r&&r(t);let o,s,c=!1;return Array.isArray(i)?(s=i,c=!0):(o=i.create(n).injector,s=o.get(gg,[],{optional:!0,self:!0}).flat()),{routes:s.map(pg),injector:o}}))}function ML(t){return t&&typeof t=="object"&&"default"in t}function wb(t){return ML(t)?t.default:t}var mg=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>R(PL),providedIn:"root"})}return t})(),PL=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),xL=new V("");var OL=new V(""),kL=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new et;transitionAbortSubject=new et;configLoader=R(RL);environmentInjector=R(It);urlSerializer=R(lg);rootContexts=R(al);location=R(Es);inputBindingEnabled=R(hg,{optional:!0})!==null;titleStrategy=R(Ib);options=R(fg,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=R(mg);createViewTransition=R(xL,{optional:!0});navigationErrorHandler=R(OL,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>W(void 0);rootComponentType=null;constructor(){let n=i=>this.events.next(new Wp(i)),r=i=>this.events.next(new Kp(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(Ee(F(F({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new Ge({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:As,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(gt(o=>o.id!==0),ee(o=>Ee(F({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Pt(o=>{let s=!1,c=!1;return W(o).pipe(Pt(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",At.SupersededByNewNavigation),pt;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?Ee(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=u.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&f!=="reload"){let p="";return this.events.next(new kr(u.id,this.urlSerializer.serialize(u.rawUrl),p,$p.IgnoredSameUrlNavigation)),u.resolve(!1),pt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return W(u).pipe(Pt(p=>{let y=this.transitions?.getValue();return this.events.next(new xs(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),y!==this.transitions?.getValue()?pt:Promise.resolve(p)}),wL(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Re(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=Ee(F({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let y=new el(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(y)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:y,source:v,restoredState:S,extras:N}=u,M=new xs(p,this.urlSerializer.serialize(y),v,S);this.events.next(M);let L=lb(this.rootComponentType).snapshot;return this.currentTransition=o=Ee(F({},u),{targetSnapshot:L,urlAfterRedirects:y,extras:Ee(F({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,W(o)}else{let p="";return this.events.next(new kr(u.id,this.urlSerializer.serialize(u.extractedUrl),p,$p.IgnoredByUrlHandlingStrategy)),u.resolve(!1),pt}}),Re(u=>{let l=new Hp(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),ee(u=>(this.currentTransition=o=Ee(F({},u),{guards:$1(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),X1(this.environmentInjector,u=>this.events.next(u)),Re(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw ol(this.urlSerializer,u.guardsResult);let l=new qp(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),gt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",At.GuardRejected),!1)),Lp(u=>{if(u.guards.canActivateChecks.length)return W(u).pipe(Re(l=>{let f=new zp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}),Pt(l=>{let f=!1;return W(l).pipe(TL(this.paramsInheritanceStrategy,this.environmentInjector),Re({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(l,"",At.NoDataFromResolver)}}))}),Re(l=>{let f=new Gp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}))}),Lp(u=>{let l=f=>{let p=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(f.routeConfig).pipe(Re(y=>{f.component=y}),ee(()=>{})));for(let y of f.children)p.push(...l(y));return p};return fc(l(u.targetSnapshot.root)).pipe(Hn(null),mn(1))}),Lp(()=>this.afterPreactivation()),Pt(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,f=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return f?Ae(f).pipe(ee(()=>o)):W(o)}),ee(u=>{let l=F1(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=Ee(F({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Re(()=>{this.events.next(new ks)}),B1(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),mn(1),Re({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Or(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),ph(this.transitionAbortSubject.pipe(Re(u=>{throw u}))),yi(()=>{!s&&!c&&this.cancelNavigationTransition(o,"",At.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),$n(u=>{if(c=!0,gb(u))this.events.next(new Tn(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),j1(u)?this.events.next(new qi(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Os(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let f=kt(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(f instanceof Fs){let{message:p,cancellationCode:y}=ol(this.urlSerializer,f);this.events.next(new Tn(o.id,this.urlSerializer.serialize(o.extractedUrl),p,y)),this.events.next(new qi(f.redirectTo,f.navigationBehaviorOptions))}else throw this.events.next(l),u}catch(f){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(f)}}return pt}))}))}cancelNavigationTransition(n,r,i){let o=new Tn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function LL(t){return t!==As}var FL=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>R(VL),providedIn:"root"})}return t})(),ug=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},VL=(()=>{class t extends ug{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Uf(t)))(i||t)}})();static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Tb=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>R(UL),providedIn:"root"})}return t})(),UL=(()=>{class t extends Tb{location=R(Es);urlSerializer=R(lg);options=R(fg,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=R(mg);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Dn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=lb(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof xs)this.stateMemento=this.createStateMemento();else if(n instanceof kr)this.rawUrlTree=r.initialUrl;else if(n instanceof el){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof ks?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof Tn&&(n.code===At.GuardRejected||n.code===At.NoDataFromResolver)?this.restoreHistory(r):n instanceof Os?this.restoreHistory(r,!0):n instanceof Or&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof Dn?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=F(F({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=F(F({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===n.finalUrl&&o===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Uf(t)))(i||t)}})();static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Cs=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Cs||{});function jL(t,e){t.events.pipe(gt(n=>n instanceof Or||n instanceof Tn||n instanceof Os||n instanceof kr),ee(n=>n instanceof Or||n instanceof kr?Cs.COMPLETE:(n instanceof Tn?n.code===At.Redirect||n.code===At.SupersededByNewNavigation:!1)?Cs.REDIRECTING:Cs.FAILED),gt(n=>n!==Cs.REDIRECTING),mn(1)).subscribe(()=>{e()})}var BL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$L={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Db=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=R(ku);stateManager=R(Tb);options=R(fg,{optional:!0})||{};pendingTasks=R(rn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=R(kL);urlSerializer=R(lg);location=R(Es);urlHandlingStrategy=R(mg);_events=new et;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=R(FL);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=R(gg,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!R(hg,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Se;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Tn&&r.code!==At.Redirect&&r.code!==At.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Or)this.navigated=!0;else if(r instanceof qi){let s=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||LL(i.source)},s);this.scheduleNavigation(c,As,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}qL(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),As,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=F({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(n);this.scheduleNavigation(c,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(pg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:c,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,f=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":f=F(F({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let p;try{let y=i?i.snapshot:this.routerState.snapshot.root;p=sb(y)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return ab(p,n,f,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Ms(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,As,null,r)}navigate(n,r={skipLocationChange:!1}){return HL(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=F({},BL):r===!1?i=F({},$L):i=r,Ms(n))return HD(this.currentUrlTree,n,i);let o=this.parseUrl(n);return HD(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let c,u,l;s?(c=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,y)=>{c=p,u=y});let f=this.pendingTasks.add();return jL(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function HL(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new U(4008,!1)}function qL(t){return!(t instanceof ks)&&!(t instanceof qi)}var zL=new V("");function bb(t,...e){return bt([{provide:gg,multi:!0,useValue:t},[],{provide:zi,useFactory:GL,deps:[Db]},{provide:Nr,multi:!0,useFactory:WL},e.map(n=>n.\u0275providers)])}function GL(t){return t.routerState.root}function WL(){let t=R(Be);return e=>{let n=t.get(ut);if(e!==n.components[0])return;let r=t.get(Db),i=t.get(KL);t.get(QL)===1&&r.initialNavigation(),t.get(YL,null,te.Optional)?.setUpPreloading(),t.get(zL,null,te.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var KL=new V("",{factory:()=>new et}),QL=new V("",{providedIn:"root",factory:()=>1});var YL=new V("");var Sb=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},JL=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],c=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Ab={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,c=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,f=o>>2,p=(o&3)<<4|c>>4,y=(c&15)<<2|l>>6,v=l&63;u||(v=64,s||(y=64)),r.push(n[f],n[p],n[y],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Sb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):JL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||c==null||l==null||p==null)throw new vg;let y=o<<2|c>>4;if(r.push(y),l!==64){let v=c<<4&240|l>>2;if(r.push(v),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},vg=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},ZL=function(t){let e=Sb(t);return Ab.encodeByteArray(e,!0)},Hs=function(t){return ZL(t).replace(/\./g,"")},_g=function(t){try{return Ab.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function XL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var eF=()=>XL().__FIREBASE_DEFAULTS__,tF=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},nF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&_g(t[1]);return e&&JSON.parse(e)},ll=()=>{try{return eF()||tF()||nF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Rb=t=>{var e,n;return(n=(e=ll())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Nb=t=>{let e=Rb(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ig=()=>{var t;return(t=ll())===null||t===void 0?void 0:t.config},Mb=t=>{var e;return(e=ll())===null||e===void 0?void 0:e[`_${t}`]};var ul=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Pb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Hs(JSON.stringify(n)),Hs(JSON.stringify(s)),""].join(".")}function Nt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nt())}function rF(){var t;let e=(t=ll())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ob(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qs(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function kb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Lb(){return!rF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ki(){try{return typeof indexedDB=="object"}catch{return!1}}function zs(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function wg(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var iF="FirebaseError",nt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=iF,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rt.prototype.create)}},Rt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?oF(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new nt(i,c,r)}};function oF(t,e){return t.replace(sF,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var sF=/\{\$([^}]+)}/g;function nr(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(Cb(o)&&Cb(s)){if(!nr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function Cb(t){return t!==null&&typeof t=="object"}function Tg(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Fb(t,e){let n=new Eg(t,e);return n.subscribe.bind(n)}var Eg=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");aF(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=yg),i.error===void 0&&(i.error=yg),i.complete===void 0&&(i.complete=yg);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function aF(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function yg(){}var cF=1e3,uF=2,lF=4*60*60*1e3,dF=.5;function Dg(t,e=cF,n=uF){let r=e*Math.pow(n,t),i=Math.round(dF*r*(Math.random()-.5)*2);return Math.min(lF,r+i)}function Wt(t){return t&&t._delegate?t._delegate:t}var $e=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Lr="[DEFAULT]";var bg=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new ul;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fF(e))try{this.getOrInitializeService({instanceIdentifier:Lr})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Lr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return b(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Lr){return this.instances.has(e)}getOptions(e=Lr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hF(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Lr){return this.component?this.component.multipleInstances?e:Lr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function hF(t){return t===Lr?void 0:t}function fF(t){return t.instantiationMode==="EAGER"}var dl=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new bg(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var pF=[],re=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(re||{}),gF={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},mF=re.INFO,yF={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},vF=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=yF[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},sn=class{constructor(e){this.name=e,this._logLevel=mF,this._logHandler=vF,this._userLogHandler=null,pF.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...e),this._logHandler(this,re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...e),this._logHandler(this,re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,re.INFO,...e),this._logHandler(this,re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,re.WARN,...e),this._logHandler(this,re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...e),this._logHandler(this,re.ERROR,...e)}};var EF=(t,e)=>e.some(n=>t instanceof n),Vb,Ub;function _F(){return Vb||(Vb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IF(){return Ub||(Ub=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var jb=new WeakMap,Sg=new WeakMap,Bb=new WeakMap,Cg=new WeakMap,Rg=new WeakMap;function wF(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(an(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&jb.set(n,t)}).catch(()=>{}),Rg.set(e,t),e}function TF(t){if(Sg.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Sg.set(t,e)}var Ag={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Sg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Bb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return an(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $b(t){Ag=t(Ag)}function DF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(hl(this),e,...n);return Bb.set(r,e.sort?e.sort():[e]),an(r)}:IF().includes(t)?function(...e){return t.apply(hl(this),e),an(jb.get(this))}:function(...e){return an(t.apply(hl(this),e))}}function bF(t){return typeof t=="function"?DF(t):(t instanceof IDBTransaction&&TF(t),EF(t,_F())?new Proxy(t,Ag):t)}function an(t){if(t instanceof IDBRequest)return wF(t);if(Cg.has(t))return Cg.get(t);let e=bF(t);return e!==t&&(Cg.set(t,e),Rg.set(e,t)),e}var hl=t=>Rg.get(t);function fl(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),c=an(s);return r&&s.addEventListener("upgradeneeded",u=>{r(an(s.result),u.oldVersion,u.newVersion,an(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var CF=["get","getKey","getAll","getAllKeys","count"],SF=["put","add","delete","clear"],Ng=new Map;function Hb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ng.get(e))return Ng.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=SF.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||CF.includes(n)))return;let o=function(s,...c){return b(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[n](...c),i&&u.done]))[0]})};return Ng.set(e,o),o}$b(t=>Ee(F({},t),{get:(e,n,r)=>Hb(e,n)||t.get(e,n,r),has:(e,n)=>!!Hb(e,n)||t.has(e,n)}));var Pg=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(AF(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function AF(t){let e=t.getComponent();return e?.type==="VERSION"}var xg="@firebase/app",qb="0.10.17";var bn=new sn("@firebase/app"),RF="@firebase/app-compat",NF="@firebase/analytics-compat",MF="@firebase/analytics",PF="@firebase/app-check-compat",xF="@firebase/app-check",OF="@firebase/auth",kF="@firebase/auth-compat",LF="@firebase/database",FF="@firebase/data-connect",VF="@firebase/database-compat",UF="@firebase/functions",jF="@firebase/functions-compat",BF="@firebase/installations",$F="@firebase/installations-compat",HF="@firebase/messaging",qF="@firebase/messaging-compat",zF="@firebase/performance",GF="@firebase/performance-compat",WF="@firebase/remote-config",KF="@firebase/remote-config-compat",QF="@firebase/storage",YF="@firebase/storage-compat",JF="@firebase/firestore",ZF="@firebase/vertexai",XF="@firebase/firestore-compat",eV="firebase",tV="11.1.0";var Og="[DEFAULT]",nV={[xg]:"fire-core",[RF]:"fire-core-compat",[MF]:"fire-analytics",[NF]:"fire-analytics-compat",[xF]:"fire-app-check",[PF]:"fire-app-check-compat",[OF]:"fire-auth",[kF]:"fire-auth-compat",[LF]:"fire-rtdb",[FF]:"fire-data-connect",[VF]:"fire-rtdb-compat",[UF]:"fire-fn",[jF]:"fire-fn-compat",[BF]:"fire-iid",[$F]:"fire-iid-compat",[HF]:"fire-fcm",[qF]:"fire-fcm-compat",[zF]:"fire-perf",[GF]:"fire-perf-compat",[WF]:"fire-rc",[KF]:"fire-rc-compat",[QF]:"fire-gcs",[YF]:"fire-gcs-compat",[JF]:"fire-fst",[XF]:"fire-fst-compat",[ZF]:"fire-vertex","fire-js":"fire-js",[eV]:"fire-js-all"};var Gs=new Map,rV=new Map,kg=new Map;function zb(t,e){try{t.container.addComponent(e)}catch(n){bn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function lt(t){let e=t.name;if(kg.has(e))return bn.debug(`There were multiple attempts to register component ${e}.`),!1;kg.set(e,t);for(let n of Gs.values())zb(n,t);for(let n of rV.values())zb(n,t);return!0}function Cn(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Qi(t){return t.settings!==void 0}var iV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rr=new Rt("app","Firebase",iV);var Lg=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $e("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rr.create("app-deleted",{appName:this._name})}};var Yi=tV;function Ug(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Og,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw rr.create("bad-app-name",{appName:String(i)});if(n||(n=Ig()),!n)throw rr.create("no-options");let o=Gs.get(i);if(o){if(nr(n,o.options)&&nr(r,o.config))return o;throw rr.create("duplicate-app",{appName:i})}let s=new dl(i);for(let u of kg.values())s.addComponent(u);let c=new Lg(n,r,s);return Gs.set(i,c),c}function ir(t=Og){let e=Gs.get(t);if(!e&&t===Og&&Ig())return Ug();if(!e)throw rr.create("no-app",{appName:t});return e}function pl(){return Array.from(Gs.values())}function Ie(t,e,n){var r;let i=(r=nV[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bn.warn(c.join(" "));return}lt(new $e(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var oV="firebase-heartbeat-database",sV=1,Ws="firebase-heartbeat-store",Mg=null;function Qb(){return Mg||(Mg=fl(oV,sV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ws)}catch(n){console.warn(n)}}}}).catch(t=>{throw rr.create("idb-open",{originalErrorMessage:t.message})})),Mg}function aV(t){return b(this,null,function*(){try{let n=(yield Qb()).transaction(Ws),r=yield n.objectStore(Ws).get(Yb(t));return yield n.done,r}catch(e){if(e instanceof nt)bn.warn(e.message);else{let n=rr.create("idb-get",{originalErrorMessage:e?.message});bn.warn(n.message)}}})}function Gb(t,e){return b(this,null,function*(){try{let r=(yield Qb()).transaction(Ws,"readwrite");yield r.objectStore(Ws).put(e,Yb(t)),yield r.done}catch(n){if(n instanceof nt)bn.warn(n.message);else{let r=rr.create("idb-set",{originalErrorMessage:n?.message});bn.warn(r.message)}}})}function Yb(t){return`${t.name}!${t.options.appId}`}var cV=1024,uV=30*24*60*60*1e3,Fg=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Vg(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return b(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Wb();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let c=new Date(s.date).valueOf();return Date.now()-c<=uV}),this._storage.overwrite(this._heartbeatsCache))}catch(r){bn.warn(r)}})}getHeartbeatsHeader(){return b(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=Wb(),{heartbeatsToSend:r,unsentEntries:i}=lV(this._heartbeatsCache.heartbeats),o=Hs(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return bn.warn(n),""}})}};function Wb(){return new Date().toISOString().substring(0,10)}function lV(t,e=cV){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Kb(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Kb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Vg=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return b(this,null,function*(){return Ki()?zs().then(()=>!0).catch(()=>!1):!1})}read(){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield aV(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return b(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Gb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return b(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Gb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Kb(t){return Hs(JSON.stringify({version:2,heartbeats:t})).length}function dV(t){lt(new $e("platform-logger",e=>new Pg(e),"PRIVATE")),lt(new $e("heartbeat",e=>new Fg(e),"PRIVATE")),Ie(xg,qb,t),Ie(xg,qb,"esm2017"),Ie("fire-js","")}dV("");var hV="firebase",fV="11.1.0";Ie(hV,fV,"app");var or=new Xn("ANGULARFIRE2_VERSION"),Jb=t=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${t} in the constructor, first ensure that ${t} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${t})\`.`;function Ys(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Vr=(t,e)=>{let n=e?[e]:pl(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Ks=class{constructor(){return Vr(pV)}},pV="app-check",gl=class{zone;delegate;constructor(e,n=ch){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},jg=class{zone;pendingTasks;constructor(e,n){this.zone=e,this.pendingTasks=n}call(e,n){let r=this.zone.run(()=>this.pendingTasks.add()),i=()=>setTimeout(r,10);return n.pipe(Re({next:i,complete:i,error:i})).subscribe(e).add(i)}},Ur=(()=>{class t{ngZone;pendingTasks;outsideAngular;insideAngular;constructor(n,r){this.ngZone=n,this.pendingTasks=r,this.outsideAngular=n.runOutsideAngular(()=>new gl(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new gl(typeof Zone>"u"?void 0:Zone.current,ah)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(ne(ye),ne(Aw))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Qs(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function gV(t){return Qs().ngZone.runOutsideAngular(()=>t())}function Fr(t){return Qs().ngZone.run(()=>t())}function mV(t){return yV(Qs())(t)}function yV(t){return function(n){return n=n.lift(new jg(t.ngZone,t.pendingTasks)),n.pipe(Bn(t.outsideAngular),jn(t.insideAngular))}}var vV=(t,e)=>(...n)=>(e&&setTimeout(e,10),Fr(()=>t.apply(void 0,n))),Sn=(t,e)=>function(){let n,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(n||=Fr(()=>Qs().pendingTasks.add())),r[o]=vV(r[o],n));let i=gV(()=>t.apply(this,r));if(!e)if(i instanceof ie){let o=Qs();return i.pipe(Bn(o.outsideAngular),jn(o.insideAngular))}else return Fr(()=>i);return i instanceof ie?i.pipe(mV):i instanceof Promise?Fr(()=>new Promise((o,s)=>{i.then(c=>Fr(()=>o(c)),c=>Fr(()=>s(c)))})):typeof i=="function"&&n?function(){return setTimeout(n,10),i.apply(this,arguments)}:Fr(()=>i)};var An=class{constructor(e){return e}},jr=class{constructor(){return pl()}};function EV(t){return t&&t.length===1?t[0]:new An(ir())}var Bg=new V("angularfire2._apps"),_V={provide:An,useFactory:EV,deps:[[new Dt,Bg]]},IV={provide:jr,deps:[[new Dt,Bg]]};function wV(t){return(e,n)=>{let r=n.get(zt);Ie("angularfire",or.full,"core"),Ie("angularfire",or.full,"app"),Ie("angular",iD.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new An(i)}}function Zb(t,...e){return bt([_V,IV,{provide:Bg,useFactory:wV(t),multi:!0,deps:[ye,Be,Ur,...e]}])}var Xb=Sn(Ug,!0);var eC=[];function cC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var uC=cC,lC=new Rt("auth","Firebase",cC());var El=new sn("@firebase/auth");function DV(t,...e){El.logLevel<=re.WARN&&El.warn(`Auth (${Yi}): ${t}`,...e)}function yl(t,...e){El.logLevel<=re.ERROR&&El.error(`Auth (${Yi}): ${t}`,...e)}function tC(t,...e){throw Xg(t,...e)}function Zg(t,...e){return Xg(t,...e)}function dC(t,e,n){let r=Object.assign(Object.assign({},uC()),{[e]:n});return new Rt("auth","Firebase",r).create(e,{appName:t.name})}function vl(t){return dC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xg(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return lC.create(t,...e)}function ge(t,e,...n){if(!t)throw Xg(e,...n)}function Js(t){let e="INTERNAL ASSERTION FAILED: "+t;throw yl(e),new Error(e)}function _l(t,e){t||Js(e)}function bV(){return nC()==="http:"||nC()==="https:"}function nC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function CV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bV()||qs()||"connection"in navigator)?navigator.onLine:!0}function SV(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var $r=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,_l(n>e,"Short delay should be less than long delay!"),this.isMobile=xb()||kb()}get(){return CV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function AV(t,e){_l(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Il=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Js("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Js("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Js("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var RV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var NV=new $r(3e4,6e4);function hC(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function bl(o,s,c,u){return b(this,arguments,function*(t,e,n,r,i={}){return fC(t,i,()=>b(this,null,function*(){let l={},f={};r&&(e==="GET"?f=r:l={body:JSON.stringify(r)});let p=Tg(Object.assign({key:t.config.apiKey},f)).slice(1),y=yield t._getAdditionalHeaders();y["Content-Type"]="application/json",t.languageCode&&(y["X-Firebase-Locale"]=t.languageCode);let v=Object.assign({method:e,headers:y},l);return Ob()||(v.referrerPolicy="no-referrer"),Il.fetch()(pC(t,t.config.apiHost,n,p),v)}))})}function fC(t,e,n){return b(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},RV),e);try{let i=new qg(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw ml(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let c=o.ok?s.errorMessage:s.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw ml(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw ml(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw ml(t,"user-disabled",s);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw dC(t,f,l);tC(t,f)}}catch(i){if(i instanceof nt)throw i;tC(t,"network-request-failed",{message:String(i)})}})}function pC(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?AV(t.config,i):`${t.config.apiScheme}://${i}`}var qg=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Zg(this.auth,"network-request-failed")),NV.get())})}};function ml(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Zg(t,e,r);return i.customData._tokenResponse=n,i}function MV(t,e){return b(this,null,function*(){return bl(t,"POST","/v1/accounts:delete",e)})}function gC(t,e){return b(this,null,function*(){return bl(t,"POST","/v1/accounts:lookup",e)})}function Zs(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function em(t,e=!1){return b(this,null,function*(){let n=Wt(t),r=yield n.getIdToken(e),i=mC(r);ge(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Zs($g(i.auth_time)),issuedAtTime:Zs($g(i.iat)),expirationTime:Zs($g(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function $g(t){return Number(t)*1e3}function mC(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return yl("JWT malformed, contained fewer than 3 sections"),null;try{let i=_g(n);return i?JSON.parse(i):(yl("Failed to decode base64 JWT payload"),null)}catch(i){return yl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function rC(t){let e=mC(t);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function zg(t,e,n=!1){return b(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof nt&&PV(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function PV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Gg=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>b(this,null,function*(){yield this.iteration()}),n)}iteration(){return b(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var ea=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zs(this.lastLoginAt),this.creationTime=Zs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function wl(t){return b(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield zg(t,gC(n,{idToken:r}));ge(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?yC(o.providerUserInfo):[],c=xV(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!c?.length,f=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new ea(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(t,p)})}function tm(t){return b(this,null,function*(){let e=Wt(t);yield wl(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function xV(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function yC(t){return t.map(e=>{var{providerId:n}=e,r=uh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function OV(t,e){return b(this,null,function*(){let n=yield fC(t,{},()=>b(this,null,function*(){let r=Tg({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=pC(t,i,"/v1/token",`key=${o}`),c=yield t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Il.fetch()(s,{method:"POST",headers:c,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function kV(t,e){return b(this,null,function*(){return bl(t,"POST","/v2/accounts:revokeToken",hC(t,e))})}var Xs=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ge(e.length!==0,"internal-error");let n=rC(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return b(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return b(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield OV(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(ge(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ge(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ge(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Js("not implemented")}};function sr(t,e){ge(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var ta=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=uh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gg(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ea(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return b(this,null,function*(){let n=yield zg(this,this.stsTokenManager.getToken(this.auth,e));return ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return em(this,e)}reload(){return tm(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return b(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield wl(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return b(this,null,function*(){if(Qi(this.auth.app))return Promise.reject(vl(this.auth));let e=yield this.getIdToken();return yield zg(this,MV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,c,u,l,f;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(i=n.email)!==null&&i!==void 0?i:void 0,v=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,S=(s=n.photoURL)!==null&&s!==void 0?s:void 0,N=(c=n.tenantId)!==null&&c!==void 0?c:void 0,M=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,L=(l=n.createdAt)!==null&&l!==void 0?l:void 0,H=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:J,emailVerified:oe,isAnonymous:be,providerData:X,stsTokenManager:w}=n;ge(J&&w,e,"internal-error");let m=Xs.fromJSON(this.name,w);ge(typeof J=="string",e,"internal-error"),sr(p,e.name),sr(y,e.name),ge(typeof oe=="boolean",e,"internal-error"),ge(typeof be=="boolean",e,"internal-error"),sr(v,e.name),sr(S,e.name),sr(N,e.name),sr(M,e.name),sr(L,e.name),sr(H,e.name);let E=new t({uid:J,auth:e,email:y,emailVerified:oe,displayName:p,isAnonymous:be,photoURL:S,phoneNumber:v,tenantId:N,stsTokenManager:m,createdAt:L,lastLoginAt:H});return X&&Array.isArray(X)&&(E.providerData=X.map(I=>Object.assign({},I))),M&&(E._redirectEventId=M),E}static _fromIdTokenResponse(e,n,r=!1){return b(this,null,function*(){let i=new Xs;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield wl(o),o})}static _fromGetAccountInfoResponse(e,n,r){return b(this,null,function*(){let i=n.users[0];ge(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?yC(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,c=new Xs;c.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ea(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var iC=new Map;function Br(t){_l(t instanceof Function,"Expected a class definition");let e=iC.get(t);return e?(_l(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,iC.set(t,e),e)}var LV=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return b(this,null,function*(){return!0})}_set(n,r){return b(this,null,function*(){this.storage[n]=r})}_get(n){return b(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return b(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Wg=LV;function Hg(t,e,n){return`firebase:${t}:${e}:${n}`}var Tl=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Hg(this.userKey,i.apiKey,o),this.fullPersistenceKey=Hg("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return b(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?ta._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return b(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return b(this,null,function*(){if(!n.length)return new t(Br(Wg),e,r);let i=(yield Promise.all(n.map(l=>b(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Br(Wg),s=Hg(r,e.config.apiKey,e.name),c=null;for(let l of n)try{let f=yield l._get(s);if(f){let p=ta._fromJSON(e,f);l!==o&&(c=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],c&&(yield o._set(s,c.toJSON())),yield Promise.all(n.map(l=>b(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function oC(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($V(e))return"Blackberry";if(HV(e))return"Webos";if(VV(e))return"Safari";if((e.includes("chrome/")||UV(e))&&!e.includes("edge/"))return"Chrome";if(BV(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function FV(t=Nt()){return/firefox\//i.test(t)}function VV(t=Nt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function UV(t=Nt()){return/crios\//i.test(t)}function jV(t=Nt()){return/iemobile/i.test(t)}function BV(t=Nt()){return/android/i.test(t)}function $V(t=Nt()){return/blackberry/i.test(t)}function HV(t=Nt()){return/webos/i.test(t)}function vC(t,e=[]){let n;switch(t){case"Browser":n=oC(Nt());break;case"Worker":n=`${oC(Nt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Yi}/${r}`}var Kg=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,c)=>{try{let u=e(o);s(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return b(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function qV(n){return b(this,arguments,function*(t,e={}){return bl(t,"GET","/v2/passwordPolicy",hC(t,e))})}var zV=6,Qg=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:zV,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Yg=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dl(this),this.idTokenSubscription=new Dl(this),this.beforeStateQueue=new Kg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Br(n)),this._initializationPromise=this.queue(()=>b(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Tl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return b(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return b(this,null,function*(){try{let n=yield gC(this,{idToken:e}),r=yield ta._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return b(this,null,function*(){var n;if(Qi(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===c)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return b(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return b(this,null,function*(){try{yield wl(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=SV()}_delete(){return b(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return b(this,null,function*(){if(Qi(this.app))return Promise.reject(vl(this));let n=e?Wt(e):null;return n&&ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return b(this,null,function*(){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>b(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return b(this,null,function*(){return Qi(this.app)?Promise.reject(vl(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Qi(this.app)?Promise.reject(vl(this)):this.queue(()=>b(this,null,function*(){yield this.assertedPersistence.setPersistence(Br(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return b(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return b(this,null,function*(){let e=yield qV(this),n=new Qg(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Rt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return b(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield kV(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return b(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return b(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Br(e)||this._popupRedirectResolver;ge(n,this,"argument-error"),this.redirectPersistenceManager=yield Tl.create(this,[Br(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return b(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>b(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return b(this,null,function*(){if(e===this.currentUser)return this.queue(()=>b(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(c,this,"internal-error"),c.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return b(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return b(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return b(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&DV(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function GV(t){return Wt(t)}var Dl=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Fb(n=>this.observer=n)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var WV={loadJS(){return b(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KV(t){WV=t}function QV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function YV(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Br);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var _6=QV("rcb"),I6=new $r(3e4,6e4);var w6=new $r(2e3,1e4);var T6=10*60*1e3;var D6=new $r(3e4,6e4);var b6=new $r(5e3,15e3);var C6=encodeURIComponent("fac");var sC="@firebase/auth",aC="1.8.1";var Jg=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return b(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function JV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZV(t){lt(new $e("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=r.options;ge(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vC(t)},l=new Yg(r,i,o,u);return YV(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),lt(new $e("auth-internal",e=>{let n=GV(e.getProvider("auth").getImmediate());return(r=>new Jg(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ie(sC,aC,JV(t)),Ie(sC,aC,"esm2017")}var XV=5*60,S6=Mb("authIdTokenMaxAge")||XV;function eU(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}KV({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Zg("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",eU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZV("Browser");var XU="auth";var Cl=class{constructor(){return Vr(XU)}};var EC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_C={};var ar,nm;(function(){var t;function e(w,m){function E(){}E.prototype=m.prototype,w.D=m.prototype,w.prototype=new E,w.prototype.constructor=w,w.C=function(I,T,C){for(var _=Array(arguments.length-2),hn=2;hn<arguments.length;hn++)_[hn-2]=arguments[hn];return m.prototype[T].apply(I,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,m,E){E||(E=0);var I=Array(16);if(typeof m=="string")for(var T=0;16>T;++T)I[T]=m.charCodeAt(E++)|m.charCodeAt(E++)<<8|m.charCodeAt(E++)<<16|m.charCodeAt(E++)<<24;else for(T=0;16>T;++T)I[T]=m[E++]|m[E++]<<8|m[E++]<<16|m[E++]<<24;m=w.g[0],E=w.g[1],T=w.g[2];var C=w.g[3],_=m+(C^E&(T^C))+I[0]+3614090360&4294967295;m=E+(_<<7&4294967295|_>>>25),_=C+(T^m&(E^T))+I[1]+3905402710&4294967295,C=m+(_<<12&4294967295|_>>>20),_=T+(E^C&(m^E))+I[2]+606105819&4294967295,T=C+(_<<17&4294967295|_>>>15),_=E+(m^T&(C^m))+I[3]+3250441966&4294967295,E=T+(_<<22&4294967295|_>>>10),_=m+(C^E&(T^C))+I[4]+4118548399&4294967295,m=E+(_<<7&4294967295|_>>>25),_=C+(T^m&(E^T))+I[5]+1200080426&4294967295,C=m+(_<<12&4294967295|_>>>20),_=T+(E^C&(m^E))+I[6]+2821735955&4294967295,T=C+(_<<17&4294967295|_>>>15),_=E+(m^T&(C^m))+I[7]+4249261313&4294967295,E=T+(_<<22&4294967295|_>>>10),_=m+(C^E&(T^C))+I[8]+1770035416&4294967295,m=E+(_<<7&4294967295|_>>>25),_=C+(T^m&(E^T))+I[9]+2336552879&4294967295,C=m+(_<<12&4294967295|_>>>20),_=T+(E^C&(m^E))+I[10]+4294925233&4294967295,T=C+(_<<17&4294967295|_>>>15),_=E+(m^T&(C^m))+I[11]+2304563134&4294967295,E=T+(_<<22&4294967295|_>>>10),_=m+(C^E&(T^C))+I[12]+1804603682&4294967295,m=E+(_<<7&4294967295|_>>>25),_=C+(T^m&(E^T))+I[13]+4254626195&4294967295,C=m+(_<<12&4294967295|_>>>20),_=T+(E^C&(m^E))+I[14]+2792965006&4294967295,T=C+(_<<17&4294967295|_>>>15),_=E+(m^T&(C^m))+I[15]+1236535329&4294967295,E=T+(_<<22&4294967295|_>>>10),_=m+(T^C&(E^T))+I[1]+4129170786&4294967295,m=E+(_<<5&4294967295|_>>>27),_=C+(E^T&(m^E))+I[6]+3225465664&4294967295,C=m+(_<<9&4294967295|_>>>23),_=T+(m^E&(C^m))+I[11]+643717713&4294967295,T=C+(_<<14&4294967295|_>>>18),_=E+(C^m&(T^C))+I[0]+3921069994&4294967295,E=T+(_<<20&4294967295|_>>>12),_=m+(T^C&(E^T))+I[5]+3593408605&4294967295,m=E+(_<<5&4294967295|_>>>27),_=C+(E^T&(m^E))+I[10]+38016083&4294967295,C=m+(_<<9&4294967295|_>>>23),_=T+(m^E&(C^m))+I[15]+3634488961&4294967295,T=C+(_<<14&4294967295|_>>>18),_=E+(C^m&(T^C))+I[4]+3889429448&4294967295,E=T+(_<<20&4294967295|_>>>12),_=m+(T^C&(E^T))+I[9]+568446438&4294967295,m=E+(_<<5&4294967295|_>>>27),_=C+(E^T&(m^E))+I[14]+3275163606&4294967295,C=m+(_<<9&4294967295|_>>>23),_=T+(m^E&(C^m))+I[3]+4107603335&4294967295,T=C+(_<<14&4294967295|_>>>18),_=E+(C^m&(T^C))+I[8]+1163531501&4294967295,E=T+(_<<20&4294967295|_>>>12),_=m+(T^C&(E^T))+I[13]+2850285829&4294967295,m=E+(_<<5&4294967295|_>>>27),_=C+(E^T&(m^E))+I[2]+4243563512&4294967295,C=m+(_<<9&4294967295|_>>>23),_=T+(m^E&(C^m))+I[7]+1735328473&4294967295,T=C+(_<<14&4294967295|_>>>18),_=E+(C^m&(T^C))+I[12]+2368359562&4294967295,E=T+(_<<20&4294967295|_>>>12),_=m+(E^T^C)+I[5]+4294588738&4294967295,m=E+(_<<4&4294967295|_>>>28),_=C+(m^E^T)+I[8]+2272392833&4294967295,C=m+(_<<11&4294967295|_>>>21),_=T+(C^m^E)+I[11]+1839030562&4294967295,T=C+(_<<16&4294967295|_>>>16),_=E+(T^C^m)+I[14]+4259657740&4294967295,E=T+(_<<23&4294967295|_>>>9),_=m+(E^T^C)+I[1]+2763975236&4294967295,m=E+(_<<4&4294967295|_>>>28),_=C+(m^E^T)+I[4]+1272893353&4294967295,C=m+(_<<11&4294967295|_>>>21),_=T+(C^m^E)+I[7]+4139469664&4294967295,T=C+(_<<16&4294967295|_>>>16),_=E+(T^C^m)+I[10]+3200236656&4294967295,E=T+(_<<23&4294967295|_>>>9),_=m+(E^T^C)+I[13]+681279174&4294967295,m=E+(_<<4&4294967295|_>>>28),_=C+(m^E^T)+I[0]+3936430074&4294967295,C=m+(_<<11&4294967295|_>>>21),_=T+(C^m^E)+I[3]+3572445317&4294967295,T=C+(_<<16&4294967295|_>>>16),_=E+(T^C^m)+I[6]+76029189&4294967295,E=T+(_<<23&4294967295|_>>>9),_=m+(E^T^C)+I[9]+3654602809&4294967295,m=E+(_<<4&4294967295|_>>>28),_=C+(m^E^T)+I[12]+3873151461&4294967295,C=m+(_<<11&4294967295|_>>>21),_=T+(C^m^E)+I[15]+530742520&4294967295,T=C+(_<<16&4294967295|_>>>16),_=E+(T^C^m)+I[2]+3299628645&4294967295,E=T+(_<<23&4294967295|_>>>9),_=m+(T^(E|~C))+I[0]+4096336452&4294967295,m=E+(_<<6&4294967295|_>>>26),_=C+(E^(m|~T))+I[7]+1126891415&4294967295,C=m+(_<<10&4294967295|_>>>22),_=T+(m^(C|~E))+I[14]+2878612391&4294967295,T=C+(_<<15&4294967295|_>>>17),_=E+(C^(T|~m))+I[5]+4237533241&4294967295,E=T+(_<<21&4294967295|_>>>11),_=m+(T^(E|~C))+I[12]+1700485571&4294967295,m=E+(_<<6&4294967295|_>>>26),_=C+(E^(m|~T))+I[3]+2399980690&4294967295,C=m+(_<<10&4294967295|_>>>22),_=T+(m^(C|~E))+I[10]+4293915773&4294967295,T=C+(_<<15&4294967295|_>>>17),_=E+(C^(T|~m))+I[1]+2240044497&4294967295,E=T+(_<<21&4294967295|_>>>11),_=m+(T^(E|~C))+I[8]+1873313359&4294967295,m=E+(_<<6&4294967295|_>>>26),_=C+(E^(m|~T))+I[15]+4264355552&4294967295,C=m+(_<<10&4294967295|_>>>22),_=T+(m^(C|~E))+I[6]+2734768916&4294967295,T=C+(_<<15&4294967295|_>>>17),_=E+(C^(T|~m))+I[13]+1309151649&4294967295,E=T+(_<<21&4294967295|_>>>11),_=m+(T^(E|~C))+I[4]+4149444226&4294967295,m=E+(_<<6&4294967295|_>>>26),_=C+(E^(m|~T))+I[11]+3174756917&4294967295,C=m+(_<<10&4294967295|_>>>22),_=T+(m^(C|~E))+I[2]+718787259&4294967295,T=C+(_<<15&4294967295|_>>>17),_=E+(C^(T|~m))+I[9]+3951481745&4294967295,w.g[0]=w.g[0]+m&4294967295,w.g[1]=w.g[1]+(T+(_<<21&4294967295|_>>>11))&4294967295,w.g[2]=w.g[2]+T&4294967295,w.g[3]=w.g[3]+C&4294967295}r.prototype.u=function(w,m){m===void 0&&(m=w.length);for(var E=m-this.blockSize,I=this.B,T=this.h,C=0;C<m;){if(T==0)for(;C<=E;)i(this,w,C),C+=this.blockSize;if(typeof w=="string"){for(;C<m;)if(I[T++]=w.charCodeAt(C++),T==this.blockSize){i(this,I),T=0;break}}else for(;C<m;)if(I[T++]=w[C++],T==this.blockSize){i(this,I),T=0;break}}this.h=T,this.o+=m},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var m=1;m<w.length-8;++m)w[m]=0;var E=8*this.o;for(m=w.length-8;m<w.length;++m)w[m]=E&255,E/=256;for(this.u(w),w=Array(16),m=E=0;4>m;++m)for(var I=0;32>I;I+=8)w[E++]=this.g[m]>>>I&255;return w};function o(w,m){var E=c;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=m(w)}function s(w,m){this.h=m;for(var E=[],I=!0,T=w.length-1;0<=T;T--){var C=w[T]|0;I&&C==m||(E[T]=C,I=!1)}this.g=E}var c={};function u(w){return-128<=w&&128>w?o(w,function(m){return new s([m|0],0>m?-1:0)}):new s([w|0],0>w?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(0>w)return M(l(-w));for(var m=[],E=1,I=0;w>=E;I++)m[I]=w/E|0,E*=4294967296;return new s(m,0)}function f(w,m){if(w.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(w.charAt(0)=="-")return M(f(w.substring(1),m));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(m,8)),I=p,T=0;T<w.length;T+=8){var C=Math.min(8,w.length-T),_=parseInt(w.substring(T,T+C),m);8>C?(C=l(Math.pow(m,C)),I=I.j(C).add(l(_))):(I=I.j(E),I=I.add(l(_)))}return I}var p=u(0),y=u(1),v=u(16777216);t=s.prototype,t.m=function(){if(N(this))return-M(this).m();for(var w=0,m=1,E=0;E<this.g.length;E++){var I=this.i(E);w+=(0<=I?I:4294967296+I)*m,m*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(S(this))return"0";if(N(this))return"-"+M(this).toString(w);for(var m=l(Math.pow(w,6)),E=this,I="";;){var T=oe(E,m).g;E=L(E,T.j(m));var C=((0<E.g.length?E.g[0]:E.h)>>>0).toString(w);if(E=T,S(E))return C+I;for(;6>C.length;)C="0"+C;I=C+I}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function S(w){if(w.h!=0)return!1;for(var m=0;m<w.g.length;m++)if(w.g[m]!=0)return!1;return!0}function N(w){return w.h==-1}t.l=function(w){return w=L(this,w),N(w)?-1:S(w)?0:1};function M(w){for(var m=w.g.length,E=[],I=0;I<m;I++)E[I]=~w.g[I];return new s(E,~w.h).add(y)}t.abs=function(){return N(this)?M(this):this},t.add=function(w){for(var m=Math.max(this.g.length,w.g.length),E=[],I=0,T=0;T<=m;T++){var C=I+(this.i(T)&65535)+(w.i(T)&65535),_=(C>>>16)+(this.i(T)>>>16)+(w.i(T)>>>16);I=_>>>16,C&=65535,_&=65535,E[T]=_<<16|C}return new s(E,E[E.length-1]&-2147483648?-1:0)};function L(w,m){return w.add(M(m))}t.j=function(w){if(S(this)||S(w))return p;if(N(this))return N(w)?M(this).j(M(w)):M(M(this).j(w));if(N(w))return M(this.j(M(w)));if(0>this.l(v)&&0>w.l(v))return l(this.m()*w.m());for(var m=this.g.length+w.g.length,E=[],I=0;I<2*m;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var T=0;T<w.g.length;T++){var C=this.i(I)>>>16,_=this.i(I)&65535,hn=w.i(T)>>>16,To=w.i(T)&65535;E[2*I+2*T]+=_*To,H(E,2*I+2*T),E[2*I+2*T+1]+=C*To,H(E,2*I+2*T+1),E[2*I+2*T+1]+=_*hn,H(E,2*I+2*T+1),E[2*I+2*T+2]+=C*hn,H(E,2*I+2*T+2)}for(I=0;I<m;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=m;I<2*m;I++)E[I]=0;return new s(E,0)};function H(w,m){for(;(w[m]&65535)!=w[m];)w[m+1]+=w[m]>>>16,w[m]&=65535,m++}function J(w,m){this.g=w,this.h=m}function oe(w,m){if(S(m))throw Error("division by zero");if(S(w))return new J(p,p);if(N(w))return m=oe(M(w),m),new J(M(m.g),M(m.h));if(N(m))return m=oe(w,M(m)),new J(M(m.g),m.h);if(30<w.g.length){if(N(w)||N(m))throw Error("slowDivide_ only works with positive integers.");for(var E=y,I=m;0>=I.l(w);)E=be(E),I=be(I);var T=X(E,1),C=X(I,1);for(I=X(I,2),E=X(E,2);!S(I);){var _=C.add(I);0>=_.l(w)&&(T=T.add(E),C=_),I=X(I,1),E=X(E,1)}return m=L(w,T.j(m)),new J(T,m)}for(T=p;0<=w.l(m);){for(E=Math.max(1,Math.floor(w.m()/m.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),C=l(E),_=C.j(m);N(_)||0<_.l(w);)E-=I,C=l(E),_=C.j(m);S(C)&&(C=y),T=T.add(C),w=L(w,_)}return new J(T,w)}t.A=function(w){return oe(this,w).h},t.and=function(w){for(var m=Math.max(this.g.length,w.g.length),E=[],I=0;I<m;I++)E[I]=this.i(I)&w.i(I);return new s(E,this.h&w.h)},t.or=function(w){for(var m=Math.max(this.g.length,w.g.length),E=[],I=0;I<m;I++)E[I]=this.i(I)|w.i(I);return new s(E,this.h|w.h)},t.xor=function(w){for(var m=Math.max(this.g.length,w.g.length),E=[],I=0;I<m;I++)E[I]=this.i(I)^w.i(I);return new s(E,this.h^w.h)};function be(w){for(var m=w.g.length+1,E=[],I=0;I<m;I++)E[I]=w.i(I)<<1|w.i(I-1)>>>31;return new s(E,w.h)}function X(w,m){var E=m>>5;m%=32;for(var I=w.g.length-E,T=[],C=0;C<I;C++)T[C]=0<m?w.i(C+E)>>>m|w.i(C+E+1)<<32-m:w.i(C+E);return new s(T,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,nm=_C.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=f,ar=_C.Integer=s}).apply(typeof EC<"u"?EC:typeof self<"u"?self:typeof window<"u"?window:{});var Sl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Rn={};var rm,ej,Ji,im,na,Al,om,sm,am;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,h){return a==Array.prototype||a==Object.prototype||(a[d]=h.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sl=="object"&&Sl];for(var d=0;d<a.length;++d){var h=a[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var h=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var D=a[g];if(!(D in h))break e;h=h[D]}a=a[a.length-1],g=h[a],d=d(g),d!=g&&d!=null&&e(h,a,{configurable:!0,writable:!0,value:d})}}function o(a,d){a instanceof String&&(a+="");var h=0,g=!1,D={next:function(){if(!g&&h<a.length){var A=h++;return{value:d(A,a[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(a){return a||function(){return o(this,function(d,h){return h})}});var s=s||{},c=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function l(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function f(a,d,h){return a.call.apply(a.bind,arguments)}function p(a,d,h){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,g),a.apply(d,D)}}return function(){return a.apply(d,arguments)}}function y(a,d,h){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,y.apply(null,arguments)}function v(a,d){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function S(a,d){function h(){}h.prototype=d.prototype,a.aa=d.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(g,D,A){for(var x=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)x[ve-2]=arguments[ve];return d.prototype[D].apply(g,x)}}function N(a){let d=a.length;if(0<d){let h=Array(d);for(let g=0;g<d;g++)h[g]=a[g];return h}return[]}function M(a,d){for(let h=1;h<arguments.length;h++){let g=arguments[h];if(u(g)){let D=a.length||0,A=g.length||0;a.length=D+A;for(let x=0;x<A;x++)a[D+x]=g[x]}else a.push(g)}}class L{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function H(a){return/^[\s\xa0]*$/.test(a)}function J(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function oe(a){return oe[" "](a),a}oe[" "]=function(){};var be=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function X(a,d,h){for(let g in a)d.call(h,a[g],g,a)}function w(a,d){for(let h in a)d.call(void 0,a[h],h,a)}function m(a){let d={};for(let h in a)d[h]=a[h];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,d){let h,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(h in g)a[h]=g[h];for(let A=0;A<E.length;A++)h=E[A],Object.prototype.hasOwnProperty.call(g,h)&&(a[h]=g[h])}}function T(a){var d=1;a=a.split(":");let h=[];for(;0<d&&a.length;)h.push(a.shift()),d--;return a.length&&h.push(a.join(":")),h}function C(a){c.setTimeout(()=>{throw a},0)}function _(){var a=wd;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class hn{constructor(){this.h=this.g=null}add(d,h){let g=To.get();g.set(d,h),this.h?this.h.next=g:this.g=g,this.h=g}}var To=new L(()=>new FA,a=>a.reset());class FA{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Do,bo=!1,wd=new hn,wv=()=>{let a=c.Promise.resolve(void 0);Do=()=>{a.then(VA)}};var VA=()=>{for(var a;a=_();){try{a.h.call(a.g)}catch(h){C(h)}var d=To;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}bo=!1};function kn(){this.s=this.s,this.C=this.C}kn.prototype.s=!1,kn.prototype.ma=function(){this.s||(this.s=!0,this.N())},kn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ye(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Ye.prototype.h=function(){this.defaultPrevented=!0};var UA=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,d),c.removeEventListener("test",h,d)}catch{}return a}();function Co(a,d){if(Ye.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(be){e:{try{oe(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else h=="mouseover"?d=a.fromElement:h=="mouseout"&&(d=a.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:jA[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Co.aa.h.call(this)}}S(Co,Ye);var jA={2:"touch",3:"pen",4:"mouse"};Co.prototype.h=function(){Co.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var So="closure_listenable_"+(1e6*Math.random()|0),BA=0;function $A(a,d,h,g,D){this.listener=a,this.proxy=null,this.src=d,this.type=h,this.capture=!!g,this.ha=D,this.key=++BA,this.da=this.fa=!1}function Ca(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Sa(a){this.src=a,this.g={},this.h=0}Sa.prototype.add=function(a,d,h,g,D){var A=a.toString();a=this.g[A],a||(a=this.g[A]=[],this.h++);var x=Dd(a,d,g,D);return-1<x?(d=a[x],h||(d.fa=!1)):(d=new $A(d,this.src,A,!!g,D),d.fa=h,a.push(d)),d};function Td(a,d){var h=d.type;if(h in a.g){var g=a.g[h],D=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=D)&&Array.prototype.splice.call(g,D,1),A&&(Ca(d),a.g[h].length==0&&(delete a.g[h],a.h--))}}function Dd(a,d,h,g){for(var D=0;D<a.length;++D){var A=a[D];if(!A.da&&A.listener==d&&A.capture==!!h&&A.ha==g)return D}return-1}var bd="closure_lm_"+(1e6*Math.random()|0),Cd={};function Tv(a,d,h,g,D){if(g&&g.once)return bv(a,d,h,g,D);if(Array.isArray(d)){for(var A=0;A<d.length;A++)Tv(a,d[A],h,g,D);return null}return h=Nd(h),a&&a[So]?a.K(d,h,l(g)?!!g.capture:!!g,D):Dv(a,d,h,!1,g,D)}function Dv(a,d,h,g,D,A){if(!d)throw Error("Invalid event type");var x=l(D)?!!D.capture:!!D,ve=Ad(a);if(ve||(a[bd]=ve=new Sa(a)),h=ve.add(d,h,g,x,A),h.proxy)return h;if(g=HA(),h.proxy=g,g.src=a,g.listener=h,a.addEventListener)UA||(D=x),D===void 0&&(D=!1),a.addEventListener(d.toString(),g,D);else if(a.attachEvent)a.attachEvent(Sv(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function HA(){function a(h){return d.call(a.src,a.listener,h)}let d=qA;return a}function bv(a,d,h,g,D){if(Array.isArray(d)){for(var A=0;A<d.length;A++)bv(a,d[A],h,g,D);return null}return h=Nd(h),a&&a[So]?a.L(d,h,l(g)?!!g.capture:!!g,D):Dv(a,d,h,!0,g,D)}function Cv(a,d,h,g,D){if(Array.isArray(d))for(var A=0;A<d.length;A++)Cv(a,d[A],h,g,D);else g=l(g)?!!g.capture:!!g,h=Nd(h),a&&a[So]?(a=a.i,d=String(d).toString(),d in a.g&&(A=a.g[d],h=Dd(A,h,g,D),-1<h&&(Ca(A[h]),Array.prototype.splice.call(A,h,1),A.length==0&&(delete a.g[d],a.h--)))):a&&(a=Ad(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Dd(d,h,g,D)),(h=-1<a?d[a]:null)&&Sd(h))}function Sd(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[So])Td(d.i,a);else{var h=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(h,g,a.capture):d.detachEvent?d.detachEvent(Sv(h),g):d.addListener&&d.removeListener&&d.removeListener(g),(h=Ad(d))?(Td(h,a),h.h==0&&(h.src=null,d[bd]=null)):Ca(a)}}}function Sv(a){return a in Cd?Cd[a]:Cd[a]="on"+a}function qA(a,d){if(a.da)a=!0;else{d=new Co(d,this);var h=a.listener,g=a.ha||a.src;a.fa&&Sd(a),a=h.call(g,d)}return a}function Ad(a){return a=a[bd],a instanceof Sa?a:null}var Rd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nd(a){return typeof a=="function"?a:(a[Rd]||(a[Rd]=function(d){return a.handleEvent(d)}),a[Rd])}function Je(){kn.call(this),this.i=new Sa(this),this.M=this,this.F=null}S(Je,kn),Je.prototype[So]=!0,Je.prototype.removeEventListener=function(a,d,h,g){Cv(this,a,d,h,g)};function ot(a,d){var h,g=a.F;if(g)for(h=[];g;g=g.F)h.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new Ye(d,a);else if(d instanceof Ye)d.target=d.target||a;else{var D=d;d=new Ye(g,a),I(d,D)}if(D=!0,h)for(var A=h.length-1;0<=A;A--){var x=d.g=h[A];D=Aa(x,g,!0,d)&&D}if(x=d.g=a,D=Aa(x,g,!0,d)&&D,D=Aa(x,g,!1,d)&&D,h)for(A=0;A<h.length;A++)x=d.g=h[A],D=Aa(x,g,!1,d)&&D}Je.prototype.N=function(){if(Je.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var h=a.g[d],g=0;g<h.length;g++)Ca(h[g]);delete a.g[d],a.h--}}this.F=null},Je.prototype.K=function(a,d,h,g){return this.i.add(String(a),d,!1,h,g)},Je.prototype.L=function(a,d,h,g){return this.i.add(String(a),d,!0,h,g)};function Aa(a,d,h,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,A=0;A<d.length;++A){var x=d[A];if(x&&!x.da&&x.capture==h){var ve=x.listener,ze=x.ha||x.src;x.fa&&Td(a.i,x),D=ve.call(ze,g)!==!1&&D}}return D&&!g.defaultPrevented}function Av(a,d,h){if(typeof a=="function")h&&(a=y(a,h));else if(a&&typeof a.handleEvent=="function")a=y(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function Rv(a){a.g=Av(()=>{a.g=null,a.i&&(a.i=!1,Rv(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class zA extends kn{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Rv(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ao(a){kn.call(this),this.h=a,this.g={}}S(Ao,kn);var Nv=[];function Mv(a){X(a.g,function(d,h){this.g.hasOwnProperty(h)&&Sd(d)},a),a.g={}}Ao.prototype.N=function(){Ao.aa.N.call(this),Mv(this)},Ao.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Md=c.JSON.stringify,GA=c.JSON.parse,WA=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Pd(){}Pd.prototype.h=null;function Pv(a){return a.h||(a.h=a.i())}function xv(){}var Ro={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xd(){Ye.call(this,"d")}S(xd,Ye);function Od(){Ye.call(this,"c")}S(Od,Ye);var dr={},Ov=null;function Ra(){return Ov=Ov||new Je}dr.La="serverreachability";function kv(a){Ye.call(this,dr.La,a)}S(kv,Ye);function No(a){let d=Ra();ot(d,new kv(d))}dr.STAT_EVENT="statevent";function Lv(a,d){Ye.call(this,dr.STAT_EVENT,a),this.stat=d}S(Lv,Ye);function st(a){let d=Ra();ot(d,new Lv(d,a))}dr.Ma="timingevent";function Fv(a,d){Ye.call(this,dr.Ma,a),this.size=d}S(Fv,Ye);function Mo(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function Po(){this.g=!0}Po.prototype.xa=function(){this.g=!1};function KA(a,d,h,g,D,A){a.info(function(){if(a.g)if(A)for(var x="",ve=A.split("&"),ze=0;ze<ve.length;ze++){var fe=ve[ze].split("=");if(1<fe.length){var Ze=fe[0];fe=fe[1];var Xe=Ze.split("_");x=2<=Xe.length&&Xe[1]=="type"?x+(Ze+"="+fe+"&"):x+(Ze+"=redacted&")}}else x=null;else x=A;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+d+`
`+h+`
`+x})}function QA(a,d,h,g,D,A,x){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+d+`
`+h+`
`+A+" "+x})}function ei(a,d,h,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+JA(a,h)+(g?" "+g:"")})}function YA(a,d){a.info(function(){return"TIMEOUT: "+d})}Po.prototype.info=function(){};function JA(a,d){if(!a.g)return d;if(!d)return null;try{var h=JSON.parse(d);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var g=h[a];if(!(2>g.length)){var D=g[1];if(Array.isArray(D)&&!(1>D.length)){var A=D[0];if(A!="noop"&&A!="stop"&&A!="close")for(var x=1;x<D.length;x++)D[x]=""}}}}return Md(h)}catch{return d}}var Na={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},kd;function Ma(){}S(Ma,Pd),Ma.prototype.g=function(){return new XMLHttpRequest},Ma.prototype.i=function(){return{}},kd=new Ma;function Ln(a,d,h,g){this.j=a,this.i=d,this.l=h,this.R=g||1,this.U=new Ao(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Uv}function Uv(){this.i=null,this.g="",this.h=!1}var jv={},Ld={};function Fd(a,d,h){a.L=1,a.v=ka(fn(d)),a.m=h,a.P=!0,Bv(a,null)}function Bv(a,d){a.F=Date.now(),Pa(a),a.A=fn(a.v);var h=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),tE(h.i,"t",g),a.C=0,h=a.j.J,a.h=new Uv,a.g=EE(a.j,h?d:null,!a.m),0<a.O&&(a.M=new zA(y(a.Y,a,a.g),a.O)),d=a.U,h=a.g,g=a.ca;var D="readystatechange";Array.isArray(D)||(D&&(Nv[0]=D.toString()),D=Nv);for(var A=0;A<D.length;A++){var x=Tv(h,D[A],g||d.handleEvent,!1,d.h||d);if(!x)break;d.g[x.key]=x}d=a.H?m(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),No(),KA(a.i,a.u,a.A,a.l,a.R,a.m)}Ln.prototype.ca=function(a){a=a.target;let d=this.M;d&&pn(a)==3?d.j():this.Y(a)},Ln.prototype.Y=function(a){try{if(a==this.g)e:{let Xe=pn(this.g);var d=this.g.Ba();let ri=this.g.Z();if(!(3>Xe)&&(Xe!=3||this.g&&(this.h.h||this.g.oa()||cE(this.g)))){this.J||Xe!=4||d==7||(d==8||0>=ri?No(3):No(2)),Vd(this);var h=this.g.Z();this.X=h;t:if($v(this)){var g=cE(this.g);a="";var D=g.length,A=pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hr(this),xo(this);var x="";break t}this.h.i=new c.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,a+=this.h.i.decode(g[d],{stream:!(A&&d==D-1)});g.length=0,this.h.g+=a,this.C=0,x=this.h.g}else x=this.g.oa();if(this.o=h==200,QA(this.i,this.u,this.A,this.l,this.R,Xe,h),this.o){if(this.T&&!this.K){t:{if(this.g){var ve,ze=this.g;if((ve=ze.g?ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(ve)){var fe=ve;break t}}fe=null}if(h=fe)ei(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ud(this,h);else{this.o=!1,this.s=3,st(12),hr(this),xo(this);break e}}if(this.P){h=!0;let Ut;for(;!this.J&&this.C<x.length;)if(Ut=ZA(this,x),Ut==Ld){Xe==4&&(this.s=4,st(14),h=!1),ei(this.i,this.l,null,"[Incomplete Response]");break}else if(Ut==jv){this.s=4,st(15),ei(this.i,this.l,x,"[Invalid Chunk]"),h=!1;break}else ei(this.i,this.l,Ut,null),Ud(this,Ut);if($v(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xe!=4||x.length!=0||this.h.h||(this.s=1,st(16),h=!1),this.o=this.o&&h,!h)ei(this.i,this.l,x,"[Invalid Chunked Response]"),hr(this),xo(this);else if(0<x.length&&!this.W){this.W=!0;var Ze=this.j;Ze.g==this&&Ze.ba&&!Ze.M&&(Ze.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),zd(Ze),Ze.M=!0,st(11))}}else ei(this.i,this.l,x,null),Ud(this,x);Xe==4&&hr(this),this.o&&!this.J&&(Xe==4?gE(this.j,this):(this.o=!1,Pa(this)))}else g0(this.g),h==400&&0<x.indexOf("Unknown SID")?(this.s=3,st(12)):(this.s=0,st(13)),hr(this),xo(this)}}}catch{}finally{}};function $v(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function ZA(a,d){var h=a.C,g=d.indexOf(`
`,h);return g==-1?Ld:(h=Number(d.substring(h,g)),isNaN(h)?jv:(g+=1,g+h>d.length?Ld:(d=d.slice(g,g+h),a.C=g+h,d)))}Ln.prototype.cancel=function(){this.J=!0,hr(this)};function Pa(a){a.S=Date.now()+a.I,Hv(a,a.I)}function Hv(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Mo(y(a.ba,a),d)}function Vd(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Ln.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(YA(this.i,this.A),this.L!=2&&(No(),st(17)),hr(this),this.s=2,xo(this)):Hv(this,this.S-a)};function xo(a){a.j.G==0||a.J||gE(a.j,a)}function hr(a){Vd(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Mv(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Ud(a,d){try{var h=a.j;if(h.G!=0&&(h.g==a||jd(h.h,a))){if(!a.K&&jd(h.h,a)&&h.G==3){try{var g=h.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)ja(h),Va(h);else break e;qd(h),st(18)}}else h.za=D[1],0<h.za-h.T&&37500>D[2]&&h.F&&h.v==0&&!h.C&&(h.C=Mo(y(h.Za,h),6e3));if(1>=Gv(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else pr(h,11)}else if((a.K||h.g==a)&&ja(h),!H(d))for(D=h.Da.g.parse(d),d=0;d<D.length;d++){let fe=D[d];if(h.T=fe[0],fe=fe[1],h.G==2)if(fe[0]=="c"){h.K=fe[1],h.ia=fe[2];let Ze=fe[3];Ze!=null&&(h.la=Ze,h.j.info("VER="+h.la));let Xe=fe[4];Xe!=null&&(h.Aa=Xe,h.j.info("SVER="+h.Aa));let ri=fe[5];ri!=null&&typeof ri=="number"&&0<ri&&(g=1.5*ri,h.L=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;let Ut=a.g;if(Ut){let $a=Ut.g?Ut.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($a){var A=g.h;A.g||$a.indexOf("spdy")==-1&&$a.indexOf("quic")==-1&&$a.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Bd(A,A.h),A.h=null))}if(g.D){let Gd=Ut.g?Ut.g.getResponseHeader("X-HTTP-Session-Id"):null;Gd&&(g.ya=Gd,we(g.I,g.D,Gd))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),g=h;var x=a;if(g.qa=vE(g,g.J?g.ia:null,g.W),x.K){Wv(g.h,x);var ve=x,ze=g.L;ze&&(ve.I=ze),ve.B&&(Vd(ve),Pa(ve)),g.g=x}else fE(g);0<h.i.length&&Ua(h)}else fe[0]!="stop"&&fe[0]!="close"||pr(h,7);else h.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?pr(h,7):Hd(h):fe[0]!="noop"&&h.l&&h.l.ta(fe),h.v=0)}}No(4)}catch{}}var XA=class{constructor(a,d){this.g=a,this.map=d}};function qv(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function zv(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Gv(a){return a.h?1:a.g?a.g.size:0}function jd(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function Bd(a,d){a.g?a.g.add(d):a.h=d}function Wv(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}qv.prototype.cancel=function(){if(this.i=Kv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Kv(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let h of a.g.values())d=d.concat(h.D);return d}return N(a.i)}function e0(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],h=a.length,g=0;g<h;g++)d.push(a[g]);return d}d=[],h=0;for(g in a)d[h++]=a[g];return d}function t0(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var h=0;h<a;h++)d.push(h);return d}d=[],h=0;for(let g in a)d[h++]=g;return d}}}function Qv(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var h=t0(a),g=e0(a),D=g.length,A=0;A<D;A++)d.call(void 0,g[A],h&&h[A],a)}var Yv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function n0(a,d){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var g=a[h].indexOf("="),D=null;if(0<=g){var A=a[h].substring(0,g);D=a[h].substring(g+1)}else A=a[h];d(A,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function fr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof fr){this.h=a.h,xa(this,a.j),this.o=a.o,this.g=a.g,Oa(this,a.s),this.l=a.l;var d=a.i,h=new Lo;h.i=d.i,d.g&&(h.g=new Map(d.g),h.h=d.h),Jv(this,h),this.m=a.m}else a&&(d=String(a).match(Yv))?(this.h=!1,xa(this,d[1]||"",!0),this.o=Oo(d[2]||""),this.g=Oo(d[3]||"",!0),Oa(this,d[4]),this.l=Oo(d[5]||"",!0),Jv(this,d[6]||"",!0),this.m=Oo(d[7]||"")):(this.h=!1,this.i=new Lo(null,this.h))}fr.prototype.toString=function(){var a=[],d=this.j;d&&a.push(ko(d,Zv,!0),":");var h=this.g;return(h||d=="file")&&(a.push("//"),(d=this.o)&&a.push(ko(d,Zv,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(ko(h,h.charAt(0)=="/"?o0:i0,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",ko(h,a0)),a.join("")};function fn(a){return new fr(a)}function xa(a,d,h){a.j=h?Oo(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Oa(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Jv(a,d,h){d instanceof Lo?(a.i=d,c0(a.i,a.h)):(h||(d=ko(d,s0)),a.i=new Lo(d,a.h))}function we(a,d,h){a.i.set(d,h)}function ka(a){return we(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Oo(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ko(a,d,h){return typeof a=="string"?(a=encodeURI(a).replace(d,r0),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function r0(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Zv=/[#\/\?@]/g,i0=/[#\?:]/g,o0=/[#\?]/g,s0=/[#\?@]/g,a0=/#/g;function Lo(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Fn(a){a.g||(a.g=new Map,a.h=0,a.i&&n0(a.i,function(d,h){a.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}t=Lo.prototype,t.add=function(a,d){Fn(this),this.i=null,a=ti(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(d),this.h+=1,this};function Xv(a,d){Fn(a),d=ti(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function eE(a,d){return Fn(a),d=ti(a,d),a.g.has(d)}t.forEach=function(a,d){Fn(this),this.g.forEach(function(h,g){h.forEach(function(D){a.call(d,D,g,this)},this)},this)},t.na=function(){Fn(this);let a=Array.from(this.g.values()),d=Array.from(this.g.keys()),h=[];for(let g=0;g<d.length;g++){let D=a[g];for(let A=0;A<D.length;A++)h.push(d[g])}return h},t.V=function(a){Fn(this);let d=[];if(typeof a=="string")eE(this,a)&&(d=d.concat(this.g.get(ti(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)d=d.concat(a[h])}return d},t.set=function(a,d){return Fn(this),this.i=null,a=ti(this,a),eE(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function tE(a,d,h){Xv(a,d),0<h.length&&(a.i=null,a.g.set(ti(a,d),N(h)),a.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(var h=0;h<d.length;h++){var g=d[h];let A=encodeURIComponent(String(g)),x=this.V(g);for(g=0;g<x.length;g++){var D=A;x[g]!==""&&(D+="="+encodeURIComponent(String(x[g]))),a.push(D)}}return this.i=a.join("&")};function ti(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function c0(a,d){d&&!a.j&&(Fn(a),a.i=null,a.g.forEach(function(h,g){var D=g.toLowerCase();g!=D&&(Xv(this,g),tE(this,D,h))},a)),a.j=d}function u0(a,d){let h=new Po;if(c.Image){let g=new Image;g.onload=v(Vn,h,"TestLoadImage: loaded",!0,d,g),g.onerror=v(Vn,h,"TestLoadImage: error",!1,d,g),g.onabort=v(Vn,h,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(Vn,h,"TestLoadImage: timeout",!1,d,g),c.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function l0(a,d){let h=new Po,g=new AbortController,D=setTimeout(()=>{g.abort(),Vn(h,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(A=>{clearTimeout(D),A.ok?Vn(h,"TestPingServer: ok",!0,d):Vn(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),Vn(h,"TestPingServer: error",!1,d)})}function Vn(a,d,h,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(h)}catch{}}function d0(){this.g=new WA}function h0(a,d,h){let g=h||"";try{Qv(a,function(D,A){let x=D;l(D)&&(x=Md(D)),d.push(g+A+"="+encodeURIComponent(x))})}catch(D){throw d.push(g+"type="+encodeURIComponent("_badmap")),D}}function Fo(a){this.l=a.Ub||null,this.j=a.eb||!1}S(Fo,Pd),Fo.prototype.g=function(){return new La(this.l,this.j)},Fo.prototype.i=function(a){return function(){return a}}({});function La(a,d){Je.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(La,Je),t=La.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Uo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vo(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Uo(this)),this.g&&(this.readyState=3,Uo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;nE(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function nE(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Vo(this):Uo(this),this.readyState==3&&nE(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Vo(this))},t.Qa=function(a){this.g&&(this.response=a,Vo(this))},t.ga=function(){this.g&&Vo(this)};function Vo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Uo(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=d.next();return a.join(`\r
`)};function Uo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(La.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function rE(a){let d="";return X(a,function(h,g){d+=g,d+=":",d+=h,d+=`\r
`}),d}function $d(a,d,h){e:{for(g in h){var g=!1;break e}g=!0}g||(h=rE(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):we(a,d,h))}function Ce(a){Je.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Ce,Je);var f0=/^https?$/i,p0=["POST","PUT"];t=Ce.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():kd.g(),this.v=this.o?Pv(this.o):Pv(kd),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(A){iE(this,A);return}if(a=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)h.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())h.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(A=>A.toLowerCase()=="content-type"),D=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(p0,d,void 0))||g||D||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,x]of h)this.g.setRequestHeader(A,x);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{aE(this),this.u=!0,this.g.send(a),this.u=!1}catch(A){iE(this,A)}};function iE(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,oE(a),Fa(a)}function oE(a){a.A||(a.A=!0,ot(a,"complete"),ot(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ot(this,"complete"),ot(this,"abort"),Fa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fa(this,!0)),Ce.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?sE(this):this.bb())},t.bb=function(){sE(this)};function sE(a){if(a.h&&typeof s<"u"&&(!a.v[1]||pn(a)!=4||a.Z()!=2)){if(a.u&&pn(a)==4)Av(a.Ea,0,a);else if(ot(a,"readystatechange"),pn(a)==4){a.h=!1;try{let x=a.Z();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var g;if(g=x===0){var D=String(a.D).match(Yv)[1]||null;!D&&c.self&&c.self.location&&(D=c.self.location.protocol.slice(0,-1)),g=!f0.test(D?D.toLowerCase():"")}h=g}if(h)ot(a,"complete"),ot(a,"success");else{a.m=6;try{var A=2<pn(a)?a.g.statusText:""}catch{A=""}a.l=A+" ["+a.Z()+"]",oE(a)}}finally{Fa(a)}}}}function Fa(a,d){if(a.g){aE(a);let h=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||ot(a,"ready");try{h.onreadystatechange=g}catch{}}}function aE(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function pn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<pn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),GA(d)}};function cE(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function g0(a){let d={};a=(a.g&&2<=pn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(H(a[g]))continue;var h=T(a[g]);let D=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let A=d[D]||[];d[D]=A,A.push(h)}w(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function jo(a,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||d}function uE(a){this.Aa=0,this.i=[],this.j=new Po,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=jo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=jo("baseRetryDelayMs",5e3,a),this.cb=jo("retryDelaySeedMs",1e4,a),this.Wa=jo("forwardChannelMaxRetries",2,a),this.wa=jo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new qv(a&&a.concurrentRequestLimit),this.Da=new d0,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=uE.prototype,t.la=8,t.G=1,t.connect=function(a,d,h,g){st(0),this.W=a,this.H=d||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.I=vE(this,null,this.W),Ua(this)};function Hd(a){if(lE(a),a.G==3){var d=a.U++,h=fn(a.I);if(we(h,"SID",a.K),we(h,"RID",d),we(h,"TYPE","terminate"),Bo(a,h),d=new Ln(a,a.j,d),d.L=2,d.v=ka(fn(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=d.v,h=!0),h||(d.g=EE(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Pa(d)}yE(a)}function Va(a){a.g&&(zd(a),a.g.cancel(),a.g=null)}function lE(a){Va(a),a.u&&(c.clearTimeout(a.u),a.u=null),ja(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Ua(a){if(!zv(a.h)&&!a.s){a.s=!0;var d=a.Ga;Do||wv(),bo||(Do(),bo=!0),wd.add(d,a),a.B=0}}function m0(a,d){return Gv(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Mo(y(a.Ga,a,d),mE(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let D=new Ln(this,this.j,a),A=this.o;if(this.S&&(A?(A=m(A),I(A,this.S)):A=this.S),this.m!==null||this.O||(D.H=A,A=null),this.P)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=hE(this,D,d),h=fn(this.I),we(h,"RID",a),we(h,"CVER",22),this.D&&we(h,"X-HTTP-Session-Id",this.D),Bo(this,h),A&&(this.O?d="headers="+encodeURIComponent(String(rE(A)))+"&"+d:this.m&&$d(h,this.m,A)),Bd(this.h,D),this.Ua&&we(h,"TYPE","init"),this.P?(we(h,"$req",d),we(h,"SID","null"),D.T=!0,Fd(D,h,null)):Fd(D,h,d),this.G=2}}else this.G==3&&(a?dE(this,a):this.i.length==0||zv(this.h)||dE(this))};function dE(a,d){var h;d?h=d.l:h=a.U++;let g=fn(a.I);we(g,"SID",a.K),we(g,"RID",h),we(g,"AID",a.T),Bo(a,g),a.m&&a.o&&$d(g,a.m,a.o),h=new Ln(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),d&&(a.i=d.D.concat(a.i)),d=hE(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Bd(a.h,h),Fd(h,g,d)}function Bo(a,d){a.H&&X(a.H,function(h,g){we(d,g,h)}),a.l&&Qv({},function(h,g){we(d,g,h)})}function hE(a,d,h){h=Math.min(a.i.length,h);var g=a.l?y(a.l.Na,a.l,a):null;e:{var D=a.i;let A=-1;for(;;){let x=["count="+h];A==-1?0<h?(A=D[0].g,x.push("ofs="+A)):A=0:x.push("ofs="+A);let ve=!0;for(let ze=0;ze<h;ze++){let fe=D[ze].g,Ze=D[ze].map;if(fe-=A,0>fe)A=Math.max(0,D[ze].g-100),ve=!1;else try{h0(Ze,x,"req"+fe+"_")}catch{g&&g(Ze)}}if(ve){g=x.join("&");break e}}}return a=a.i.splice(0,h),d.D=a,g}function fE(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Do||wv(),bo||(Do(),bo=!0),wd.add(d,a),a.v=0}}function qd(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Mo(y(a.Fa,a),mE(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,pE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Mo(y(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,st(10),Va(this),pE(this))};function zd(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function pE(a){a.g=new Ln(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=fn(a.qa);we(d,"RID","rpc"),we(d,"SID",a.K),we(d,"AID",a.T),we(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&we(d,"TO",a.ja),we(d,"TYPE","xmlhttp"),Bo(a,d),a.m&&a.o&&$d(d,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=ka(fn(d)),h.m=null,h.P=!0,Bv(h,a)}t.Za=function(){this.C!=null&&(this.C=null,Va(this),qd(this),st(19))};function ja(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function gE(a,d){var h=null;if(a.g==d){ja(a),zd(a),a.g=null;var g=2}else if(jd(a.h,d))h=d.D,Wv(a.h,d),g=1;else return;if(a.G!=0){if(d.o)if(g==1){h=d.m?d.m.length:0,d=Date.now()-d.F;var D=a.B;g=Ra(),ot(g,new Fv(g,h)),Ua(a)}else fE(a);else if(D=d.s,D==3||D==0&&0<d.X||!(g==1&&m0(a,d)||g==2&&qd(a)))switch(h&&0<h.length&&(d=a.h,d.i=d.i.concat(h)),D){case 1:pr(a,5);break;case 4:pr(a,10);break;case 3:pr(a,6);break;default:pr(a,2)}}}function mE(a,d){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*d}function pr(a,d){if(a.j.info("Error code "+d),d==2){var h=y(a.fb,a),g=a.Xa;let D=!g;g=new fr(g||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||xa(g,"https"),ka(g),D?u0(g.toString(),h):l0(g.toString(),h)}else st(2);a.G=0,a.l&&a.l.sa(d),yE(a),lE(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),st(2)):(this.j.info("Failed to ping google.com"),st(1))};function yE(a){if(a.G=0,a.ka=[],a.l){let d=Kv(a.h);(d.length!=0||a.i.length!=0)&&(M(a.ka,d),M(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function vE(a,d,h){var g=h instanceof fr?fn(h):new fr(h);if(g.g!="")d&&(g.g=d+"."+g.g),Oa(g,g.s);else{var D=c.location;g=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var A=new fr(null);g&&xa(A,g),d&&(A.g=d),D&&Oa(A,D),h&&(A.l=h),g=A}return h=a.D,d=a.ya,h&&d&&we(g,h,d),we(g,"VER",a.la),Bo(a,g),g}function EE(a,d,h){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Ce(new Fo({eb:h})):new Ce(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function _E(){}t=_E.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ba(){}Ba.prototype.g=function(a,d){return new ht(a,d)};function ht(a,d){Je.call(this),this.g=new uE(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!H(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!H(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new ni(this)}S(ht,Je),ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ht.prototype.close=function(){Hd(this.g)},ht.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=Md(a),a=h);d.i.push(new XA(d.Ya++,a)),d.G==3&&Ua(d)},ht.prototype.N=function(){this.g.l=null,delete this.j,Hd(this.g),delete this.g,ht.aa.N.call(this)};function IE(a){xd.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let h in d){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}S(IE,xd);function wE(){Od.call(this),this.status=1}S(wE,Od);function ni(a){this.g=a}S(ni,_E),ni.prototype.ua=function(){ot(this.g,"a")},ni.prototype.ta=function(a){ot(this.g,new IE(a))},ni.prototype.sa=function(a){ot(this.g,new wE)},ni.prototype.ra=function(){ot(this.g,"b")},Ba.prototype.createWebChannel=Ba.prototype.g,ht.prototype.send=ht.prototype.o,ht.prototype.open=ht.prototype.m,ht.prototype.close=ht.prototype.close,am=Rn.createWebChannelTransport=function(){return new Ba},sm=Rn.getStatEventTarget=function(){return Ra()},om=Rn.Event=dr,Al=Rn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Na.NO_ERROR=0,Na.TIMEOUT=8,Na.HTTP_ERROR=6,na=Rn.ErrorCode=Na,Vv.COMPLETE="complete",im=Rn.EventType=Vv,xv.EventType=Ro,Ro.OPEN="a",Ro.CLOSE="b",Ro.ERROR="c",Ro.MESSAGE="d",Je.prototype.listen=Je.prototype.K,Ji=Rn.WebChannel=xv,ej=Rn.FetchXmlHttpFactory=Fo,Ce.prototype.listenOnce=Ce.prototype.L,Ce.prototype.getLastError=Ce.prototype.Ka,Ce.prototype.getLastErrorCode=Ce.prototype.Ba,Ce.prototype.getStatus=Ce.prototype.Z,Ce.prototype.getResponseJson=Ce.prototype.Oa,Ce.prototype.getResponseText=Ce.prototype.oa,Ce.prototype.send=Ce.prototype.ea,Ce.prototype.setWithCredentials=Ce.prototype.Ha,rm=Rn.XhrIo=Ce}).apply(typeof Sl<"u"?Sl:typeof self<"u"?self:typeof window<"u"?window:{});var IC="@firebase/firestore";var He=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};He.UNAUTHENTICATED=new He(null),He.GOOGLE_CREDENTIALS=new He("google-credentials-uid"),He.FIRST_PARTY=new He("first-party-uid"),He.MOCK_USER=new He("mock-user");var _o="11.0.2";var Wr=new sn("@firebase/firestore");function Zi(){return Wr.logLevel}function k(t,...e){if(Wr.logLevel<=re.DEBUG){let n=e.map(Hy);Wr.debug(`Firestore (${_o}): ${t}`,...n)}}function Mn(t,...e){if(Wr.logLevel<=re.ERROR){let n=e.map(Hy);Wr.error(`Firestore (${_o}): ${t}`,...n)}}function ao(t,...e){if(Wr.logLevel<=re.WARN){let n=e.map(Hy);Wr.warn(`Firestore (${_o}): ${t}`,...n)}}function Hy(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function Q(t="Unexpected state"){let e=`FIRESTORE (${_o}) INTERNAL ASSERTION FAILED: `+t;throw Mn(e),new Error(e)}function De(t,e){t||Q()}function le(t,e){return t}var O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=class extends nt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var cr=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var kl=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},fm=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(He.UNAUTHENTICATED))}shutdown(){}},pm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},gm=class{constructor(e){this.t=e,this.currentUser=He.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){De(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new cr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new cr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>b(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new cr)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string"),new kl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string"),new He(e)}},mm=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=He.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);let e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}},ym=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new mm(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(He.FIRST_PARTY))}shutdown(){}invalidateToken(){}},vm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Em=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){De(this.o===void 0);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De(typeof n.token=="string"),this.R=n.token,new vm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function tj(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var _m=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=tj(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function ue(t,e){return t<e?-1:t>e?1:0}function co(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Vt=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new B(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Y=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Vt(0,0))}static max(){return new t(new Vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ll=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(),r===void 0?r=e.length-n:r>e.length-n&&Q(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},xe=class t extends Ll{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new B(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},nj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Kt=class t extends Ll{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return nj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new B(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new B(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new B(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var z=class t{constructor(e){this.path=e}static fromPath(e){return new t(xe.fromString(e))}static fromName(e){return new t(xe.fromString(e).popFirst(5))}static empty(){return new t(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new xe(e.slice()))}};var Im=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Im.UNKNOWN_ID=-1;function rj(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new Vt(n+1,0):new Vt(n,r));return new Kr(i,z.empty(),e)}function ij(t){return new Kr(t.readTime,t.key,-1)}var Kr=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(Y.min(),z.empty(),-1)}static max(){return new t(Y.max(),z.empty(),-1)}};function oj(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=z.comparator(t.documentKey,e.documentKey),n!==0?n:ue(t.largestBatchId,e.largestBatchId))}var sj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",wm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ud(t){return b(this,null,function*(){if(t.code!==O.FAILED_PRECONDITION||t.message!==sj)throw t;k("LocalStore","Unexpectedly lost primary lease")})}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(f=>{s[l]=f,++c,c===o&&r(s)},f=>i(f))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function aj(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Io(t){return t.name==="IndexedDbTransactionError"}var qy=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function ld(t){return t==null}function Fl(t){return t===0&&1/t==-1/0}function cj(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=wC(e)),e=uj(t.get(n),e);return wC(e)}function uj(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function wC(t){return t+""}var lj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],A8=[...lj,"documentOverlays"],dj=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],hj=dj,fj=[...hj,"indexConfiguration","indexState","indexEntries"];var R8=[...fj,"globals"];function TC(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ia(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pj(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ne=class t{constructor(e,n){this.comparator=e,this.root=n||cn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,cn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new no(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new no(this.root,e,this.comparator,!1)}getReverseIterator(){return new no(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new no(this.root,e,this.comparator,!0)}},no=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},cn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();let e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}};cn.EMPTY=null,cn.RED=!0,cn.BLACK=!1;cn.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,n,r,i,o){return this}insert(e,n,r){return new cn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var qe=class t{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Vl(this.data.getIterator())}getIteratorFrom(e){return new Vl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Vl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Hr=class t{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new t([])}unionWith(e){let n=new qe(Kt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return co(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Ul=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var it=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Ul("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};it.EMPTY_BYTE_STRING=new it("");var gj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pn(t){if(De(!!t),typeof t=="string"){let e=0,n=gj.exec(t);if(De(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Te(t.seconds),nanos:Te(t.nanos)}}function Te(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xn(t){return typeof t=="string"?it.fromBase64String(t):it.fromUint8Array(t)}function zy(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function dd(t){let e=t.mapValue.fields.__previous_value__;return zy(e)?dd(e):e}function ua(t){let e=Pn(t.mapValue.fields.__local_write_time__.timestampValue);return new Vt(e.seconds,e.nanos)}var Tm=class{constructor(e,n,r,i,o,s,c,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l}},jl=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Rl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ur(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zy(t)?4:rS(t)?9007199254740991:nS(t)?10:11:Q()}function ln(t,e){if(t===e)return!0;let n=ur(t);if(n!==ur(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ua(t).isEqual(ua(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Pn(i.timestampValue),c=Pn(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return xn(i.bytesValue).isEqual(xn(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Te(i.geoPointValue.latitude)===Te(o.geoPointValue.latitude)&&Te(i.geoPointValue.longitude)===Te(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Te(i.integerValue)===Te(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Te(i.doubleValue),c=Te(o.doubleValue);return s===c?Fl(s)===Fl(c):isNaN(s)&&isNaN(c)}return!1}(t,e);case 9:return co(t.arrayValue.values||[],e.arrayValue.values||[],ln);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(TC(s)!==TC(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!ln(s[u],c[u])))return!1;return!0}(t,e);default:return Q()}}function la(t,e){return(t.values||[]).find(n=>ln(n,e))!==void 0}function uo(t,e){if(t===e)return 0;let n=ur(t),r=ur(e);if(n!==r)return ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(t.booleanValue,e.booleanValue);case 2:return function(o,s){let c=Te(o.integerValue||o.doubleValue),u=Te(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return DC(t.timestampValue,e.timestampValue);case 4:return DC(ua(t),ua(e));case 5:return ue(t.stringValue,e.stringValue);case 6:return function(o,s){let c=xn(o),u=xn(s);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let c=o.split("/"),u=s.split("/");for(let l=0;l<c.length&&l<u.length;l++){let f=ue(c[l],u[l]);if(f!==0)return f}return ue(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let c=ue(Te(o.latitude),Te(s.latitude));return c!==0?c:ue(Te(o.longitude),Te(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return bC(t.arrayValue,e.arrayValue);case 10:return function(o,s){var c,u,l,f;let p=o.fields||{},y=s.fields||{},v=(c=p.value)===null||c===void 0?void 0:c.arrayValue,S=(u=y.value)===null||u===void 0?void 0:u.arrayValue,N=ue(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((f=S?.values)===null||f===void 0?void 0:f.length)||0);return N!==0?N:bC(v,S)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Rl.mapValue&&s===Rl.mapValue)return 0;if(o===Rl.mapValue)return 1;if(s===Rl.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),l=s.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){let y=ue(u[p],f[p]);if(y!==0)return y;let v=uo(c[u[p]],l[f[p]]);if(v!==0)return v}return ue(u.length,f.length)}(t.mapValue,e.mapValue);default:throw Q()}}function DC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ue(t,e);let n=Pn(t),r=Pn(e),i=ue(n.seconds,r.seconds);return i!==0?i:ue(n.nanos,r.nanos)}function bC(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=uo(n[i],r[i]);if(o)return o}return ue(n.length,r.length)}function lo(t){return Dm(t)}function Dm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Pn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return xn(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Dm(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Dm(n.fields[s])}`;return i+"}"}(t.mapValue):Q()}function Pl(t){switch(ur(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=dd(t);return e?16+Pl(e):16;case 5:return 2*t.stringValue.length;case 6:return xn(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Pl(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ia(r.fields,(o,s)=>{i+=o.length+Pl(s)}),i}(t.mapValue);default:throw Q()}}function bm(t){return!!t&&"integerValue"in t}function Gy(t){return!!t&&"arrayValue"in t}function CC(t){return!!t&&"nullValue"in t}function SC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function cm(t){return!!t&&"mapValue"in t}function nS(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ia(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Ia(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ia(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ia(t.arrayValue.values[n]);return e}return Object.assign({},t)}function rS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Nn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!cm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ia(n)}setAll(e){let n=Kt.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}s?r[c.lastSegment()]=ia(s):i.push(c.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());cm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ln(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];cm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ia(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(ia(this.value))}};var Qt=class t{constructor(e,n,r,i,o,s,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new t(e,0,Y.min(),Y.min(),Y.min(),Nn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,Y.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,Y.min(),Y.min(),Nn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,Y.min(),Y.min(),Nn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ho=class{constructor(e,n){this.position=e,this.inclusive=n}};function AC(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=z.comparator(z.fromName(s.referenceValue),n.key):r=uo(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function RC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ln(t.position[n],e.position[n]))return!1;return!0}var fo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function mj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Bl=class{},Fe=class t extends Bl{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Sm(e,n,r):n==="array-contains"?new Nm(e,r):n==="in"?new Mm(e,r):n==="not-in"?new Pm(e,r):n==="array-contains-any"?new xm(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Am(e,r):new Rm(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(uo(n,this.value)):n!==null&&ur(this.value)===ur(n)&&this.matchesComparison(uo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},dn=class t extends Bl{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return iS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function iS(t){return t.op==="and"}function oS(t){return yj(t)&&iS(t)}function yj(t){for(let e of t.filters)if(e instanceof dn)return!1;return!0}function Cm(t){if(t instanceof Fe)return t.field.canonicalString()+t.op.toString()+lo(t.value);if(oS(t))return t.filters.map(e=>Cm(e)).join(",");{let e=t.filters.map(n=>Cm(n)).join(",");return`${t.op}(${e})`}}function sS(t,e){return t instanceof Fe?function(r,i){return i instanceof Fe&&r.op===i.op&&r.field.isEqual(i.field)&&ln(r.value,i.value)}(t,e):t instanceof dn?function(r,i){return i instanceof dn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&sS(s,i.filters[c]),!0):!1}(t,e):void Q()}function aS(t){return t instanceof Fe?function(n){return`${n.field.canonicalString()} ${n.op} ${lo(n.value)}`}(t):t instanceof dn?function(n){return n.op.toString()+" {"+n.getFilters().map(aS).join(" ,")+"}"}(t):"Filter"}var Sm=class extends Fe{constructor(e,n,r){super(e,n,r),this.key=z.fromName(r.referenceValue)}matches(e){let n=z.comparator(e.key,this.key);return this.matchesComparison(n)}},Am=class extends Fe{constructor(e,n){super(e,"in",n),this.keys=cS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Rm=class extends Fe{constructor(e,n){super(e,"not-in",n),this.keys=cS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function cS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>z.fromName(r.referenceValue))}var Nm=class extends Fe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Gy(n)&&la(n.arrayValue,this.value)}},Mm=class extends Fe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&la(this.value.arrayValue,n)}},Pm=class extends Fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(la(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!la(this.value.arrayValue,n)}},xm=class extends Fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Gy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>la(this.value.arrayValue,r))}};var Om=class{constructor(e,n=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.ue=null}};function NC(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Om(t,e,n,r,i,o,s)}function Wy(t){let e=le(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Cm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),ld(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>lo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>lo(r)).join(",")),e.ue=n}return e.ue}function Ky(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!mj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!sS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!RC(t.startAt,e.startAt)&&RC(t.endAt,e.endAt)}function km(t){return z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var po=class{constructor(e,n=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function vj(t,e,n,r,i,o,s,c){return new po(t,e,n,r,i,o,s,c)}function Qy(t){return new po(t)}function MC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ej(t){return t.collectionGroup!==null}function oa(t){let e=le(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new qe(Kt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new fo(o,r))}),n.has(Kt.keyField().canonicalString())||e.ce.push(new fo(Kt.keyField(),r))}return e.ce}function un(t){let e=le(t);return e.le||(e.le=_j(e,oa(t))),e.le}function _j(t,e){if(t.limitType==="F")return NC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new fo(i.field,o)});let n=t.endAt?new ho(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ho(t.startAt.position,t.startAt.inclusive):null;return NC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Lm(t,e,n){return new po(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function hd(t,e){return Ky(un(t),un(e))&&t.limitType===e.limitType}function uS(t){return`${Wy(un(t))}|lt:${t.limitType}`}function Xi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>aS(i)).join(", ")}]`),ld(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>lo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>lo(i)).join(",")),`Target(${r})`}(un(t))}; limitType=${t.limitType})`}function fd(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):z.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of oa(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,c,u){let l=AC(s,c,u);return s.inclusive?l<=0:l<0}(r.startAt,oa(r),i)||r.endAt&&!function(s,c,u){let l=AC(s,c,u);return s.inclusive?l>=0:l>0}(r.endAt,oa(r),i))}(t,e)}function Ij(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lS(t){return(e,n)=>{let r=!1;for(let i of oa(t)){let o=wj(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function wj(t,e,n){let r=t.field.isKeyField()?z.comparator(e.key,n.key):function(o,s,c){let u=s.data.field(o),l=c.data.field(o);return u!==null&&l!==null?uo(u,l):Q()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q()}}var On=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ia(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return pj(this.inner)}size(){return this.innerSize}};var Tj=new Ne(z.comparator);function lr(){return Tj}var dS=new Ne(z.comparator);function ra(...t){let e=dS;for(let n of t)e=e.insert(n.key,n);return e}function Dj(t){let e=dS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function qr(){return sa()}function hS(){return sa()}function sa(){return new On(t=>t.toString(),(t,e)=>t.isEqual(e))}var M8=new Ne(z.comparator),bj=new qe(z.comparator);function he(...t){let e=bj;for(let n of t)e=e.add(n);return e}var Cj=new qe(ue);function Sj(){return Cj}function Aj(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fl(e)?"-0":e}}function Rj(t){return{integerValue:""+t}}var go=class{constructor(){this._=void 0}};function Nj(t,e,n){return t instanceof da?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&zy(o)&&(o=dd(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof mo?fS(t,e):t instanceof yo?pS(t,e):function(i,o){let s=Pj(i,o),c=PC(s)+PC(i.Pe);return bm(s)&&bm(i.Pe)?Rj(c):Aj(i.serializer,c)}(t,e)}function Mj(t,e,n){return t instanceof mo?fS(t,e):t instanceof yo?pS(t,e):n}function Pj(t,e){return t instanceof ha?function(r){return bm(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var da=class extends go{},mo=class extends go{constructor(e){super(),this.elements=e}};function fS(t,e){let n=gS(e);for(let r of t.elements)n.some(i=>ln(i,r))||n.push(r);return{arrayValue:{values:n}}}var yo=class extends go{constructor(e){super(),this.elements=e}};function pS(t,e){let n=gS(e);for(let r of t.elements)n=n.filter(i=>!ln(i,r));return{arrayValue:{values:n}}}var ha=class extends go{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function PC(t){return Te(t.integerValue||t.doubleValue)}function gS(t){return Gy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function xj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof mo&&i instanceof mo||r instanceof yo&&i instanceof yo?co(r.elements,i.elements,ln):r instanceof ha&&i instanceof ha?ln(r.Pe,i.Pe):r instanceof da&&i instanceof da}(t.transform,e.transform)}var aa=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function xl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var fa=class{};function mS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Fm(t.key,aa.none()):new pa(t.key,t.data,aa.none());{let n=t.data,r=Nn.empty(),i=new qe(Kt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new vo(t.key,r,new Hr(i.toArray()),aa.none())}}function Oj(t,e,n){t instanceof pa?function(i,o,s){let c=i.value.clone(),u=OC(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):t instanceof vo?function(i,o,s){if(!xl(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=OC(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(yS(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function ca(t,e,n,r){return t instanceof pa?function(o,s,c,u){if(!xl(o.precondition,s))return c;let l=o.value.clone(),f=kC(o.fieldTransforms,u,s);return l.setAll(f),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof vo?function(o,s,c,u){if(!xl(o.precondition,s))return c;let l=kC(o.fieldTransforms,u,s),f=s.data;return f.setAll(yS(o)),f.setAll(l),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,c){return xl(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c}(t,e,n)}function xC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&co(r,i,(o,s)=>xj(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var pa=class extends fa{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},vo=class extends fa{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function yS(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function OC(t,e,n){let r=new Map;De(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,Mj(s,c,n[i]))}return r}function kC(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,Nj(o,s,e))}return r}var Fm=class extends fa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var Vm=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&Oj(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=ca(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=ca(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=hS();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=n.has(i.key)?null:c;let u=mS(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&co(this.mutations,e.mutations,(n,r)=>xC(n,r))&&co(this.baseMutations,e.baseMutations,(n,r)=>xC(n,r))}};var Um=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var jm=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Me,ce;function vS(t){if(t===void 0)return Mn("GRPC error has no .code"),O.UNKNOWN;switch(t){case Me.OK:return O.OK;case Me.CANCELLED:return O.CANCELLED;case Me.UNKNOWN:return O.UNKNOWN;case Me.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Me.INTERNAL:return O.INTERNAL;case Me.UNAVAILABLE:return O.UNAVAILABLE;case Me.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Me.NOT_FOUND:return O.NOT_FOUND;case Me.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Me.ABORTED:return O.ABORTED;case Me.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Me.DATA_LOSS:return O.DATA_LOSS;default:return Q()}}(ce=Me||(Me={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";var LC=null;function kj(){return new TextEncoder}var Lj=new ar([4294967295,4294967295],0);function FC(t){let e=kj().encode(t),n=new nm;return n.update(e),new Uint8Array(n.digest())}function VC(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ar([n,r],0),new ar([i,o],0)]}var Bm=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new zr(`Invalid padding: ${n}`);if(r<0)throw new zr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zr(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new zr(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=ar.fromNumber(this.Te)}Ee(e,n,r){let i=e.add(n.multiply(ar.fromNumber(r)));return i.compare(Lj)===1&&(i=new ar([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=FC(e),[r,i]=VC(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.Te===0)return;let n=FC(e),[r,i]=VC(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},zr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var $l=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,ga.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(Y.min(),i,new Ne(ue),lr(),he())}},ga=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,he(),he(),he())}};var ro=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},Hl=class{constructor(e,n){this.targetId=e,this.me=n}},ql=class{constructor(e,n,r=it.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},zl=class{constructor(){this.fe=0,this.ge=UC(),this.pe=it.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=he(),n=he(),r=he();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Q()}}),new ga(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=UC()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,De(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},$m=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=lr(),this.qe=Nl(),this.Qe=Nl(),this.Ke=new Ne(ue)}$e(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.me.count,i=this.Ye(n);if(i){let o=i.target;if(km(o))if(r===0){let s=new z(o.path);this.We(n,s,Qt.newNoDocument(s,Y.min()))}else De(r===1);else{let s=this.Ze(n);if(s!==r){let c=this.Xe(e),u=c?this.et(c,e,s):1;if(u!==0){this.He(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}LC?.tt(function(f,p,y,v,S){var N,M,L,H,J,oe;let be={localCacheCount:f,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},X=p.unchangedNames;return X&&(be.bloomFilter={applied:S===0,hashCount:(N=X?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(H=(L=(M=X?.bits)===null||M===void 0?void 0:M.bitmap)===null||L===void 0?void 0:L.length)!==null&&H!==void 0?H:0,padding:(oe=(J=X?.bits)===null||J===void 0?void 0:J.padding)!==null&&oe!==void 0?oe:0,mightContain:w=>{var m;return(m=v?.mightContain(w))!==null&&m!==void 0&&m}}),be}(s,e.me,this.Le.nt(),c,u))}}}}Xe(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,c;try{s=xn(r).toUint8Array()}catch(u){if(u instanceof Ul)return ao("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Bm(s,i,o)}catch(u){return ao(u instanceof zr?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Te===0?null:c}et(e,n,r){return n.me.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.nt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.We(n,o,null),i++)}),i}it(e){let n=new Map;this.Be.forEach((o,s)=>{let c=this.Ye(s);if(c){if(o.current&&km(c.target)){let u=new z(c.target.path);this.st(u).has(s)||this.ot(s,u)||this.We(s,u,Qt.newNoDocument(u,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=he();this.Qe.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let l=this.Ye(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new $l(e,n,this.Ke,this.ke,r);return this.ke=lr(),this.qe=Nl(),this.Qe=Nl(),this.Ke=new Ne(ue),i}Ue(e,n){if(!this.je(e))return;let r=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.ot(e,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Be.get(e);return n||(n=new zl,this.Be.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new qe(ue),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new qe(ue),this.qe=this.qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||k("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new zl),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function Nl(){return new Ne(z.comparator)}function UC(){return new Ne(z.comparator)}var Fj={asc:"ASCENDING",desc:"DESCENDING"},Vj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Uj={and:"AND",or:"OR"},Hm=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function qm(t,e){return t.useProto3Json||ld(e)?e:{value:e}}function jj(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Bj(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function io(t){return De(!!t),Y.fromTimestamp(function(n){let r=Pn(n);return new Vt(r.seconds,r.nanos)}(t))}function $j(t,e){return zm(t,e).canonicalString()}function zm(t,e){let n=function(i){return new xe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ES(t){let e=xe.fromString(t);return De(DS(e)),e}function um(t,e){let n=ES(e);if(n.get(1)!==t.databaseId.projectId)throw new B(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new z(IS(n))}function _S(t,e){return $j(t.databaseId,e)}function Hj(t){let e=ES(t);return e.length===4?xe.emptyPath():IS(e)}function jC(t){return new xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function IS(t){return De(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function qj(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,f){return l.useProto3Json?(De(f===void 0||typeof f=="string"),it.fromBase64String(f||"")):(De(f===void 0||f instanceof Buffer||f instanceof Uint8Array),it.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&function(l){let f=l.code===void 0?O.UNKNOWN:vS(l.code);return new B(f,l.message||"")}(s);n=new ql(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=um(t,r.document.name),o=io(r.document.updateTime),s=r.document.createTime?io(r.document.createTime):Y.min(),c=new Nn({mapValue:{fields:r.document.fields}}),u=Qt.newFoundDocument(i,o,s,c),l=r.targetIds||[],f=r.removedTargetIds||[];n=new ro(l,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=um(t,r.document),o=r.readTime?io(r.readTime):Y.min(),s=Qt.newNoDocument(i,o),c=r.removedTargetIds||[];n=new ro([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=um(t,r.document),o=r.removedTargetIds||[];n=new ro([],o,i,null)}else{if(!("filter"in e))return Q();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new jm(i,o),c=r.targetId;n=new Hl(c,s)}}return n}function zj(t,e){return{documents:[_S(t,e.path)]}}function Gj(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=_S(t,i);let o=function(l){if(l.length!==0)return TS(dn.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(f=>function(y){return{field:eo(y.field),direction:Qj(y.dir)}}(f))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let c=qm(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ct:n,parent:i}}function Wj(t){let e=Hj(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){De(r===1);let f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];n.where&&(o=function(p){let y=wS(p);return y instanceof dn&&oS(y)?y.getFilters():[y]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(y=>function(S){return new fo(to(S.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(y))}(n.orderBy));let c=null;n.limit&&(c=function(p){let y;return y=typeof p=="object"?p.value:p,ld(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(p){let y=!!p.before,v=p.values||[];return new ho(v,y)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let y=!p.before,v=p.values||[];return new ho(v,y)}(n.endAt)),vj(e,i,s,o,c,"F",u,l)}function Kj(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=to(n.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=to(n.unaryFilter.field);return Fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=to(n.unaryFilter.field);return Fe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=to(n.unaryFilter.field);return Fe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(t):t.fieldFilter!==void 0?function(n){return Fe.create(to(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return dn.create(n.compositeFilter.filters.map(r=>wS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q()}}(n.compositeFilter.op))}(t):Q()}function Qj(t){return Fj[t]}function Yj(t){return Vj[t]}function Jj(t){return Uj[t]}function eo(t){return{fieldPath:t.canonicalString()}}function to(t){return Kt.fromServerFormat(t.fieldPath)}function TS(t){return t instanceof Fe?function(n){if(n.op==="=="){if(SC(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NAN"}};if(CC(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(SC(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NOT_NAN"}};if(CC(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eo(n.field),op:Yj(n.op),value:n.value}}}(t):t instanceof dn?function(n){let r=n.getFilters().map(i=>TS(i));return r.length===1?r[0]:{compositeFilter:{op:Jj(n.op),filters:r}}}(t):Q()}function DS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var ma=class t{constructor(e,n,r,i,o=Y.min(),s=Y.min(),c=it.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Gm=class{constructor(e){this.ht=e}};function Zj(t){let e=Wj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Lm(e,e.limit,"L"):e}var Gl=class{constructor(){}Et(e,n){this.dt(e,n),n.At()}dt(e,n){if("nullValue"in e)this.Rt(n,5);else if("booleanValue"in e)this.Rt(n,10),n.Vt(e.booleanValue?1:0);else if("integerValue"in e)this.Rt(n,15),n.Vt(Te(e.integerValue));else if("doubleValue"in e){let r=Te(e.doubleValue);isNaN(r)?this.Rt(n,13):(this.Rt(n,15),Fl(r)?n.Vt(0):n.Vt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Rt(n,20),typeof r=="string"&&(r=Pn(r)),n.ft(`${r.seconds||""}`),n.Vt(r.nanos||0)}else if("stringValue"in e)this.gt(e.stringValue,n),this.yt(n);else if("bytesValue"in e)this.Rt(n,30),n.wt(xn(e.bytesValue)),this.yt(n);else if("referenceValue"in e)this.St(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Rt(n,45),n.Vt(r.latitude||0),n.Vt(r.longitude||0)}else"mapValue"in e?rS(e)?this.Rt(n,Number.MAX_SAFE_INTEGER):nS(e)?this.bt(e.mapValue,n):(this.Dt(e.mapValue,n),this.yt(n)):"arrayValue"in e?(this.vt(e.arrayValue,n),this.yt(n)):Q()}gt(e,n){this.Rt(n,25),this.Ct(e,n)}Ct(e,n){n.ft(e)}Dt(e,n){let r=e.fields||{};this.Rt(n,55);for(let i of Object.keys(r))this.gt(i,n),this.dt(r[i],n)}bt(e,n){var r,i;let o=e.fields||{};this.Rt(n,53);let s="value",c=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Rt(n,15),n.Vt(Te(c)),this.gt(s,n),this.dt(o[s],n)}vt(e,n){let r=e.values||[];this.Rt(n,50);for(let i of r)this.dt(i,n)}St(e,n){this.Rt(n,37),z.fromName(e).path.forEach(r=>{this.Rt(n,60),this.Ct(r,n)})}Rt(e,n){e.Vt(n)}yt(e){e.Vt(2)}};Gl.Ft=new Gl;var Wm=class{constructor(){this.ln=new Km}addToCollectionParentIndex(e,n){return this.ln.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(Kr.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(Kr.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},Km=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new qe(xe.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qe(xe.comparator)).toArray()}};var P8=new Uint8Array(0);var BC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ft=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};Ft.DEFAULT_COLLECTION_PERCENTILE=10,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ft.DEFAULT=new Ft(41943040,Ft.DEFAULT_COLLECTION_PERCENTILE,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ft.DISABLED=new Ft(-1,0,0);var ya=class t{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new t(0)}static Qn(){return new t(-1)}};function $C([t,e],[n,r]){let i=ue(t,n);return i===0?ue(e,r):i}var Qm=class{constructor(e){this.Gn=e,this.buffer=new qe($C),this.zn=0}jn(){return++this.zn}Hn(e){let n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();$C(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},Ym=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){k("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>b(this,null,function*(){this.Jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Io(n)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield ud(n)}yield this.Yn(3e5)}))}},Jm=class{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return P.resolve(qy.oe);let r=new Qm(n);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(BC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),BC):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let r,i,o,s,c,u,l,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Zi()<=re.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-f}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function Xj(t,e){return new Jm(t,e)}var Zm=class{constructor(){this.changes=new On(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Xm=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var ey=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ca(r.mutation,i,Hr.empty(),Vt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){let i=qr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=ra();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=qr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{n.set(s,c)})})}computeViews(e,n,r,i){let o=lr(),s=sa(),c=function(){return sa()}();return n.forEach((u,l)=>{let f=r.get(l.key);i.has(l.key)&&(f===void 0||f.mutation instanceof vo)?o=o.insert(l.key,l):f!==void 0?(s.set(l.key,f.mutation.getFieldMask()),ca(f.mutation,l,f.mutation.getFieldMask(),Vt.now())):s.set(l.key,Hr.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,f)=>s.set(l,f)),n.forEach((l,f)=>{var p;return c.set(l,new Xm(f,(p=s.get(l))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){let r=sa(),i=new Ne((s,c)=>s-c),o=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let c of s)c.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let f=r.get(u)||Hr.empty();f=c.applyToLocalView(l,f),r.set(u,f);let p=(i.get(c.batchId)||he()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,f=u.value,p=hS();f.forEach(y=>{if(!o.has(y)){let v=mS(n.get(y),r.get(y));v!==null&&p.set(y,v),o=o.add(y)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return z.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ej(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):P.resolve(qr()),c=-1,u=o;return s.next(l=>P.forEach(l,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(f)?P.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{u=u.insert(f,y)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,he())).next(f=>({batchId:c,changes:Dj(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new z(n)).next(r=>{let i=ra();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=ra();return this.indexManager.getCollectionParents(e,o).next(c=>P.forEach(c,u=>{let l=function(p,y){return new po(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((p,y)=>{s=s.insert(p,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let f=l.getKey();s.get(f)===null&&(s=s.insert(f,Qt.newInvalidDocument(f)))});let c=ra();return s.forEach((u,l)=>{let f=o.get(u);f!==void 0&&ca(f.mutation,l,Hr.empty(),Vt.now()),fd(n,l)&&(c=c.insert(u,l))}),c})}};var ty=class{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return P.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:io(i.createTime)}}(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:Zj(i.bundledQuery),readTime:io(i.readTime)}}(n)),P.resolve()}};var ny=class{constructor(){this.overlays=new Ne(z.comparator),this.Er=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=qr();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.Tt(e,n,o)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Er.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Er.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=qr(),o=n.length+1,s=new z(n.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Ne((l,f)=>l-f),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let f=o.get(l.largestBatchId);f===null&&(f=qr(),o=o.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}let c=qr(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>c.set(l,f)),!(c.size()>=i)););return P.resolve(c)}Tt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Um(n,r));let o=this.Er.get(n);o===void 0&&(o=he(),this.Er.set(n,o)),this.Er.set(n,o.add(r.key))}};var ry=class{constructor(){this.sessionToken=it.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}};var va=class{constructor(){this.dr=new qe(Pe.Ar),this.Rr=new qe(Pe.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,n){let r=new Pe(e,n);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.gr(new Pe(e,n))}pr(e,n){e.forEach(r=>this.removeReference(r,n))}yr(e){let n=new z(new xe([])),r=new Pe(n,e),i=new Pe(n,e+1),o=[];return this.Rr.forEachInRange([r,i],s=>{this.gr(s),o.push(s.key)}),o}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){let n=new z(new xe([])),r=new Pe(n,e),i=new Pe(n,e+1),o=he();return this.Rr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Pe(e,0),r=this.dr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Pe=class{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return z.comparator(e.key,n.key)||ue(e.br,n.br)}static Vr(e,n){return ue(e.br,n.br)||z.comparator(e.key,n.key)}};var iy=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new qe(Pe.Ar)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Vm(o,n,r,i);this.mutationQueue.push(s);for(let c of i)this.vr=this.vr.add(new Pe(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,n){return P.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Fr(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Pe(n,0),i=new Pe(n,Number.POSITIVE_INFINITY),o=[];return this.vr.forEachInRange([r,i],s=>{let c=this.Cr(s.br);o.push(c)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qe(ue);return n.forEach(i=>{let o=new Pe(i,0),s=new Pe(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([o,s],c=>{r=r.add(c.br)})}),P.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;z.isDocumentKey(o)||(o=o.child(""));let s=new Pe(new z(o),0),c=new qe(ue);return this.vr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.br)),!0)},s),P.resolve(this.Mr(c))}Mr(e){let n=[];return e.forEach(r=>{let i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){De(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return P.forEach(n.mutations,i=>{let o=new Pe(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,n){let r=new Pe(n,0),i=this.vr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){let n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var oy=class{constructor(e){this.Nr=e,this.docs=function(){return new Ne(z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():Qt.newInvalidDocument(n))}getEntries(e,n){let r=lr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Qt.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=lr(),s=n.path,c=new z(s.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:f}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||oj(ij(f),r)<=0||(i.has(f.key)||fd(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Q()}Lr(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new sy(this)}getSize(e){return P.resolve(this.size)}},sy=class extends Zm{constructor(e){super(),this.hr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}};var ay=class{constructor(e){this.persistence=e,this.Br=new On(n=>Wy(n),Ky),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.kr=0,this.qr=new va,this.targetCount=0,this.Qr=ya.qn()}forEachTarget(e,n){return this.Br.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),P.resolve()}Un(e){this.Br.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Qr=new ya(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.Un(n),P.resolve()}removeTargetData(e,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Br.forEach((s,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Br.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.Br.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.qr.mr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.qr.pr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.qr.Sr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.qr.containsKey(n))}};var Wl=class{constructor(e,n){this.Kr={},this.overlays={},this.$r=new qy(0),this.Ur=!1,this.Ur=!0,this.Wr=new ry,this.referenceDelegate=e(this),this.Gr=new ay(this),this.indexManager=new Wm,this.remoteDocumentCache=function(i){return new oy(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new Gm(n),this.jr=new ty(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ny,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Kr[e.toKey()];return r||(r=new iy(n,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,r){k("MemoryPersistence","Starting transaction:",e);let i=new cy(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(o=>this.referenceDelegate.Jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Yr(e,n){return P.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,n)))}},cy=class extends wm{constructor(e){super(),this.currentSequenceNumber=e}},uy=class t{constructor(e){this.persistence=e,this.Zr=new va,this.Xr=null}static ei(e){return new t(e)}get ti(){if(this.Xr)return this.Xr;throw Q()}addReference(e,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),P.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.ti.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.ti,r=>{let i=z.fromPath(r);return this.ni(e,i).next(o=>{o||n.removeEntry(i,Y.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return P.or([()=>P.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}},Kl=class t{constructor(e,n){this.persistence=e,this.ri=new On(r=>cj(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Xj(this,n)}static ei(e,n){return new t(e,n)}Hr(){}Jr(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){let n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}er(e,n){return P.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(o=>o?P.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Lr(e,s=>this.ir(e,s,n).next(c=>{c||(r++,o.removeEntry(s,Y.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),P.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Pl(e.data.value)),n}ir(e,n,r){return P.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.ri.get(n);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var ly=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(e,n){let r=he(),i=he();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var dy=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var hy=class{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return Lb()?8:aj(Nt())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.Xi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.es(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new dy;return this.ts(e,n,s).next(c=>{if(o.result=c,this.Hi)return this.ns(e,n,s,c.size)})}).next(()=>o.result)}ns(e,n,r,i){return r.documentReadCount<this.Ji?(Zi()<=re.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",Xi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),P.resolve()):(Zi()<=re.DEBUG&&k("QueryEngine","Query:",Xi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(Zi()<=re.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",Xi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,un(n))):P.resolve())}Xi(e,n){if(MC(n))return P.resolve(null);let r=un(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Lm(n,null,"F"),r=un(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=he(...o);return this.Zi.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.rs(n,c);return this.ss(n,l,s,u.readTime)?this.Xi(e,Lm(n,null,"F")):this.os(e,l,n,u)}))})))}es(e,n,r,i){return MC(n)||i.isEqual(Y.min())?P.resolve(null):this.Zi.getDocuments(e,r).next(o=>{let s=this.rs(n,o);return this.ss(n,s,r,i)?P.resolve(null):(Zi()<=re.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Xi(n)),this.os(e,s,n,rj(i,-1)).next(c=>c))})}rs(e,n){let r=new qe(lS(e));return n.forEach((i,o)=>{fd(e,o)&&(r=r.add(o))}),r}ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ts(e,n,r){return Zi()<=re.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",Xi(n)),this.Zi.getDocumentsMatchingQuery(e,n,Kr.min(),r)}os(e,n,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var fy=class{constructor(e,n,r,i){this.persistence=e,this._s=n,this.serializer=i,this.us=new Ne(ue),this.cs=new On(o=>Wy(o),Ky),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ey(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}};function e2(t,e,n,r){return new fy(t,e,n,r)}function bS(t,e){return b(this,null,function*(){let n=le(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ps(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=he();for(let l of i){s.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}for(let l of o){c.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ts:l,removedBatchIds:s,addedBatchIds:c}))})})})}function CS(t){let e=le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function t2(t,e){let n=le(t),r=e.snapshotVersion,i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;let c=[];e.targetChanges.forEach((f,p)=>{let y=i.get(p);if(!y)return;c.push(n.Gr.removeMatchingKeys(o,f.removedDocuments,p).next(()=>n.Gr.addMatchingKeys(o,f.addedDocuments,p)));let v=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(it.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,r)),i=i.insert(p,v),function(N,M,L){return N.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(y,v,f)&&c.push(n.Gr.updateTargetData(o,v))});let u=lr(),l=he();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))}),c.push(n2(o,s,e.documentUpdates).next(f=>{u=f.Is,l=f.Es})),!r.isEqual(Y.min())){let f=n.Gr.getLastRemoteSnapshotVersion(o).next(p=>n.Gr.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(f)}return P.waitFor(c).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.us=i,o))}function n2(t,e,n){let r=he(),i=he();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=lr();return n.forEach((c,u)=>{let l=o.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):k("LocalStore","Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{Is:s,Es:i}})}function r2(t,e){let n=le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):n.Gr.allocateTargetId(r).next(s=>(i=new ma(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(e,r.targetId)),r})}function py(t,e,n){return b(this,null,function*(){let r=le(t),i=r.us.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Io(s))throw s;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.us=r.us.remove(e),r.cs.delete(i.target)})}function HC(t,e,n){let r=le(t),i=Y.min(),o=he();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,f){let p=le(u),y=p.cs.get(f);return y!==void 0?P.resolve(p.us.get(y)):p.Gr.getTargetData(l,f)}(r,s,un(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r._s.getDocumentsMatchingQuery(s,e,n?i:Y.min(),n?o:he())).next(c=>(i2(r,Ij(e),c),{documents:c,ds:o})))}function i2(t,e,n){let r=t.ls.get(e)||Y.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ls.set(e,r)}var Ql=class{constructor(){this.activeTargetIds=Sj()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var gy=class{constructor(){this._o=new Ql,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,r){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new Ql,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var my=class{uo(e){}shutdown(){}};var Yl=class{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.To)e(0)}Po(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ml=null;function lm(){return Ml===null?Ml=function(){return 268435456+Math.round(2147483648*Math.random())}():Ml++,"0x"+Ml.toString(16)}var o2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var yy=class{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}};var rt="WebChannelConnection",vy=class extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${o}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Oo(n,r,i,o,s){let c=lm(),u=this.No(n,r.toUriEncodedString());k("RestConnection",`Sending RPC '${n}' ${c}:`,u,i);let l={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(l,o,s),this.Bo(n,u,l,i).then(f=>(k("RestConnection",`Received RPC '${n}' ${c}: `,f),f),f=>{throw ao("RestConnection",`RPC '${n}' ${c} failed with error: `,f,"url: ",u,"request:",i),f})}ko(n,r,i,o,s,c){return this.Oo(n,r,i,o,s)}Lo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_o}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}No(n,r){let i=o2[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,n,r,i){let o=lm();return new Promise((s,c)=>{let u=new rm;u.setWithCredentials(!0),u.listenOnce(im.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case na.NO_ERROR:let f=u.getResponseJson();k(rt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),s(f);break;case na.TIMEOUT:k(rt,`RPC '${e}' ${o} timed out`),c(new B(O.DEADLINE_EXCEEDED,"Request time out"));break;case na.HTTP_ERROR:let p=u.getStatus();if(k(rt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);let v=y?.error;if(v&&v.status&&v.message){let S=function(M){let L=M.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(L)>=0?L:O.UNKNOWN}(v.status);c(new B(S,v.message))}else c(new B(O.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new B(O.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{k(rt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);k(rt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",l,r,15)})}qo(e,n,r){let i=lm(),o=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=am(),c=sm(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Lo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let f=o.join("");k(rt,`Creating RPC '${e}' stream ${i}: ${f}`,u);let p=s.createWebChannel(f,u),y=!1,v=!1,S=new yy({Eo:M=>{v?k(rt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(y||(k(rt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),k(rt,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},Ao:()=>p.close()}),N=(M,L,H)=>{M.listen(L,J=>{try{H(J)}catch(oe){setTimeout(()=>{throw oe},0)}})};return N(p,Ji.EventType.OPEN,()=>{v||(k(rt,`RPC '${e}' stream ${i} transport opened.`),S.So())}),N(p,Ji.EventType.CLOSE,()=>{v||(v=!0,k(rt,`RPC '${e}' stream ${i} transport closed`),S.Do())}),N(p,Ji.EventType.ERROR,M=>{v||(v=!0,ao(rt,`RPC '${e}' stream ${i} transport errored:`,M),S.Do(new B(O.UNAVAILABLE,"The operation could not be completed")))}),N(p,Ji.EventType.MESSAGE,M=>{var L;if(!v){let H=M.data[0];De(!!H);let J=H,oe=J?.error||((L=J[0])===null||L===void 0?void 0:L.error);if(oe){k(rt,`RPC '${e}' stream ${i} received error:`,oe);let be=oe.status,X=function(E){let I=Me[E];if(I!==void 0)return vS(I)}(be),w=oe.message;X===void 0&&(X=O.INTERNAL,w="Unknown error status: "+be+" with message "+oe.message),v=!0,S.Do(new B(X,w)),p.close()}else k(rt,`RPC '${e}' stream ${i} received:`,H),S.vo(H)}}),N(c,om.STAT_EVENT,M=>{M.stat===Al.PROXY?k(rt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===Al.NOPROXY&&k(rt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.bo()},0),S}};function dm(){return typeof document<"u"?document:null}function SS(t){return new Hm(t,!0)}var Jl=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.li=e,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=o,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();let n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}};var Ey=class{constructor(e,n,r,i,o,s,c,u){this.li=e,this.Yo=r,this.Zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new Jl(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}stop(){return b(this,null,function*(){this.i_()&&(yield this.close(0))})}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}u_(){return b(this,null,function*(){if(this.s_())return this.close(0)})}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}close(e,n){return b(this,null,function*(){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(Mn(n.toString()),Mn("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.po(n)})}P_(){}auth(){this.state=1;let e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{e(()=>{let i=new B(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,n){let r=this.T_(this.Xo);this.stream=this.d_(e,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(()=>b(this,null,function*(){this.state=0,this.start()}))}E_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},_y=class extends Ey{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}d_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();let n=qj(this.serializer,e),r=function(o){if(!("targetChange"in o))return Y.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Y.min():s.readTime?io(s.readTime):Y.min()}(e);return this.listener.R_(n,r)}V_(e){let n={};n.database=jC(this.serializer),n.addTarget=function(o,s){let c,u=s.target;if(c=km(u)?{documents:zj(o,u)}:{query:Gj(o,u).ct},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=Bj(o,s.resumeToken);let l=qm(o,s.expectedCount);l!==null&&(c.expectedCount=l)}else if(s.snapshotVersion.compareTo(Y.min())>0){c.readTime=jj(o,s.snapshotVersion.toTimestamp());let l=qm(o,s.expectedCount);l!==null&&(c.expectedCount=l)}return c}(this.serializer,e);let r=Kj(this.serializer,e);r&&(n.labels=r),this.c_(n)}m_(e){let n={};n.database=jC(this.serializer),n.removeTarget=e,this.c_(n)}};var Iy=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new B(O.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Oo(e,zm(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(O.UNKNOWN,o.toString())})}ko(e,n,r,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.ko(e,zm(n,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(O.UNKNOWN,s.toString())})}terminate(){this.S_=!0,this.connection.terminate()}},wy=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Mn(n),this.C_=!1):k("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}};var Ty=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=o,this.Q_.uo(s=>{r.enqueueAndForget(()=>b(this,null,function*(){Ta(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(u){return b(this,null,function*(){let l=le(u);l.k_.add(4),yield wa(l),l.K_.set("Unknown"),l.k_.delete(4),yield pd(l)})}(this))}))}),this.K_=new wy(r,i)}};function pd(t){return b(this,null,function*(){if(Ta(t))for(let e of t.q_)yield e(!0)})}function wa(t){return b(this,null,function*(){for(let e of t.q_)yield e(!1)})}function AS(t,e){let n=le(t);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),Xy(n)?Zy(n):wo(n).s_()&&Jy(n,e))}function Yy(t,e){let n=le(t),r=wo(n);n.B_.delete(e),r.s_()&&RS(n,e),n.B_.size===0&&(r.s_()?r.a_():Ta(n)&&n.K_.set("Unknown"))}function Jy(t,e){if(t.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}wo(t).V_(e)}function RS(t,e){t.U_.xe(e),wo(t).m_(e)}function Zy(t){t.U_=new $m({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.B_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),wo(t).start(),t.K_.F_()}function Xy(t){return Ta(t)&&!wo(t).i_()&&t.B_.size>0}function Ta(t){return le(t).k_.size===0}function NS(t){t.U_=void 0}function s2(t){return b(this,null,function*(){t.K_.set("Online")})}function a2(t){return b(this,null,function*(){t.B_.forEach((e,n)=>{Jy(t,e)})})}function c2(t,e){return b(this,null,function*(){NS(t),Xy(t)?(t.K_.O_(e),Zy(t)):t.K_.set("Unknown")})}function u2(t,e,n){return b(this,null,function*(){if(t.K_.set("Online"),e instanceof ql&&e.state===2&&e.cause)try{yield function(i,o){return b(this,null,function*(){let s=o.cause;for(let c of o.targetIds)i.B_.has(c)&&(yield i.remoteSyncer.rejectListen(c,s),i.B_.delete(c),i.U_.removeTarget(c))})}(t,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield qC(t,r)}else if(e instanceof ro?t.U_.$e(e):e instanceof Hl?t.U_.Je(e):t.U_.Ge(e),!n.isEqual(Y.min()))try{let r=yield CS(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let c=o.U_.it(s);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let f=o.B_.get(l);f&&o.B_.set(l,f.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,l)=>{let f=o.B_.get(u);if(!f)return;o.B_.set(u,f.withResumeToken(it.EMPTY_BYTE_STRING,f.snapshotVersion)),RS(o,u);let p=new ma(f.target,u,l,f.sequenceNumber);Jy(o,p)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield qC(t,r)}})}function qC(t,e,n){return b(this,null,function*(){if(!Io(e))throw e;t.k_.add(1),yield wa(t),t.K_.set("Offline"),n||(n=()=>CS(t.localStore)),t.asyncQueue.enqueueRetryable(()=>b(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield n(),t.k_.delete(1),yield pd(t)}))})}function zC(t,e){return b(this,null,function*(){let n=le(t);n.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=Ta(n);n.k_.add(3),yield wa(n),r&&n.K_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),yield pd(n)})}function l2(t,e){return b(this,null,function*(){let n=le(t);e?(n.k_.delete(2),yield pd(n)):e||(n.k_.add(2),yield wa(n),n.K_.set("Unknown"))})}function wo(t){return t.W_||(t.W_=function(n,r,i){let o=le(n);return o.b_(),new _y(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Ro:s2.bind(null,t),mo:a2.bind(null,t),po:c2.bind(null,t),R_:u2.bind(null,t)}),t.q_.push(e=>b(this,null,function*(){e?(t.W_.__(),Xy(t)?Zy(t):t.K_.set("Unknown")):(yield t.W_.stop(),NS(t))}))),t.W_}var Dy=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,c=new t(e,n,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function MS(t,e){if(Mn("AsyncQueue",`${e}: ${t}`),Io(t))return new B(O.UNAVAILABLE,`${e}: ${t}`);throw t}var Zl=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||z.comparator(n.key,r.key):(n,r)=>z.comparator(n.key,r.key),this.keyedMap=ra(),this.sortedSet=new Ne(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Xl=class{constructor(){this.z_=new Ne(z.comparator)}track(e){let n=e.doc.key,r=this.z_.get(n);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(n,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(n):e.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):Q():this.z_=this.z_.insert(n,e)}j_(){let e=[];return this.z_.inorderTraversal((n,r)=>{e.push(r)}),e}},Eo=class t{constructor(e,n,r,i,o,s,c,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(c=>{s.push({type:0,doc:c})}),new t(e,n,Zl.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var by=class{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}},Cy=class{constructor(){this.queries=GC(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){let i=le(n),o=i.queries;i.queries=GC(),o.forEach((s,c)=>{for(let u of c.J_)u.onError(r)})})(this,new B(O.ABORTED,"Firestore shutting down"))}};function GC(){return new On(t=>uS(t),hd)}function d2(t,e){return b(this,null,function*(){let n=le(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Y_()&&e.Z_()&&(r=2):(o=new by,r=e.Z_()?0:1);try{switch(r){case 0:o.H_=yield n.onListen(i,!0);break;case 1:o.H_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let c=MS(s,`Initialization of query '${Xi(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,o),o.J_.push(e),e.ea(n.onlineState),o.H_&&e.ta(o.H_)&&ev(n)})}function h2(t,e){return b(this,null,function*(){let n=le(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.J_.indexOf(e);s>=0&&(o.J_.splice(s,1),o.J_.length===0?i=e.Z_()?0:1:!o.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function f2(t,e){let n=le(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let c of s.J_)c.ta(i)&&(r=!0);s.H_=i}}r&&ev(n)}function p2(t,e,n){let r=le(t),i=r.queries.get(e);if(i)for(let o of i.J_)o.onError(n);r.queries.delete(e)}function ev(t){t.X_.forEach(e=>{e.next()})}var Sy,WC;(WC=Sy||(Sy={})).na="default",WC.Cache="cache";var Ay=class{constructor(e,n,r){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Eo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;let r=n!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;let n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=Eo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Sy.Cache}};var ed=class{constructor(e){this.key=e}},td=class{constructor(e){this.key=e}},Ry=class{constructor(e,n){this.query=e,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=he(),this.mutatedKeys=he(),this.Va=lS(e),this.ma=new Zl(this.Va)}get fa(){return this.da}ga(e,n){let r=n?n.pa:new Xl,i=n?n.ma:this.ma,o=n?n.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let y=i.get(f),v=fd(this.query,p)?p:null,S=!!y&&this.mutatedKeys.has(y.key),N=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),M=!1;y&&v?y.data.isEqual(v.data)?S!==N&&(r.track({type:3,doc:v}),M=!0):this.ya(y,v)||(r.track({type:2,doc:v}),M=!0,(u&&this.Va(v,u)>0||l&&this.Va(v,l)<0)&&(c=!0)):!y&&v?(r.track({type:0,doc:v}),M=!0):y&&!v&&(r.track({type:1,doc:y}),M=!0,(u||l)&&(c=!0)),M&&(v?(s=s.add(v),o=N?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{ma:s,pa:r,ss:c,mutatedKeys:o}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;let s=e.pa.j_();s.sort((f,p)=>function(v,S){let N=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return N(v)-N(S)}(f.type,p.type)||this.Va(f.doc,p.doc)),this.wa(r),i=i!=null&&i;let c=n&&!i?this.Sa():[],u=this.Ra.size===0&&this.current&&!i?1:0,l=u!==this.Aa;return this.Aa=u,s.length!==0||l?{snapshot:new Eo(this.query,e.ma,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:c}:{ba:c}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Xl,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.da=this.da.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];let e=this.Ra;this.Ra=he(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});let n=[];return e.forEach(r=>{this.Ra.has(r)||n.push(new td(r))}),this.Ra.forEach(r=>{e.has(r)||n.push(new ed(r))}),n}va(e){this.da=e.ds,this.Ra=he();let n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return Eo.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}},Ny=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},My=class{constructor(e){this.key=e,this.Fa=!1}},Py=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ma={},this.xa=new On(c=>uS(c),hd),this.Oa=new Map,this.Na=new Set,this.La=new Ne(z.comparator),this.Ba=new Map,this.ka=new va,this.qa={},this.Qa=new Map,this.Ka=ya.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}};function g2(t,e,n=!0){return b(this,null,function*(){let r=LS(t),i,o=r.xa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Ca()):i=yield PS(r,e,n,!0),i})}function m2(t,e){return b(this,null,function*(){let n=LS(t);yield PS(n,e,!0,!1)})}function PS(t,e,n,r){return b(this,null,function*(){let i=yield r2(t.localStore,un(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),c;return r&&(c=yield y2(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&AS(t.remoteStore,i),c})}function y2(t,e,n,r,i){return b(this,null,function*(){t.Ua=(p,y,v)=>function(N,M,L,H){return b(this,null,function*(){let J=M.view.ga(L);J.ss&&(J=yield HC(N.localStore,M.query,!1).then(({documents:w})=>M.view.ga(w,J)));let oe=H&&H.targetChanges.get(M.targetId),be=H&&H.targetMismatches.get(M.targetId)!=null,X=M.view.applyChanges(J,N.isPrimaryClient,oe,be);return QC(N,M.targetId,X.ba),X.snapshot})}(t,p,y,v);let o=yield HC(t.localStore,e,!0),s=new Ry(e,o.ds),c=s.ga(o.documents),u=ga.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(c,t.isPrimaryClient,u);QC(t,n,l.ba);let f=new Ny(e,n,s);return t.xa.set(e,f),t.Oa.has(n)?t.Oa.get(n).push(e):t.Oa.set(n,[e]),l.snapshot})}function v2(t,e,n){return b(this,null,function*(){let r=le(t),i=r.xa.get(e),o=r.Oa.get(i.targetId);if(o.length>1)return r.Oa.set(i.targetId,o.filter(s=>!hd(s,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield py(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Yy(r.remoteStore,i.targetId),xy(r,i.targetId)}).catch(ud))):(xy(r,i.targetId),yield py(r.localStore,i.targetId,!0))})}function E2(t,e){return b(this,null,function*(){let n=le(t),r=n.xa.get(e),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Yy(n.remoteStore,r.targetId))})}function xS(t,e){return b(this,null,function*(){let n=le(t);try{let r=yield t2(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Ba.get(o);s&&(De(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Fa=!0:i.modifiedDocuments.size>0?De(s.Fa):i.removedDocuments.size>0&&(De(s.Fa),s.Fa=!1))}),yield kS(n,r,e)}catch(r){yield ud(r)}})}function KC(t,e,n){let r=le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.xa.forEach((o,s)=>{let c=s.view.ea(e);c.snapshot&&i.push(c.snapshot)}),function(s,c){let u=le(s);u.onlineState=c;let l=!1;u.queries.forEach((f,p)=>{for(let y of p.J_)y.ea(c)&&(l=!0)}),l&&ev(u)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function _2(t,e,n){return b(this,null,function*(){let r=le(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Ba.get(e),o=i&&i.key;if(o){let s=new Ne(z.comparator);s=s.insert(o,Qt.newNoDocument(o,Y.min()));let c=he().add(o),u=new $l(Y.min(),new Map,new Ne(ue),s,c);yield xS(r,u),r.La=r.La.remove(o),r.Ba.delete(e),tv(r)}else yield py(r.localStore,e,!1).then(()=>xy(r,e,n)).catch(ud)})}function xy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Oa.get(e))t.xa.delete(r),n&&t.Ma.Wa(r,n);t.Oa.delete(e),t.isPrimaryClient&&t.ka.yr(e).forEach(r=>{t.ka.containsKey(r)||OS(t,r)})}function OS(t,e){t.Na.delete(e.path.canonicalString());let n=t.La.get(e);n!==null&&(Yy(t.remoteStore,n),t.La=t.La.remove(e),t.Ba.delete(n),tv(t))}function QC(t,e,n){for(let r of n)r instanceof ed?(t.ka.addReference(r.key,e),I2(t,r)):r instanceof td?(k("SyncEngine","Document no longer in limbo: "+r.key),t.ka.removeReference(r.key,e),t.ka.containsKey(r.key)||OS(t,r.key)):Q()}function I2(t,e){let n=e.key,r=n.path.canonicalString();t.La.get(n)||t.Na.has(r)||(k("SyncEngine","New document in limbo: "+n),t.Na.add(r),tv(t))}function tv(t){for(;t.Na.size>0&&t.La.size<t.maxConcurrentLimboResolutions;){let e=t.Na.values().next().value;t.Na.delete(e);let n=new z(xe.fromString(e)),r=t.Ka.next();t.Ba.set(r,new My(n)),t.La=t.La.insert(n,r),AS(t.remoteStore,new ma(un(Qy(n.path)),r,"TargetPurposeLimboResolution",qy.oe))}}function kS(t,e,n){return b(this,null,function*(){let r=le(t),i=[],o=[],s=[];r.xa.isEmpty()||(r.xa.forEach((c,u)=>{s.push(r.Ua(u,e,n).then(l=>{var f;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(f=n?.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=ly.zi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ma.R_(i),yield function(u,l){return b(this,null,function*(){let f=le(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,y=>P.forEach(y.Wi,v=>f.persistence.referenceDelegate.addReference(p,y.targetId,v)).next(()=>P.forEach(y.Gi,v=>f.persistence.referenceDelegate.removeReference(p,y.targetId,v)))))}catch(p){if(!Io(p))throw p;k("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let y=p.targetId;if(!p.fromCache){let v=f.us.get(y),S=v.snapshotVersion,N=v.withLastLimboFreeSnapshotVersion(S);f.us=f.us.insert(y,N)}}})}(r.localStore,o))})}function w2(t,e){return b(this,null,function*(){let n=le(t);if(!n.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield bS(n.localStore,e);n.currentUser=e,function(o,s){o.Qa.forEach(c=>{c.forEach(u=>{u.reject(new B(O.CANCELLED,s))})}),o.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield kS(n,r.Ts)}})}function T2(t,e){let n=le(t),r=n.Ba.get(e);if(r&&r.Fa)return he().add(r.key);{let i=he(),o=n.Oa.get(e);if(!o)return i;for(let s of o){let c=n.xa.get(s);i=i.unionWith(c.view.fa)}return i}}function LS(t){let e=le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=xS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=T2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_2.bind(null,e),e.Ma.R_=f2.bind(null,e.eventManager),e.Ma.Wa=p2.bind(null,e.eventManager),e}var FS=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return b(this,null,function*(){this.serializer=SS(n.databaseInfo.databaseId),this.sharedClientState=this.za(n),this.persistence=this.ja(n),yield this.persistence.start(),this.localStore=this.Ha(n),this.gcScheduler=this.Ja(n,this.localStore),this.indexBackfillerScheduler=this.Ya(n,this.localStore)})}Ja(n,r){return null}Ya(n,r){return null}Ha(n){return e2(this.persistence,new hy,n.initialUser,this.serializer)}ja(n){return new Wl(uy.ei,this.serializer)}za(n){return new gy}terminate(){return b(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),Oy=class extends FS{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){De(this.persistence.referenceDelegate instanceof Kl);let r=this.persistence.referenceDelegate.garbageCollector;return new Ym(r,e.asyncQueue,n)}ja(e){let n=this.cacheSizeBytes!==void 0?Ft.withCacheSize(this.cacheSizeBytes):Ft.DEFAULT;return new Wl(r=>Kl.ei(r,n),this.serializer)}};var D2=(()=>{class t{initialize(n,r){return b(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>KC(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=w2.bind(null,this.syncEngine),yield l2(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new Cy}()}createDatastore(n){let r=SS(n.databaseInfo.databaseId),i=function(s){return new vy(s)}(n.databaseInfo);return function(s,c,u,l){return new Iy(s,c,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,o,s,c,u){return new Ty(i,o,s,c,u)}(this.localStore,this.datastore,n.asyncQueue,r=>KC(this.syncEngine,r,0),function(){return Yl.p()?new Yl:new my}())}createSyncEngine(n,r){return function(o,s,c,u,l,f,p){let y=new Py(o,s,c,u,l,f);return p&&(y.$a=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return b(this,null,function*(){var n,r;yield function(o){return b(this,null,function*(){let s=le(o);k("RemoteStore","RemoteStore shutting down."),s.k_.add(5),yield wa(s),s.Q_.shutdown(),s.K_.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var ky=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Mn("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Ly=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=He.UNAUTHENTICATED,this.clientId=_m.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>b(this,null,function*(){k("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(k("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=MS(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function hm(t,e){return b(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>b(this,null,function*(){r.isEqual(i)||(yield bS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function YC(t,e){return b(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield b2(t);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>zC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>zC(e.remoteStore,i)),t._onlineComponents=e})}function b2(t){return b(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield hm(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===O.FAILED_PRECONDITION||i.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ao("Error using user provided cache. Falling back to memory cache: "+n),yield hm(t,new FS)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield hm(t,new Oy(void 0));return t._offlineComponents})}function C2(t){return b(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield YC(t,t._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield YC(t,new D2))),t._onlineComponents})}function JC(t){return b(this,null,function*(){let e=yield C2(t),n=e.eventManager;return n.onListen=g2.bind(null,e.syncEngine),n.onUnlisten=v2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=m2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=E2.bind(null,e.syncEngine),n})}function VS(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var ZC=new Map;function S2(t,e,n){if(!n)throw new B(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function A2(t,e,n,r){if(e===!0&&r===!0)throw new B(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function XC(t){if(z.isDocumentKey(t))throw new B(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function R2(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q()}function Ol(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=R2(t);throw new B(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var nd=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}A2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new B(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new B(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new B(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ea=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nd({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nd(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new fm;switch(r.type){case"firstParty":return new ym(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return b(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=ZC.get(n);r&&(k("ComponentProvider","Removing Datastore"),ZC.delete(n),r.terminate())}(this),Promise.resolve()}};function US(t,e,n,r={}){var i;let o=(t=Ol(t,Ea))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&ao("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=He.MOCK_USER;else{c=Pb(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new B(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new He(l)}t._authCredentials=new pm(new kl(c,u))}}var rd=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Qr=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},oo=class t extends rd{constructor(e,n,r){super(e,n,Qy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Qr(this.firestore,null,new z(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function jS(t,e,...n){if(t=Wt(t),S2("collection","path",e),t instanceof Ea){let r=xe.fromString(e,...n);return XC(r),new oo(t,null,r)}{if(!(t instanceof Qr||t instanceof oo))throw new B(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(xe.fromString(e,...n));return XC(r),new oo(t.firestore,null,r)}}var id=class{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new Jl(this,"async_queue_retry"),this.fu=()=>{let r=dm();r&&k("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;let n=dm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;let n=dm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});let n=new cr;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}wu(){return b(this,null,function*(){if(this.Iu.length!==0){try{yield this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Io(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}})}yu(e){let n=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;let i=function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),c}(r);throw Mn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(e,n,r){this.pu(),this.mu.indexOf(e)>-1&&(n=0);let i=Dy.createAndSchedule(this,e,n,r,o=>this.Su(o));return this.du.push(i),i}pu(){this.Au&&Q()}verifyOperationInProgress(){}bu(){return b(this,null,function*(){let e;do e=this.gu,yield e;while(e!==this.gu)})}Du(e){for(let n of this.du)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){let n=this.du.indexOf(e);this.du.splice(n,1)}};function eS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var _a=class extends Ea{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new id,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return b(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new id(e),this._firestoreClient=void 0,yield e}})}};function BS(t,e){let n=typeof t=="object"?t:ir(),r=typeof t=="string"?t:e||"(default)",i=Cn(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=Nb("firestore");o&&US(i,...o)}return i}function N2(t){if(t._terminated)throw new B(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||M2(t),t._firestoreClient}function M2(t){var e,n,r;let i=t._freezeSettings(),o=function(c,u,l,f){return new Tm(c,u,l,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,VS(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Ly(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}}(t._componentsProvider))}var Fy=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(it.fromBase64String(e))}catch(n){throw new B(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var od=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Vy=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}};var Uy=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var P2=new RegExp("[~\\*/\\[\\]]");function x2(t,e,n){if(e.search(P2)>=0)throw tS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new od(...e.split("."))._internalPath}catch{throw tS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function tS(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new B(O.INVALID_ARGUMENT,c+t+u)}var sd=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Qr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new jy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field($S("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},jy=class extends sd{data(){return super.data()}};function $S(t,e){return typeof e=="string"?x2(t,e):e instanceof od?e._internalPath:e._delegate._internalPath}function O2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var By=class{convertValue(e,n="none"){switch(ur(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Te(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Ia(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Te(s.doubleValue));return new Uy(o)}convertGeoPoint(e){return new Vy(Te(e.latitude),Te(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=dd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ua(e));default:return null}}convertTimestamp(e){let n=Pn(e);return new Vt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=xe.fromString(e);De(DS(r));let i=new jl(r.get(1),r.get(3)),o=new z(r.popFirst(5));return i.isEqual(n)||Mn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};var Gr=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ad=class extends sd{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new so(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field($S("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},so=class extends ad{data(e={}){return super.data(e)}},$y=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Gr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new so(this._firestore,this._userDataWriter,r.key,r,new Gr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new so(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Gr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new so(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Gr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,f=-1;return c.type!==0&&(l=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),f=s.indexOf(c.doc.key)),{type:k2(c.type),doc:u,oldIndex:l,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function k2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}var cd=class extends By{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fy(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qr(this.firestore,null,n)}};function nv(t,...e){var n,r,i;t=Wt(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||eS(e[s])||(o=e[s],s++);let c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(eS(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,f;if(t instanceof Qr)l=Ol(t.firestore,_a),f=Qy(t._key.path),u={next:p=>{e[s]&&e[s](L2(l,t,p))},error:e[s+1],complete:e[s+2]};else{let p=Ol(t,rd);l=Ol(p.firestore,_a),f=p._query;let y=new cd(l);u={next:v=>{e[s]&&e[s](new $y(l,y,p,v))},error:e[s+1],complete:e[s+2]},O2(t._query)}return function(y,v,S,N){let M=new ky(N),L=new Ay(v,M,S);return y.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return d2(yield JC(y),L)})),()=>{M.eu(),y.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return h2(yield JC(y),L)}))}}(N2(l),f,c,u)}function L2(t,e,n){let r=n.docs.get(e._key),i=new cd(t);return new ad(t,i,e._key,r,new Gr(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){_o=i})(Yi),lt(new $e("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new _a(new gm(r.getProvider("auth-internal")),new Em(r.getProvider("app-check-internal")),function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new B(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jl(l.options.projectId,f)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Ie(IC,"4.7.5",e),Ie(IC,"4.7.5","esm2017")})();var gd=function(){return gd=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},gd.apply(this,arguments)};var U2={includeMetadataChanges:!1};function HS(t,e){return e===void 0&&(e=U2),new ie(function(n){var r=nv(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function qS(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:gd(gd({},r),(n={},n[e.idField]=t.id,n))}function zS(t){return HS(t,{includeMetadataChanges:!0}).pipe(ee(function(e){return e.docs}))}function GS(t,e){return e===void 0&&(e={}),zS(t).pipe(ee(function(n){return n.map(function(r){return qS(r,e)})}))}var Yr=class{constructor(e){return e}},WS="firestore",rv=class{constructor(){return Vr(WS)}};var iv=new V("angularfire2.firestore-instances");function j2(t,e){let n=Ys(WS,t,e);return n&&new Yr(n)}function B2(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Yr(r)}}var $2={provide:rv,deps:[[new Dt,iv]]},H2={provide:Yr,useFactory:j2,deps:[[new Dt,iv],An]};function KS(t,...e){return Ie("angularfire",or.full,"fst"),bt([H2,$2,{provide:iv,useFactory:B2(t),multi:!0,deps:[ye,Be,Ur,jr,[new Dt,Cl],[new Dt,Ks],...e]}])}var QS=Sn(GS,!0);var YS=Sn(jS,!0);var JS=Sn(BS,!0);var eA="@firebase/installations",cv="0.6.11";var tA=1e4,nA=`w:${cv}`,rA="FIS_v2",q2="https://firebaseinstallations.googleapis.com/v1",z2=60*60*1e3,G2="installations",W2="Installations";var K2={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Zr=new Rt(G2,W2,K2);function iA(t){return t instanceof nt&&t.code.includes("request-failed")}function oA({projectId:t}){return`${q2}/projects/${t}/installations`}function sA(t){return{token:t.token,requestStatus:2,expiresIn:Y2(t.expiresIn),creationTime:Date.now()}}function aA(t,e){return b(this,null,function*(){let r=(yield e.json()).error;return Zr.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function cA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Q2(t,{refreshToken:e}){let n=cA(t);return n.append("Authorization",J2(e)),n}function uA(t){return b(this,null,function*(){let e=yield t();return e.status>=500&&e.status<600?t():e})}function Y2(t){return Number(t.replace("s","000"))}function J2(t){return`${rA} ${t}`}function Z2(r,i){return b(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){let o=oA(t),s=cA(t),c=e.getImmediate({optional:!0});if(c){let p=yield c.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let u={fid:n,authVersion:rA,appId:t.appId,sdkVersion:nA},l={method:"POST",headers:s,body:JSON.stringify(u)},f=yield uA(()=>fetch(o,l));if(f.ok){let p=yield f.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:sA(p.authToken)}}else throw yield aA("Create Installation",f)})}function lA(t){return new Promise(e=>{setTimeout(e,t)})}function X2(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var eB=/^[cdef][\w-]{21}$/,av="";function tB(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let n=nB(t);return eB.test(n)?n:av}catch{return av}}function nB(t){return X2(t).substr(0,22)}function yd(t){return`${t.appName}!${t.appId}`}var dA=new Map;function hA(t,e){let n=yd(t);fA(n,e),rB(n,e)}function fA(t,e){let n=dA.get(t);if(n)for(let r of n)r(e)}function rB(t,e){let n=iB();n&&n.postMessage({key:t,fid:e}),oB()}var Jr=null;function iB(){return!Jr&&"BroadcastChannel"in self&&(Jr=new BroadcastChannel("[Firebase] FID Change"),Jr.onmessage=t=>{fA(t.data.key,t.data.fid)}),Jr}function oB(){dA.size===0&&Jr&&(Jr.close(),Jr=null)}var sB="firebase-installations-database",aB=1,Xr="firebase-installations-store",ov=null;function uv(){return ov||(ov=fl(sB,aB,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Xr)}}})),ov}function md(t,e){return b(this,null,function*(){let n=yd(t),i=(yield uv()).transaction(Xr,"readwrite"),o=i.objectStore(Xr),s=yield o.get(n);return yield o.put(e,n),yield i.done,(!s||s.fid!==e.fid)&&hA(t,e.fid),e})}function pA(t){return b(this,null,function*(){let e=yd(t),r=(yield uv()).transaction(Xr,"readwrite");yield r.objectStore(Xr).delete(e),yield r.done})}function vd(t,e){return b(this,null,function*(){let n=yd(t),i=(yield uv()).transaction(Xr,"readwrite"),o=i.objectStore(Xr),s=yield o.get(n),c=e(s);return c===void 0?yield o.delete(n):yield o.put(c,n),yield i.done,c&&(!s||s.fid!==c.fid)&&hA(t,c.fid),c})}function lv(t){return b(this,null,function*(){let e,n=yield vd(t.appConfig,r=>{let i=cB(r),o=uB(t,i);return e=o.registrationPromise,o.installationEntry});return n.fid===av?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function cB(t){let e=t||{fid:tB(),registrationStatus:0};return gA(e)}function uB(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(Zr.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=lB(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:dB(t)}:{installationEntry:e}}function lB(t,e){return b(this,null,function*(){try{let n=yield Z2(t,e);return md(t.appConfig,n)}catch(n){throw iA(n)&&n.customData.serverCode===409?yield pA(t.appConfig):yield md(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function dB(t){return b(this,null,function*(){let e=yield ZS(t.appConfig);for(;e.registrationStatus===1;)yield lA(100),e=yield ZS(t.appConfig);if(e.registrationStatus===0){let{installationEntry:n,registrationPromise:r}=yield lv(t);return r||n}return e})}function ZS(t){return vd(t,e=>{if(!e)throw Zr.create("installation-not-found");return gA(e)})}function gA(t){return hB(t)?{fid:t.fid,registrationStatus:0}:t}function hB(t){return t.registrationStatus===1&&t.registrationTime+tA<Date.now()}function fB(r,i){return b(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){let o=pB(t,n),s=Q2(t,n),c=e.getImmediate({optional:!0});if(c){let p=yield c.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}let u={installation:{sdkVersion:nA,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(u)},f=yield uA(()=>fetch(o,l));if(f.ok){let p=yield f.json();return sA(p)}else throw yield aA("Generate Auth Token",f)})}function pB(t,{fid:e}){return`${oA(t)}/${e}/authTokens:generate`}function dv(t,e=!1){return b(this,null,function*(){let n,r=yield vd(t.appConfig,o=>{if(!mA(o))throw Zr.create("not-registered");let s=o.authToken;if(!e&&yB(s))return o;if(s.requestStatus===1)return n=gB(t,e),o;{if(!navigator.onLine)throw Zr.create("app-offline");let c=EB(o);return n=mB(t,c),c}});return n?yield n:r.authToken})}function gB(t,e){return b(this,null,function*(){let n=yield XS(t.appConfig);for(;n.authToken.requestStatus===1;)yield lA(100),n=yield XS(t.appConfig);let r=n.authToken;return r.requestStatus===0?dv(t,e):r})}function XS(t){return vd(t,e=>{if(!mA(e))throw Zr.create("not-registered");let n=e.authToken;return _B(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function mB(t,e){return b(this,null,function*(){try{let n=yield fB(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield md(t.appConfig,r),n}catch(n){if(iA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield pA(t.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield md(t.appConfig,r)}throw n}})}function mA(t){return t!==void 0&&t.registrationStatus===2}function yB(t){return t.requestStatus===2&&!vB(t)}function vB(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+z2}function EB(t){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function _B(t){return t.requestStatus===1&&t.requestTime+tA<Date.now()}function IB(t){return b(this,null,function*(){let e=t,{installationEntry:n,registrationPromise:r}=yield lv(e);return r?r.catch(console.error):dv(e).catch(console.error),n.fid})}function wB(t,e=!1){return b(this,null,function*(){let n=t;return yield TB(n),(yield dv(n,e)).token})}function TB(t){return b(this,null,function*(){let{registrationPromise:e}=yield lv(t);e&&(yield e)})}function DB(t){if(!t||!t.options)throw sv("App Configuration");if(!t.name)throw sv("App Name");let e=["projectId","apiKey","appId"];for(let n of e)if(!t.options[n])throw sv(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function sv(t){return Zr.create("missing-app-config-values",{valueName:t})}var yA="installations",bB="installations-internal",CB=t=>{let e=t.getProvider("app").getImmediate(),n=DB(e),r=Cn(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},SB=t=>{let e=t.getProvider("app").getImmediate(),n=Cn(e,yA).getImmediate();return{getId:()=>IB(n),getToken:i=>wB(n,i)}};function AB(){lt(new $e(yA,CB,"PUBLIC")),lt(new $e(bB,SB,"PRIVATE"))}AB();Ie(eA,cv);Ie(eA,cv,"esm2017");var Ed="analytics",RB="firebase_id",NB="origin",MB=60*1e3,PB="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",vv="https://www.googletagmanager.com/gtag/js";var dt=new sn("@firebase/analytics");var xB={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Mt=new Rt("analytics","Analytics",xB);function OB(t){if(!t.startsWith(vv)){let e=Mt.create("invalid-gtag-resource",{gtagURL:t});return dt.warn(e.message),""}return t}function DA(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function kB(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function LB(t,e){let n=kB("firebase-js-sdk-policy",{createScriptURL:OB}),r=document.createElement("script"),i=`${vv}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function FB(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function VB(t,e,n,r,i,o){return b(this,null,function*(){let s=r[i];try{if(s)yield e[s];else{let u=(yield DA(n)).find(l=>l.measurementId===i);u&&(yield e[u.appId])}}catch(c){dt.error(c)}t("config",i,o)})}function UB(t,e,n,r,i){return b(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let c=yield DA(n);for(let u of s){let l=c.find(p=>p.measurementId===u),f=l&&e[l.appId];if(f)o.push(f);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),t("event",r,i||{})}catch(o){dt.error(o)}})}function jB(t,e,n,r){function i(o,...s){return b(this,null,function*(){try{if(o==="event"){let[c,u]=s;yield UB(t,e,n,c,u)}else if(o==="config"){let[c,u]=s;yield VB(t,e,n,r,c,u)}else if(o==="consent"){let[c,u]=s;t("consent",c,u)}else if(o==="get"){let[c,u,l]=s;t("get",c,u,l)}else if(o==="set"){let[c]=s;t("set",c)}else t(o,...s)}catch(c){dt.error(c)}})}return i}function BB(t,e,n,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=jB(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}function $B(t){let e=window.document.getElementsByTagName("script");for(let n of Object.values(e))if(n.src&&n.src.includes(vv)&&n.src.includes(t))return n;return null}var HB=30,qB=1e3,fv=class{constructor(e={},n=qB){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},bA=new fv;function zB(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function GB(t){return b(this,null,function*(){var e;let{appId:n,apiKey:r}=t,i={method:"GET",headers:zB(r)},o=PB.replace("{app-id}",n),s=yield fetch(o,i);if(s.status!==200&&s.status!==304){let c="";try{let u=yield s.json();!((e=u.error)===null||e===void 0)&&e.message&&(c=u.error.message)}catch{}throw Mt.create("config-fetch-failed",{httpStatus:s.status,responseMessage:c})}return s.json()})}function WB(r){return b(this,arguments,function*(t,e=bA,n){let{appId:i,apiKey:o,measurementId:s}=t.options;if(!i)throw Mt.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw Mt.create("no-api-key")}let c=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new pv;return setTimeout(()=>b(this,null,function*(){u.abort()}),n!==void 0?n:MB),CA({appId:i,apiKey:o,measurementId:s},c,u,e)})}function CA(o,s,c){return b(this,arguments,function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=bA){var u;let{appId:l,measurementId:f}=t;try{yield KB(r,e)}catch(p){if(f)return dt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:l,measurementId:f};throw p}try{let p=yield GB(t);return i.deleteThrottleMetadata(l),p}catch(p){let y=p;if(!QB(y)){if(i.deleteThrottleMetadata(l),f)return dt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${y?.message}]`),{appId:l,measurementId:f};throw p}let v=Number((u=y?.customData)===null||u===void 0?void 0:u.httpStatus)===503?Dg(n,i.intervalMillis,HB):Dg(n,i.intervalMillis),S={throttleEndTimeMillis:Date.now()+v,backoffCount:n+1};return i.setThrottleMetadata(l,S),dt.debug(`Calling attemptFetch again in ${v} millis`),CA(t,S,r,i)}})}function KB(t,e){return new Promise((n,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(o),r(Mt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function QB(t){if(!(t instanceof nt)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var pv=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var gv;function YB(t,e,n,r,i){return b(this,null,function*(){if(i&&i.global){t("event",n,r);return}else{let o=yield e,s=Object.assign(Object.assign({},r),{send_to:o});t("event",n,s)}})}var mv;function JB(t){mv=t}function ZB(t){gv=t}function XB(){return b(this,null,function*(){if(Ki())try{yield zs()}catch(t){return dt.warn(Mt.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return dt.warn(Mt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function e$(t,e,n,r,i,o,s){return b(this,null,function*(){var c;let u=WB(t);u.then(v=>{n[v.measurementId]=v.appId,t.options.measurementId&&v.measurementId!==t.options.measurementId&&dt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>dt.error(v)),e.push(u);let l=XB().then(v=>{if(v)return r.getId()}),[f,p]=yield Promise.all([u,l]);$B(o)||LB(o,f.measurementId),mv&&(i("consent","default",mv),JB(void 0)),i("js",new Date);let y=(c=s?.config)!==null&&c!==void 0?c:{};return y[NB]="firebase",y.update=!0,p!=null&&(y[RB]=p),i("config",f.measurementId,y),gv&&(i("set",gv),ZB(void 0)),f.measurementId})}var yv=class{constructor(e){this.app=e}_delete(){return delete Da[this.app.options.appId],Promise.resolve()}},Da={},vA=[],EA={},hv="dataLayer",t$="gtag",_A,SA,IA=!1;function n$(){let t=[];if(qs()&&t.push("This is a browser extension environment."),wg()||t.push("Cookies are not available."),t.length>0){let e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Mt.create("invalid-analytics-context",{errorInfo:e});dt.warn(n.message)}}function r$(t,e,n){n$();let r=t.options.appId;if(!r)throw Mt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)dt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Mt.create("no-api-key");if(Da[r]!=null)throw Mt.create("already-exists",{id:r});if(!IA){FB(hv);let{wrappedGtag:o,gtagCore:s}=BB(Da,vA,EA,hv,t$);SA=o,_A=s,IA=!0}return Da[r]=e$(t,vA,EA,e,_A,hv,n),new yv(t)}function AA(t=ir()){t=Wt(t);let e=Cn(t,Ed);return e.isInitialized()?e.getImmediate():RA(t)}function RA(t,e={}){let n=Cn(t,Ed);if(n.isInitialized()){let i=n.getImmediate();if(nr(e,n.getOptions()))return i;throw Mt.create("already-initialized")}return n.initialize({options:e})}function NA(){return b(this,null,function*(){if(qs()||!wg()||!Ki())return!1;try{return yield zs()}catch{return!1}})}function MA(t,e,n,r){t=Wt(t),YB(SA,Da[t.app.options.appId],e,n,r).catch(i=>dt.error(i))}var wA="@firebase/analytics",TA="0.10.10";function i$(){lt(new $e(Ed,(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return r$(r,i,n)},"PUBLIC")),lt(new $e("analytics-internal",t,"PRIVATE")),Ie(wA,TA),Ie(wA,TA,"esm2017");function t(e){try{let n=e.getProvider(Ed).getImmediate();return{logEvent:(r,i,o)=>MA(n,r,i,o)}}catch(n){throw Mt.create("interop-component-reg-failed",{reason:n})}}}i$();var ba=class{constructor(e){return e}},PA="analytics",Ev=class{constructor(){return Vr(PA)}};var _v="__angularfire_symbol__analyticsIsSupportedValue",xA="__angularfire_symbol__analyticsIsSupported";globalThis[xA]||=NA().then(t=>globalThis[_v]=t).catch(()=>globalThis[_v]=!1);var _d={async:()=>globalThis[xA],sync:()=>{let t=globalThis[_v];if(t===void 0)throw new Error(Jb("Analytics"));return t}},WK=_d.async,OA=Sn(AA,!0);var KK=Math.floor(Math.random()*(2**32-1))-2**31;var Iv=new V("angularfire2.analytics-instances");function o$(t,e){if(!_d.sync())return null;let n=Ys(PA,t,e);return n&&new ba(n)}function s$(t){return(e,n)=>{if(!_d.sync())return null;let r=e.runOutsideAngular(()=>t(n));return new ba(r)}}var a$={provide:Ev,deps:[[new Dt,Iv]]},c$={provide:ba,useFactory:o$,deps:[[new Dt,Iv],An]};function kA(t,...e){return Ie("angularfire",or.full,"analytics"),bt([c$,a$,{provide:Lu,useValue:_d.async,multi:!0},{provide:Iv,useFactory:s$(t),multi:!0,deps:[ye,Be,Ur,jr,...e]}])}var u$={apiKey:"AIzaSyApeHp8f3VbMir4QeabWv-tBG8gbPjh6-0",authDomain:"newtritionist-app-angular.firebaseapp.com",projectId:"newtritionist-app-angular",storageBucket:"newtritionist-app-angular.firebasestorage.app",messagingSenderId:"427778759049",appId:"1:427778759049:web:85c1f4d118ca80fe81a958",measurementId:"G-9T4ZYPKPDK"},LA={providers:[sD({eventCoalescing:!0}),bb(eC),$D(BD()),Zb(()=>Xb(u$)),KS(()=>JS()),kA(()=>OA())]};function l$(t,e){if(t&1&&(ms(0,"li"),eD(1),ys()),t&2){let n=e.$implicit;op(),yp(" ",n.name," ")}}var Id=class t{title="newtritionist-app-angular";fireStore=R(Yr);item$;constructor(){let e=YS(this.fireStore,"test");this.item$=QS(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=xu({type:t,selectors:[["app-root"]],decls:4,vars:2,template:function(n,r){n&1&&(ms(0,"ul"),JT(1,l$,2,1,"li",null,YT),nD(3,"async"),ys()),n&2&&(op(),ZT(rD(3,0,r.item$)))},dependencies:[Dp,ED],encapsulation:2})};UD(Id,LA).catch(t=>console.error(t));
